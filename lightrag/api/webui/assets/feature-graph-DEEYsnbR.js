const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-vendor-CQrHFgEm.js","assets/react-vendor-CI9PN-jl.js"])))=>i.map(i=>d[i]);
var _i=Object.defineProperty;var Si=(e,t,r)=>t in e?_i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Fe=(e,t,r)=>Si(e,typeof t!="symbol"?t+"":t,r);import{R as Y,r as m,c as Ei,g as He,d as ki}from"./react-vendor-CI9PN-jl.js";import{_ as ga,a as pa,f as rr,N as ma,b as va,c as ya,D as En,d as Xt,F as Ci,E as ba,e as Ti,g as Jn,h as Ri,n as Zn,v as Be,i as wa,j as xa,r as Xe,k as _a,y as Sa,p as ji,l as Ai,U as Kr,m as Ni,o as Ii,S as Li}from"./graph-vendor-C2ay-rh5.js";import{j as g,c as kn,P as _t,a as Ea,D as Pi,C as zi,b as Di,R as Oi,u as Ve,d as ft,e as ka,f as Gi,A as Mi,g as _e,h as ke,i as Fi,S as $i,O as Cn,k as Ca,l as Tn,m as Hi,T as Ta,n as Ra,o as ja,p as Bi,q as Vi,r as Aa,s as qi,t as Ui,v as Rt,w as Wi,x as Xi,y as Yi,z as ut,B as Ki,E as Qi}from"./ui-vendor-BNB5trKt.js";import{t as Ji,c as Na,a as nr,b as Zi}from"./utils-vendor-CQrHFgEm.js";function ue(...e){return Ji(Na(e))}function or(e){return e instanceof Error?e.message:`${e}`}function bp(e,t){let r=0,n=null;return function(...a){const o=Date.now(),l=t-(o-r);l<=0?(n&&(clearTimeout(n),n=null),r=o,e.apply(this,a)):n||(n=setTimeout(()=>{r=Date.now(),n=null,e.apply(this,a)},l))}}const Rn=e=>{const t=e;t.use={};for(const r of Object.keys(t.getState()))t.use[r]=()=>t(n=>n[r]);return t},Qr="",wp="/webui/",Ie="ghost",Jr="#B2EBF2",eo="#000",el="#000",tl="#E2E2E2",Zr="#EEEEEE",rl="#F57F17",nl="#969696",ol="#F57F17",to="#B2EBF2",Pt=50,ro=100,dt=4,en=20,al=15,no="*",xp={"text/plain":[".txt",".md",".rtf",".odt",".tex",".epub",".html",".htm",".csv",".json",".xml",".yaml",".yml",".log",".conf",".ini",".properties",".sql",".bat",".sh",".c",".cpp",".py",".java",".js",".ts",".swift",".go",".rb",".php",".css",".scss",".less"],"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},_p={name:"LightRAG",github:"https://github.com/HKUDS/LightRAG"},sl="modulepreload",il=function(e){return"/webui/"+e},oo={},ll=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=l(r.map(c=>{if(c=il(c),c in oo)return;oo[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":sl,u||(h.as="script"),h.crossOrigin="",h.href=c,i&&h.setAttribute("nonce",i),document.head.appendChild(h),u)return new Promise((d,y)=>{h.addEventListener("load",d),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=l,window.dispatchEvent(s),!s.defaultPrevented)throw l}return a.then(l=>{for(const s of l||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})};function Ia(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var o;const l=i=>i===null?null:JSON.parse(i,void 0),s=(o=r.getItem(a))!=null?o:null;return s instanceof Promise?s.then(l):l(s)},setItem:(a,o)=>r.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>r.removeItem(a)}}const tn=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return tn(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return tn(n)(r)}}}},cl=(e,t)=>(r,n,a)=>{let o={storage:Ia(()=>localStorage),partialize:w=>w,version:0,merge:(w,C)=>({...C,...w}),...t},l=!1;const s=new Set,i=new Set;let c=o.storage;if(!c)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...w)},n,a);const u=()=>{const w=o.partialize({...n()});return c.setItem(o.name,{state:w,version:o.version})},f=a.setState;a.setState=(w,C)=>(f(w,C),u());const h=e((...w)=>(r(...w),u()),n,a);a.getInitialState=()=>h;let d;const y=()=>{var w,C;if(!c)return;l=!1,s.forEach(S=>{var j;return S((j=n())!=null?j:h)});const A=((C=o.onRehydrateStorage)==null?void 0:C.call(o,(w=n())!=null?w:h))||void 0;return tn(c.getItem.bind(c))(o.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==o.version){if(o.migrate){const j=o.migrate(S.state,S.version);return j instanceof Promise?j.then(T=>[!0,T]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var j;const[T,I]=S;if(d=o.merge(I,(j=n())!=null?j:h),r(d,!0),T)return u()}).then(()=>{A==null||A(d,void 0),d=n(),l=!0,i.forEach(S=>S(d))}).catch(S=>{A==null||A(void 0,S)})};return a.persist={setOptions:w=>{o={...o,...w},w.storage&&(c=w.storage)},clearStorage:()=>{c==null||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>l,onHydrate:w=>(s.add(w),()=>{s.delete(w)}),onFinishHydration:w=>(i.add(w),()=>{i.delete(w)})},o.skipHydration||y(),d||h},ul=cl,dl=nr()(ul(e=>({theme:"system",language:"en",showPropertyPanel:!0,showNodeSearchBar:!0,showLegend:!1,showNodeLabel:!0,enableNodeDrag:!0,showEdgeLabel:!1,enableHideUnselectedEdges:!0,enableEdgeEvents:!1,minEdgeSize:1,maxEdgeSize:1,graphQueryMaxDepth:3,graphMaxNodes:1e3,backendMaxGraphNodes:null,graphLayoutMaxIterations:15,queryLabel:no,enableHealthCheck:!0,apiKey:null,currentTab:"documents",showFileName:!1,documentsPageSize:10,retrievalHistory:[],querySettings:{mode:"global",response_type:"Multiple Paragraphs",top_k:40,chunk_top_k:20,max_entity_tokens:6e3,max_relation_tokens:8e3,max_total_tokens:3e4,only_need_context:!1,only_need_prompt:!1,stream:!0,history_turns:0,user_prompt:"",enable_rerank:!0},setTheme:t=>e({theme:t}),setLanguage:t=>{e({language:t}),ll(async()=>{const{default:r}=await import("./utils-vendor-CQrHFgEm.js").then(n=>n.d);return{default:r}},__vite__mapDeps([0,1])).then(({default:r})=>{r.language!==t&&r.changeLanguage(t)})},setGraphLayoutMaxIterations:t=>e({graphLayoutMaxIterations:t}),setQueryLabel:t=>e({queryLabel:t}),setGraphQueryMaxDepth:t=>e({graphQueryMaxDepth:t}),setGraphMaxNodes:(t,r=!1)=>{const n=Z.getState();if(n.graphMaxNodes!==t)if(r){const a=n.queryLabel;e({graphMaxNodes:t,queryLabel:""}),setTimeout(()=>{e({queryLabel:a})},300)}else e({graphMaxNodes:t})},setBackendMaxGraphNodes:t=>e({backendMaxGraphNodes:t}),setMinEdgeSize:t=>e({minEdgeSize:t}),setMaxEdgeSize:t=>e({maxEdgeSize:t}),setEnableHealthCheck:t=>e({enableHealthCheck:t}),setApiKey:t=>e({apiKey:t}),setCurrentTab:t=>e({currentTab:t}),setRetrievalHistory:t=>e({retrievalHistory:t}),updateQuerySettings:t=>{const r={...t};delete r.history_turns,e(n=>({querySettings:{...n.querySettings,...r,history_turns:0}}))},setShowFileName:t=>e({showFileName:t}),setShowLegend:t=>e({showLegend:t}),setDocumentsPageSize:t=>e({documentsPageSize:t})}),{name:"settings-storage",storage:Ia(()=>localStorage),version:17,migrate:(e,t)=>(t<2&&(e.showEdgeLabel=!1),t<3&&(e.queryLabel=no),t<4&&(e.showPropertyPanel=!0,e.showNodeSearchBar=!0,e.showNodeLabel=!0,e.enableHealthCheck=!0,e.apiKey=null),t<5&&(e.currentTab="documents"),t<6&&(e.querySettings={mode:"global",response_type:"Multiple Paragraphs",top_k:10,max_token_for_text_unit:4e3,max_token_for_global_context:4e3,max_token_for_local_context:4e3,only_need_context:!1,only_need_prompt:!1,stream:!0,history_turns:0,hl_keywords:[],ll_keywords:[]},e.retrievalHistory=[]),t<7&&(e.graphQueryMaxDepth=3,e.graphLayoutMaxIterations=15),t<8&&(e.graphMinDegree=0,e.language="en"),t<9&&(e.showFileName=!1),t<10&&(delete e.graphMinDegree,e.graphMaxNodes=1e3),t<11&&(e.minEdgeSize=1,e.maxEdgeSize=1),t<12&&(e.retrievalHistory=[]),t<13&&e.querySettings&&(e.querySettings.user_prompt=""),t<14&&(e.backendMaxGraphNodes=null),t<15&&(e.querySettings={...e.querySettings,mode:"mix",response_type:"Multiple Paragraphs",top_k:40,chunk_top_k:10,max_entity_tokens:1e4,max_relation_tokens:1e4,max_total_tokens:32e3,enable_rerank:!0,history_turns:0}),t<16&&(e.documentsPageSize=10),t<17&&e.querySettings&&(e.querySettings.history_turns=0),e)})),Z=Rn(dl);class fl{constructor(){Fe(this,"nodes",[]);Fe(this,"edges",[]);Fe(this,"nodeIdMap",{});Fe(this,"edgeIdMap",{});Fe(this,"edgeDynamicIdMap",{});Fe(this,"getNode",t=>{const r=this.nodeIdMap[t];if(r!==void 0)return this.nodes[r]});Fe(this,"getEdge",(t,r=!0)=>{const n=r?this.edgeDynamicIdMap[t]:this.edgeIdMap[t];if(n!==void 0)return this.edges[n]});Fe(this,"buildDynamicMap",()=>{this.edgeDynamicIdMap={};for(let t=0;t<this.edges.length;t++){const r=this.edges[t];this.edgeDynamicIdMap[r.dynamicId]=t}})}}const hl=nr()((e,t)=>({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null,moveToSelectedNode:!1,isFetching:!1,graphIsEmpty:!1,lastSuccessfulQueryLabel:"",graphDataFetchAttempted:!1,labelsFetchAttempted:!1,rawGraph:null,sigmaGraph:null,sigmaInstance:null,allDatabaseLabels:["*"],typeColorMap:new Map,searchEngine:null,setGraphIsEmpty:r=>e({graphIsEmpty:r}),setLastSuccessfulQueryLabel:r=>e({lastSuccessfulQueryLabel:r}),setIsFetching:r=>e({isFetching:r}),setSelectedNode:(r,n)=>e({selectedNode:r,moveToSelectedNode:n}),setFocusedNode:r=>e({focusedNode:r}),setSelectedEdge:r=>e({selectedEdge:r}),setFocusedEdge:r=>e({focusedEdge:r}),clearSelection:()=>e({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null}),reset:()=>{e({selectedNode:null,focusedNode:null,selectedEdge:null,focusedEdge:null,rawGraph:null,sigmaGraph:null,searchEngine:null,moveToSelectedNode:!1,graphIsEmpty:!1})},setRawGraph:r=>e({rawGraph:r}),setSigmaGraph:r=>{e({sigmaGraph:r})},setAllDatabaseLabels:r=>e({allDatabaseLabels:r}),fetchAllDatabaseLabels:async()=>{try{console.log("Fetching all database labels...");const r=await pl();e({allDatabaseLabels:["*",...r]});return}catch(r){throw console.error("Failed to fetch all database labels:",r),e({allDatabaseLabels:["*"]}),r}},setMoveToSelectedNode:r=>e({moveToSelectedNode:r}),setSigmaInstance:r=>e({sigmaInstance:r}),setTypeColorMap:r=>e({typeColorMap:r}),setSearchEngine:r=>e({searchEngine:r}),resetSearchEngine:()=>e({searchEngine:null}),setGraphDataFetchAttempted:r=>e({graphDataFetchAttempted:r}),setLabelsFetchAttempted:r=>e({labelsFetchAttempted:r}),nodeToExpand:null,nodeToPrune:null,triggerNodeExpand:r=>e({nodeToExpand:r}),triggerNodePrune:r=>e({nodeToPrune:r}),graphDataVersion:0,incrementGraphDataVersion:()=>e(r=>({graphDataVersion:r.graphDataVersion+1})),updateNodeAndSelect:async(r,n,a,o)=>{const l=t(),{sigmaGraph:s,rawGraph:i}=l;if(!(!s||!i||!s.hasNode(r)))try{const c=s.getNodeAttributes(r);if(console.log("updateNodeAndSelect",r,n,a,o),r===n&&a==="entity_id"){s.addNode(o,{...c,label:o});const u=[];s.forEachEdge(r,(h,d,y,w)=>{const C=y===r?w:y,A=y===r,S=h,j=i.edgeDynamicIdMap[S],T=s.addEdge(A?o:C,A?C:o,d);j!==void 0&&u.push({originalDynamicId:S,newEdgeId:T,edgeIndex:j}),s.dropEdge(h)}),s.dropNode(r);const f=i.nodeIdMap[r];f!==void 0&&(i.nodes[f].id=o,i.nodes[f].labels=[o],i.nodes[f].properties.entity_id=o,delete i.nodeIdMap[r],i.nodeIdMap[o]=f),u.forEach(({originalDynamicId:h,newEdgeId:d,edgeIndex:y})=>{i.edges[y]&&(i.edges[y].source===r&&(i.edges[y].source=o),i.edges[y].target===r&&(i.edges[y].target=o),i.edges[y].dynamicId=d,delete i.edgeDynamicIdMap[h],i.edgeDynamicIdMap[d]=y)}),e({selectedNode:o,moveToSelectedNode:!0})}else{const u=i.nodeIdMap[String(r)];u!==void 0&&(i.nodes[u].properties[a]=o,a==="entity_id"&&(i.nodes[u].labels=[o],s.setNodeAttribute(String(r),"label",o))),e(f=>({graphDataVersion:f.graphDataVersion+1}))}}catch(c){throw console.error("Error updating node in graph:",c),new Error("Failed to update node in graph")}},updateEdgeAndSelect:async(r,n,a,o,l,s)=>{const i=t(),{sigmaGraph:c,rawGraph:u}=i;if(!(!c||!u))try{const f=u.edgeIdMap[String(r)];f!==void 0&&u.edges[f]&&(u.edges[f].properties[l]=s,n!==void 0&&l==="keywords"&&c.setEdgeAttribute(n,"label",s)),e(h=>({graphDataVersion:h.graphDataVersion+1})),e({selectedEdge:n})}catch(f){throw console.error(`Error updating edge ${a}->${o} in graph:`,f),new Error("Failed to update edge in graph")}}})),te=Rn(hl);class gl{constructor(){Fe(this,"navigate",null)}setNavigate(t){this.navigate=t}resetAllApplicationState(t=!1){console.log("Resetting all application state...");const r=te.getState(),n=r.sigmaInstance;r.reset(),r.setGraphDataFetchAttempted(!1),r.setLabelsFetchAttempted(!1),r.setSigmaInstance(null),r.setIsFetching(!1),jn.getState().clear(),t||Z.getState().setRetrievalHistory([]),sessionStorage.clear(),n&&(n.getGraph().clear(),n.kill(),te.getState().setSigmaInstance(null))}navigateToLogin(){if(!this.navigate){console.error("Navigation function not set");return}const t=Yt.getState().username;t&&localStorage.setItem("LIGHTRAG-PREVIOUS-USER",t),this.resetAllApplicationState(!0),Yt.getState().logout(),this.navigate("/login")}navigateToHome(){if(!this.navigate){console.error("Navigation function not set");return}this.navigate("/")}}const La=new gl,Sp="Invalid API Key",Ep="API Key required",ye=Zi.create({baseURL:Qr,headers:{"Content-Type":"application/json"}});ye.interceptors.request.use(e=>{const t=Z.getState().apiKey,r=localStorage.getItem("LIGHTRAG-API-TOKEN");return r&&(e.headers.Authorization=`Bearer ${r}`),t&&(e.headers["X-API-Key"]=t),e});ye.interceptors.response.use(e=>e,e=>{var t,r,n,a;if(e.response){if(((t=e.response)==null?void 0:t.status)===401){if((n=(r=e.config)==null?void 0:r.url)!=null&&n.includes("/login"))throw e;return La.navigateToLogin(),Promise.reject(new Error("Authentication required"))}throw new Error(`${e.response.status} ${e.response.statusText}
${JSON.stringify(e.response.data)}
${(a=e.config)==null?void 0:a.url}`)}throw e});const Pa=async(e,t,r)=>(await ye.get(`/graphs?label=${encodeURIComponent(e)}&max_depth=${t}&max_nodes=${r}`)).data,pl=async()=>(await ye.get("/graph/label/list")).data,ml=async()=>{try{return(await ye.get("/health")).data}catch(e){return{status:"error",message:or(e)}}},kp=async()=>(await ye.post("/documents/scan")).data,Cp=async e=>(await ye.post("/query",e)).data,Tp=async(e,t,r)=>{const n=Z.getState().apiKey,a=localStorage.getItem("LIGHTRAG-API-TOKEN"),o={"Content-Type":"application/json",Accept:"application/x-ndjson"};a&&(o.Authorization=`Bearer ${a}`),n&&(o["X-API-Key"]=n);try{const l=await fetch(`${Qr}/query/stream`,{method:"POST",headers:o,body:JSON.stringify(e)});if(!l.ok){if(l.status===401)throw La.navigateToLogin(),new Error("Authentication required");let u="Unknown error";try{u=await l.text()}catch{}const f=`${Qr}/query/stream`;throw new Error(`${l.status} ${l.statusText}
${JSON.stringify({error:u})}
${f}`)}if(!l.body)throw new Error("Response body is null");const s=l.body.getReader(),i=new TextDecoder;let c="";for(;;){const{done:u,value:f}=await s.read();if(u)break;c+=i.decode(f,{stream:!0});const h=c.split(`
`);c=h.pop()||"";for(const d of h)if(d.trim())try{const y=JSON.parse(d);y.response?t(y.response):y.error&&r&&r(y.error)}catch(y){console.error("Error parsing stream chunk:",d,y),r&&r(`Error parsing server response: ${d}`)}}if(c.trim())try{const u=JSON.parse(c);u.response?t(u.response):u.error&&r&&r(u.error)}catch(u){console.error("Error parsing final chunk:",c,u),r&&r(`Error parsing final server response: ${c}`)}}catch(l){const s=or(l);if(s==="Authentication required"){console.error("Authentication required for stream request"),r&&r("Authentication required");return}const i=s.match(/^(\d{3})\s/);if(i){const c=parseInt(i[1],10);let u=s;switch(c){case 403:u="You do not have permission to access this resource (403 Forbidden)",console.error("Permission denied for stream request:",s);break;case 404:u="The requested resource does not exist (404 Not Found)",console.error("Resource not found for stream request:",s);break;case 429:u="Too many requests, please try again later (429 Too Many Requests)",console.error("Rate limited for stream request:",s);break;case 500:case 502:case 503:case 504:u=`Server error, please try again later (${c})`,console.error("Server error for stream request:",s);break;default:console.error("Stream request failed with status code:",c,s)}r&&r(u);return}if(s.includes("NetworkError")||s.includes("Failed to fetch")||s.includes("Network request failed")){console.error("Network error for stream request:",s),r&&r("Network connection error, please check your internet connection");return}if(s.includes("Error parsing")||s.includes("SyntaxError")){console.error("JSON parsing error in stream:",s),r&&r("Error processing response data");return}console.error("Unhandled stream error:",s),r?r(s):console.error("No error handler provided for stream error:",s)}},Rp=async(e,t)=>{const r=new FormData;return r.append("file",e),(await ye.post("/documents/upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t!==void 0?a=>{const o=Math.round(a.loaded*100/a.total);t(o)}:void 0})).data},jp=async()=>(await ye.delete("/documents")).data,Ap=async()=>(await ye.post("/documents/clear_cache",{})).data,Np=async(e,t=!1)=>(await ye.delete("/documents/delete_document",{data:{doc_ids:e,delete_file:t}})).data,Ip=async()=>{try{const e=await ye.get("/auth-status",{timeout:5e3,headers:{Accept:"application/json"}});if((e.headers["content-type"]||"").includes("text/html"))return console.warn("Received HTML response instead of JSON for auth-status endpoint"),{auth_configured:!0,auth_mode:"enabled"};if(e.data&&typeof e.data=="object"&&"auth_configured"in e.data&&typeof e.data.auth_configured=="boolean"){if(e.data.auth_configured)return e.data;if(e.data.access_token&&typeof e.data.access_token=="string")return e.data;console.warn("Auth not configured but no valid access token provided")}return console.warn("Received invalid auth status response:",e.data),{auth_configured:!0,auth_mode:"enabled"}}catch(e){return console.error("Failed to get auth status:",or(e)),{auth_configured:!0,auth_mode:"enabled"}}},Lp=async()=>(await ye.get("/documents/pipeline_status")).data,Pp=async(e,t)=>{const r=new FormData;return r.append("username",e),r.append("password",t),(await ye.post("/login",r,{headers:{"Content-Type":"multipart/form-data"}})).data},vl=async(e,t,r=!1)=>(await ye.post("/graph/entity/edit",{entity_name:e,updated_data:t,allow_rename:r})).data,yl=async(e,t,r)=>(await ye.post("/graph/relation/edit",{source_id:e,target_id:t,updated_data:r})).data,bl=async e=>{try{return(await ye.get(`/graph/entity/exists?name=${encodeURIComponent(e)}`)).data.exists}catch(t){return console.error("Error checking entity name:",t),!1}},zp=async e=>(await ye.post("/documents/paginated",e)).data,wl=async e=>(await ye.post("/scopes/validate",{srn:e})).data,xl=async(e,t,r,n=100)=>{const a={workspace:e,subject_type:t,pattern:r,limit:n};return(await ye.post("/scopes/list",a)).data},Dp=async e=>(await ye.post("/query/scope_aware",e)).data,Op=async(e,t)=>(await ye.post("/scopes/migrations/validate",{source_workspace:e,target_scope:t})).data,Gp=async(e,t,r={})=>(await ye.post("/scopes/migrations/migrate",{source_workspace:e,target_scope:t,subject_type:r.subjectType||"user",subject_id:r.subjectId||"migrated",dry_run:r.dryRun||!1,batch_size:r.batchSize||1e3})).data,Mp=async e=>(await ye.get(`/scopes/migrations/${encodeURIComponent(e)}`)).data,_l=nr()((e,t)=>({health:!0,message:null,messageTitle:null,lastCheckTime:Date.now(),status:null,pipelineBusy:!1,healthCheckIntervalId:null,healthCheckFunction:null,healthCheckIntervalValue:al*1e3,check:async()=>{var n;const r=await ml();if(r.status==="healthy"){if((r.core_version||r.api_version)&&Yt.getState().setVersion(r.core_version||null,r.api_version||null),("webui_title"in r||"webui_description"in r)&&Yt.getState().setCustomTitle("webui_title"in r?r.webui_title??null:null,"webui_description"in r?r.webui_description??null:null),(n=r.configuration)!=null&&n.max_graph_nodes){const a=parseInt(r.configuration.max_graph_nodes,10);!isNaN(a)&&a>0&&Z.getState().backendMaxGraphNodes!==a&&(Z.getState().setBackendMaxGraphNodes(a),Z.getState().graphMaxNodes>a&&Z.getState().setGraphMaxNodes(a,!0))}return e({health:!0,message:null,messageTitle:null,lastCheckTime:Date.now(),status:r,pipelineBusy:r.pipeline_busy}),!0}return e({health:!1,message:r.message,messageTitle:"Backend Health Check Error!",lastCheckTime:Date.now(),status:null}),!1},clear:()=>{e({health:!0,message:null,messageTitle:null})},setErrorMessage:(r,n)=>{e({health:!1,message:r,messageTitle:n})},setPipelineBusy:r=>{e({pipelineBusy:r})},setHealthCheckFunction:r=>{e({healthCheckFunction:r})},resetHealthCheckTimer:()=>{const{healthCheckIntervalId:r,healthCheckFunction:n,healthCheckIntervalValue:a}=t();if(r&&clearInterval(r),n){n();const o=setInterval(n,a);e({healthCheckIntervalId:o})}},resetHealthCheckTimerDelayed:r=>{setTimeout(()=>{t().resetHealthCheckTimer()},r)},clearHealthCheckTimer:()=>{const{healthCheckIntervalId:r}=t();r&&(clearInterval(r),e({healthCheckIntervalId:null}))}})),jn=Rn(_l),za=e=>{try{const t=e.split(".");return t.length!==3?{}:JSON.parse(atob(t[1]))}catch(t){return console.error("Error parsing token payload:",t),{}}},Da=e=>za(e).sub||null,Sl=e=>za(e).role==="guest",El=()=>{const e=localStorage.getItem("LIGHTRAG-API-TOKEN"),t=localStorage.getItem("LIGHTRAG-CORE-VERSION"),r=localStorage.getItem("LIGHTRAG-API-VERSION"),n=localStorage.getItem("LIGHTRAG-WEBUI-TITLE"),a=localStorage.getItem("LIGHTRAG-WEBUI-DESCRIPTION"),o=e?Da(e):null;return e?{isAuthenticated:!0,isGuestMode:Sl(e),coreVersion:t,apiVersion:r,username:o,webuiTitle:n,webuiDescription:a}:{isAuthenticated:!1,isGuestMode:!1,coreVersion:t,apiVersion:r,username:null,webuiTitle:n,webuiDescription:a}},Yt=nr(e=>{const t=El();return{isAuthenticated:t.isAuthenticated,isGuestMode:t.isGuestMode,coreVersion:t.coreVersion,apiVersion:t.apiVersion,username:t.username,webuiTitle:t.webuiTitle,webuiDescription:t.webuiDescription,login:(r,n=!1,a=null,o=null,l=null,s=null)=>{localStorage.setItem("LIGHTRAG-API-TOKEN",r),a&&localStorage.setItem("LIGHTRAG-CORE-VERSION",a),o&&localStorage.setItem("LIGHTRAG-API-VERSION",o),l?localStorage.setItem("LIGHTRAG-WEBUI-TITLE",l):localStorage.removeItem("LIGHTRAG-WEBUI-TITLE"),s?localStorage.setItem("LIGHTRAG-WEBUI-DESCRIPTION",s):localStorage.removeItem("LIGHTRAG-WEBUI-DESCRIPTION");const i=Da(r);e({isAuthenticated:!0,isGuestMode:n,username:i,coreVersion:a,apiVersion:o,webuiTitle:l,webuiDescription:s})},logout:()=>{localStorage.removeItem("LIGHTRAG-API-TOKEN");const r=localStorage.getItem("LIGHTRAG-CORE-VERSION"),n=localStorage.getItem("LIGHTRAG-API-VERSION"),a=localStorage.getItem("LIGHTRAG-WEBUI-TITLE"),o=localStorage.getItem("LIGHTRAG-WEBUI-DESCRIPTION");e({isAuthenticated:!1,isGuestMode:!1,username:null,coreVersion:r,apiVersion:n,webuiTitle:a,webuiDescription:o})},setVersion:(r,n)=>{r&&localStorage.setItem("LIGHTRAG-CORE-VERSION",r),n&&localStorage.setItem("LIGHTRAG-API-VERSION",n),e({coreVersion:r,apiVersion:n})},setCustomTitle:(r,n)=>{r?localStorage.setItem("LIGHTRAG-WEBUI-TITLE",r):localStorage.removeItem("LIGHTRAG-WEBUI-TITLE"),n?localStorage.setItem("LIGHTRAG-WEBUI-DESCRIPTION",n):localStorage.removeItem("LIGHTRAG-WEBUI-DESCRIPTION"),e({webuiTitle:r,webuiDescription:n})}}});var kl=e=>{switch(e){case"success":return Rl;case"info":return Al;case"warning":return jl;case"error":return Nl;default:return null}},Cl=Array(12).fill(0),Tl=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},Cl.map((r,n)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Rl=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),jl=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Al=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Nl=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Il=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ll=()=>{let[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},rn=1,Pl=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:rn++,o=this.toasts.find(s=>s.id===a),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(s=>s.id===a?(this.publish({...s,...e,id:a,title:r}),{...s,...e,id:a,dismissible:l,title:r}):s):this.addToast({title:r,...n,dismissible:l,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,o,l=n.then(async i=>{if(o=["resolve",i],Y.isValidElement(i))a=!1,this.create({id:r,type:"default",message:i});else if(Dl(i)&&!i.ok){a=!1;let c=typeof t.error=="function"?await t.error(`HTTP error! status: ${i.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:r,type:"error",message:c,description:u})}else if(t.success!==void 0){a=!1;let c=typeof t.success=="function"?await t.success(i):t.success,u=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"success",message:c,description:u})}}).catch(async i=>{if(o=["reject",i],t.error!==void 0){a=!1;let c=typeof t.error=="function"?await t.error(i):t.error,u=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"error",message:c,description:u})}}).finally(()=>{var i;a&&(this.dismiss(r),r=void 0),(i=t.finally)==null||i.call(t)}),s=()=>new Promise((i,c)=>l.then(()=>o[0]==="reject"?c(o[1]):i(o[1])).catch(c));return typeof r!="string"&&typeof r!="number"?{unwrap:s}:Object.assign(r,{unwrap:s})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||rn++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},je=new Pl,zl=(e,t)=>{let r=(t==null?void 0:t.id)||rn++;return je.addToast({title:e,...t,id:r}),r},Dl=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ol=zl,Gl=()=>je.toasts,Ml=()=>je.getActiveToasts(),rt=Object.assign(Ol,{success:je.success,info:je.info,warning:je.warning,error:je.error,custom:je.custom,message:je.message,promise:je.promise,dismiss:je.dismiss,loading:je.loading},{getHistory:Gl,getToasts:Ml});function Fl(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Fl(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zt(e){return e.label!==void 0}var $l=3,Hl="32px",Bl="16px",ao=4e3,Vl=356,ql=14,Ul=20,Wl=200;function Me(...e){return e.filter(Boolean).join(" ")}function Xl(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var Yl=e=>{var t,r,n,a,o,l,s,i,c,u,f;let{invert:h,toast:d,unstyled:y,interacting:w,setHeights:C,visibleToasts:A,heights:S,index:j,toasts:T,expanded:I,removeToast:P,defaultRichColors:p,closeButton:_,style:x,cancelButtonStyle:R,actionButtonStyle:N,className:O="",descriptionClassName:b="",duration:H,position:K,gap:D,loadingIcon:k,expandByDefault:E,classNames:B,icons:le,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:v}=e,[z,V]=Y.useState(null),[$,Q]=Y.useState(null),[W,X]=Y.useState(!1),[ae,ne]=Y.useState(!1),[se,M]=Y.useState(!1),[J,U]=Y.useState(!1),[q,L]=Y.useState(!1),[oe,de]=Y.useState(0),[re,ee]=Y.useState(0),G=Y.useRef(d.duration||H||ao),ge=Y.useRef(null),pe=Y.useRef(null),be=j===0,xe=j+1<=A,fe=d.type,me=d.dismissible!==!1,Ne=d.className||"",Ce=d.descriptionClassName||"",Te=Y.useMemo(()=>S.findIndex(ce=>ce.toastId===d.id)||0,[S,d.id]),Pe=Y.useMemo(()=>{var ce;return(ce=d.closeButton)!=null?ce:_},[d.closeButton,_]),Ye=Y.useMemo(()=>d.duration||H||ao,[d.duration,H]),Ke=Y.useRef(0),Re=Y.useRef(0),it=Y.useRef(0),ze=Y.useRef(null),[yi,bi]=K.split("-"),Kn=Y.useMemo(()=>S.reduce((ce,he,ve)=>ve>=Te?ce:ce+he.height,0),[S,Te]),Qn=Ll(),wi=d.invert||h,mr=fe==="loading";Re.current=Y.useMemo(()=>Te*D+Kn,[Te,Kn]),Y.useEffect(()=>{G.current=Ye},[Ye]),Y.useEffect(()=>{X(!0)},[]),Y.useEffect(()=>{let ce=pe.current;if(ce){let he=ce.getBoundingClientRect().height;return ee(he),C(ve=>[{toastId:d.id,height:he,position:d.position},...ve]),()=>C(ve=>ve.filter(De=>De.toastId!==d.id))}},[C,d.id]),Y.useLayoutEffect(()=>{if(!W)return;let ce=pe.current,he=ce.style.height;ce.style.height="auto";let ve=ce.getBoundingClientRect().height;ce.style.height=he,ee(ve),C(De=>De.find(Oe=>Oe.toastId===d.id)?De.map(Oe=>Oe.toastId===d.id?{...Oe,height:ve}:Oe):[{toastId:d.id,height:ve,position:d.position},...De])},[W,d.title,d.description,C,d.id]);let Qe=Y.useCallback(()=>{ne(!0),de(Re.current),C(ce=>ce.filter(he=>he.toastId!==d.id)),setTimeout(()=>{P(d)},Wl)},[d,P,C,Re]);Y.useEffect(()=>{if(d.promise&&fe==="loading"||d.duration===1/0||d.type==="loading")return;let ce;return I||w||v&&Qn?(()=>{if(it.current<Ke.current){let he=new Date().getTime()-Ke.current;G.current=G.current-he}it.current=new Date().getTime()})():G.current!==1/0&&(Ke.current=new Date().getTime(),ce=setTimeout(()=>{var he;(he=d.onAutoClose)==null||he.call(d,d),Qe()},G.current)),()=>clearTimeout(ce)},[I,w,d,fe,v,Qn,Qe]),Y.useEffect(()=>{d.delete&&Qe()},[Qe,d.delete]);function xi(){var ce,he,ve;return le!=null&&le.loading?Y.createElement("div",{className:Me(B==null?void 0:B.loader,(ce=d==null?void 0:d.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":fe==="loading"},le.loading):k?Y.createElement("div",{className:Me(B==null?void 0:B.loader,(he=d==null?void 0:d.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":fe==="loading"},k):Y.createElement(Tl,{className:Me(B==null?void 0:B.loader,(ve=d==null?void 0:d.classNames)==null?void 0:ve.loader),visible:fe==="loading"})}return Y.createElement("li",{tabIndex:0,ref:pe,className:Me(O,Ne,B==null?void 0:B.toast,(t=d==null?void 0:d.classNames)==null?void 0:t.toast,B==null?void 0:B.default,B==null?void 0:B[fe],(r=d==null?void 0:d.classNames)==null?void 0:r[fe]),"data-sonner-toast":"","data-rich-colors":(n=d.richColors)!=null?n:p,"data-styled":!(d.jsx||d.unstyled||y),"data-mounted":W,"data-promise":!!d.promise,"data-swiped":q,"data-removed":ae,"data-visible":xe,"data-y-position":yi,"data-x-position":bi,"data-index":j,"data-front":be,"data-swiping":se,"data-dismissible":me,"data-type":fe,"data-invert":wi,"data-swipe-out":J,"data-swipe-direction":$,"data-expanded":!!(I||E&&W),style:{"--index":j,"--toasts-before":j,"--z-index":T.length-j,"--offset":`${ae?oe:Re.current}px`,"--initial-height":E?"auto":`${re}px`,...x,...d.style},onDragEnd:()=>{M(!1),V(null),ze.current=null},onPointerDown:ce=>{mr||!me||(ge.current=new Date,de(Re.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(M(!0),ze.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,he,ve,De;if(J||!me)return;ze.current=null;let Oe=Number(((ce=pe.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Je=Number(((he=pe.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),lt=new Date().getTime()-((ve=ge.current)==null?void 0:ve.getTime()),Ge=z==="x"?Oe:Je,Ze=Math.abs(Ge)/lt;if(Math.abs(Ge)>=Ul||Ze>.11){de(Re.current),(De=d.onDismiss)==null||De.call(d,d),Q(z==="x"?Oe>0?"right":"left":Je>0?"down":"up"),Qe(),U(!0),L(!1);return}M(!1),V(null)},onPointerMove:ce=>{var he,ve,De,Oe;if(!ze.current||!me||((he=window.getSelection())==null?void 0:he.toString().length)>0)return;let Je=ce.clientY-ze.current.y,lt=ce.clientX-ze.current.x,Ge=(ve=e.swipeDirections)!=null?ve:Xl(K);!z&&(Math.abs(lt)>1||Math.abs(Je)>1)&&V(Math.abs(lt)>Math.abs(Je)?"x":"y");let Ze={x:0,y:0};z==="y"?(Ge.includes("top")||Ge.includes("bottom"))&&(Ge.includes("top")&&Je<0||Ge.includes("bottom")&&Je>0)&&(Ze.y=Je):z==="x"&&(Ge.includes("left")||Ge.includes("right"))&&(Ge.includes("left")&&lt<0||Ge.includes("right")&&lt>0)&&(Ze.x=lt),(Math.abs(Ze.x)>0||Math.abs(Ze.y)>0)&&L(!0),(De=pe.current)==null||De.style.setProperty("--swipe-amount-x",`${Ze.x}px`),(Oe=pe.current)==null||Oe.style.setProperty("--swipe-amount-y",`${Ze.y}px`)}},Pe&&!d.jsx?Y.createElement("button",{"aria-label":F,"data-disabled":mr,"data-close-button":!0,onClick:mr||!me?()=>{}:()=>{var ce;Qe(),(ce=d.onDismiss)==null||ce.call(d,d)},className:Me(B==null?void 0:B.closeButton,(a=d==null?void 0:d.classNames)==null?void 0:a.closeButton)},(o=le==null?void 0:le.close)!=null?o:Il):null,d.jsx||m.isValidElement(d.title)?d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title:Y.createElement(Y.Fragment,null,fe||d.icon||d.promise?Y.createElement("div",{"data-icon":"",className:Me(B==null?void 0:B.icon,(l=d==null?void 0:d.classNames)==null?void 0:l.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||xi():null,d.type!=="loading"?d.icon||(le==null?void 0:le[fe])||kl(fe):null):null,Y.createElement("div",{"data-content":"",className:Me(B==null?void 0:B.content,(s=d==null?void 0:d.classNames)==null?void 0:s.content)},Y.createElement("div",{"data-title":"",className:Me(B==null?void 0:B.title,(i=d==null?void 0:d.classNames)==null?void 0:i.title)},typeof d.title=="function"?d.title():d.title),d.description?Y.createElement("div",{"data-description":"",className:Me(b,Ce,B==null?void 0:B.description,(c=d==null?void 0:d.classNames)==null?void 0:c.description)},typeof d.description=="function"?d.description():d.description):null),m.isValidElement(d.cancel)?d.cancel:d.cancel&&zt(d.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||R,onClick:ce=>{var he,ve;zt(d.cancel)&&me&&((ve=(he=d.cancel).onClick)==null||ve.call(he,ce),Qe())},className:Me(B==null?void 0:B.cancelButton,(u=d==null?void 0:d.classNames)==null?void 0:u.cancelButton)},d.cancel.label):null,m.isValidElement(d.action)?d.action:d.action&&zt(d.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||N,onClick:ce=>{var he,ve;zt(d.action)&&((ve=(he=d.action).onClick)==null||ve.call(he,ce),!ce.defaultPrevented&&Qe())},className:Me(B==null?void 0:B.actionButton,(f=d==null?void 0:d.classNames)==null?void 0:f.actionButton)},d.action.label):null))};function so(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Kl(e,t){let r={};return[e,t].forEach((n,a)=>{let o=a===1,l=o?"--mobile-offset":"--offset",s=o?Bl:Hl;function i(c){["top","right","bottom","left"].forEach(u=>{r[`${l}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?i(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?r[`${l}-${c}`]=s:r[`${l}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):i(s)}),r}var Fp=m.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:l,className:s,offset:i,mobileOffset:c,theme:u="light",richColors:f,duration:h,style:d,visibleToasts:y=$l,toastOptions:w,dir:C=so(),gap:A=ql,loadingIcon:S,icons:j,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:I}=e,[P,p]=Y.useState([]),_=Y.useMemo(()=>Array.from(new Set([n].concat(P.filter(v=>v.position).map(v=>v.position)))),[P,n]),[x,R]=Y.useState([]),[N,O]=Y.useState(!1),[b,H]=Y.useState(!1),[K,D]=Y.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),k=Y.useRef(null),E=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=Y.useRef(null),le=Y.useRef(!1),F=Y.useCallback(v=>{p(z=>{var V;return(V=z.find($=>$.id===v.id))!=null&&V.delete||je.dismiss(v.id),z.filter(({id:$})=>$!==v.id)})},[]);return Y.useEffect(()=>je.subscribe(v=>{if(v.dismiss){p(z=>z.map(V=>V.id===v.id?{...V,delete:!0}:V));return}setTimeout(()=>{Ei.flushSync(()=>{p(z=>{let V=z.findIndex($=>$.id===v.id);return V!==-1?[...z.slice(0,V),{...z[V],...v},...z.slice(V+1)]:[v,...z]})})})}),[]),Y.useEffect(()=>{if(u!=="system"){D(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;let v=window.matchMedia("(prefers-color-scheme: dark)");try{v.addEventListener("change",({matches:z})=>{D(z?"dark":"light")})}catch{v.addListener(({matches:V})=>{try{D(V?"dark":"light")}catch($){console.error($)}})}},[u]),Y.useEffect(()=>{P.length<=1&&O(!1)},[P]),Y.useEffect(()=>{let v=z=>{var V,$;a.every(Q=>z[Q]||z.code===Q)&&(O(!0),(V=k.current)==null||V.focus()),z.code==="Escape"&&(document.activeElement===k.current||($=k.current)!=null&&$.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[a]),Y.useEffect(()=>{if(k.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,le.current=!1)}},[k.current]),Y.createElement("section",{ref:t,"aria-label":`${T} ${E}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((v,z)=>{var V;let[$,Q]=v.split("-");return P.length?Y.createElement("ol",{key:v,dir:C==="auto"?so():C,tabIndex:-1,ref:k,className:s,"data-sonner-toaster":!0,"data-theme":K,"data-y-position":$,"data-lifted":N&&P.length>1&&!o,"data-x-position":Q,style:{"--front-toast-height":`${((V=x[0])==null?void 0:V.height)||0}px`,"--width":`${Vl}px`,"--gap":`${A}px`,...d,...Kl(i,c)},onBlur:W=>{le.current&&!W.currentTarget.contains(W.relatedTarget)&&(le.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||le.current||(le.current=!0,B.current=W.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{b||O(!1)},onDragEnd:()=>O(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},P.filter(W=>!W.position&&z===0||W.position===v).map((W,X)=>{var ae,ne;return Y.createElement(Yl,{key:W.id,icons:j,index:X,toast:W,defaultRichColors:f,duration:(ae=w==null?void 0:w.duration)!=null?ae:h,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:y,closeButton:(ne=w==null?void 0:w.closeButton)!=null?ne:l,interacting:b,position:v,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:F,toasts:P.filter(se=>se.position==W.position),heights:x.filter(se=>se.position==W.position),setHeights:R,expandByDefault:o,gap:A,loadingIcon:S,expanded:N,pauseWhenPageIsHidden:I,swipeDirections:e.swipeDirections})})):null}))});const Ql={theme:"system",setTheme:()=>null},Oa=m.createContext(Ql);function $p({children:e,...t}){const r=Z.use.theme(),n=Z.use.setTheme();m.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),r==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)"),s=i=>{o.classList.remove("light","dark"),o.classList.add(i.matches?"dark":"light")};return o.classList.add(l.matches?"dark":"light"),l.addEventListener("change",s),()=>l.removeEventListener("change",s)}else o.classList.add(r)},[r]);const a={theme:r,setTheme:n};return g.jsx(Oa.Provider,{...t,value:a,children:e})}const Jl=(e,t,r,n)=>{var o,l,s,i;const a=[r,{code:t,...n||{}}];if((l=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&l.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);ht(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(i=(s=e==null?void 0:e.services)==null?void 0:s.logger)!=null&&i.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},io={},nn=(e,t,r,n)=>{ht(r)&&io[r]||(ht(r)&&(io[r]=new Date),Jl(e,t,r,n))},Ga=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},on=(e,t,r)=>{e.loadNamespaces(t,Ga(e,r))},lo=(e,t,r,n)=>{if(ht(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return on(e,r,n);r.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,Ga(e,n))},Zl=(e,t,r={})=>!t.languages||!t.languages.length?(nn(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,a)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,e))return!1}}),ht=e=>typeof e=="string",ec=e=>typeof e=="object"&&e!==null,tc=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,rc={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},nc=e=>rc[e],oc=e=>e.replace(tc,nc);let an={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:oc};const ac=(e={})=>{an={...an,...e}},sc=()=>an;let Ma;const ic=e=>{Ma=e},lc=()=>Ma,Hp={type:"3rdParty",init(e){ac(e.options.react),ic(e)}},cc=m.createContext();class uc{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const dc=(e,t)=>{const r=m.useRef();return m.useEffect(()=>{r.current=e},[e,t]),r.current},Fa=(e,t,r,n)=>e.getFixedT(t,r,n),fc=(e,t,r,n)=>m.useCallback(Fa(e,t,r,n),[e,t,r,n]),Se=(e,t={})=>{var T,I,P,p;const{i18n:r}=t,{i18n:n,defaultNS:a}=m.useContext(cc)||{},o=r||n||lc();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new uc),!o){nn(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const _=(R,N)=>ht(N)?N:ec(N)&&ht(N.defaultValue)?N.defaultValue:Array.isArray(R)?R[R.length-1]:R,x=[_,{},!1];return x.t=_,x.i18n={},x.ready=!1,x}(T=o.options.react)!=null&&T.wait&&nn(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...sc(),...o.options.react,...t},{useSuspense:s,keyPrefix:i}=l;let c=a||((I=o.options)==null?void 0:I.defaultNS);c=ht(c)?[c]:c||["translation"],(p=(P=o.reportNamespaces).addUsedNamespaces)==null||p.call(P,c);const u=(o.isInitialized||o.initializedStoreOnce)&&c.every(_=>Zl(_,o,l)),f=fc(o,t.lng||null,l.nsMode==="fallback"?c:c[0],i),h=()=>f,d=()=>Fa(o,t.lng||null,l.nsMode==="fallback"?c:c[0],i),[y,w]=m.useState(h);let C=c.join();t.lng&&(C=`${t.lng}${C}`);const A=dc(C),S=m.useRef(!0);m.useEffect(()=>{const{bindI18n:_,bindI18nStore:x}=l;S.current=!0,!u&&!s&&(t.lng?lo(o,t.lng,c,()=>{S.current&&w(d)}):on(o,c,()=>{S.current&&w(d)})),u&&A&&A!==C&&S.current&&w(d);const R=()=>{S.current&&w(d)};return _&&(o==null||o.on(_,R)),x&&(o==null||o.store.on(x,R)),()=>{S.current=!1,o&&_&&(_==null||_.split(" ").forEach(N=>o.off(N,R))),x&&o&&x.split(" ").forEach(N=>o.store.off(N,R))}},[o,C]),m.useEffect(()=>{S.current&&u&&w(h)},[o,i,u]);const j=[y,o,u];if(j.t=y,j.i18n=o,j.ready=u,u||!u&&!s)return j;throw new Promise(_=>{t.lng?lo(o,t.lng,c,()=>_()):on(o,c,()=>_())})},co=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,uo=Na,An=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return uo(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(c=>{const u=r==null?void 0:r[c],f=o==null?void 0:o[c];if(u===null)return null;const h=co(u)||co(f);return a[c][h]}),s=r&&Object.entries(r).reduce((c,u)=>{let[f,h]=u;return h===void 0||(c[f]=h),c},{}),i=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:f,className:h,...d}=u;return Object.entries(d).every(y=>{let[w,C]=y;return Array.isArray(C)?C.includes({...o,...s}[w]):{...o,...s}[w]===C})?[...c,f,h]:c},[]);return uo(e,l,i,r==null?void 0:r.class,r==null?void 0:r.className)};var[ar]=kn("Tooltip",[Ea]),sr=Ea(),$a="TooltipProvider",hc=700,sn="tooltip.open",[gc,Nn]=ar($a),Ha=e=>{const{__scopeTooltip:t,delayDuration:r=hc,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=e,l=m.useRef(!0),s=m.useRef(!1),i=m.useRef(0);return m.useEffect(()=>{const c=i.current;return()=>window.clearTimeout(c)},[]),g.jsx(gc,{scope:t,isOpenDelayedRef:l,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(i.current),l.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:m.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:o})};Ha.displayName=$a;var jt="Tooltip",[pc,ir]=ar(jt),Ba=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:o,disableHoverableContent:l,delayDuration:s}=e,i=Nn(jt,e.__scopeTooltip),c=sr(t),[u,f]=m.useState(null),h=ft(),d=m.useRef(0),y=l??i.disableHoverableContent,w=s??i.delayDuration,C=m.useRef(!1),[A,S]=ka({prop:n,defaultProp:a??!1,onChange:p=>{p?(i.onOpen(),document.dispatchEvent(new CustomEvent(sn))):i.onClose(),o==null||o(p)},caller:jt}),j=m.useMemo(()=>A?C.current?"delayed-open":"instant-open":"closed",[A]),T=m.useCallback(()=>{window.clearTimeout(d.current),d.current=0,C.current=!1,S(!0)},[S]),I=m.useCallback(()=>{window.clearTimeout(d.current),d.current=0,S(!1)},[S]),P=m.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{C.current=!0,S(!0),d.current=0},w)},[w,S]);return m.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=0)},[]),g.jsx(Gi,{...c,children:g.jsx(pc,{scope:t,contentId:h,open:A,stateAttribute:j,trigger:u,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{i.isOpenDelayedRef.current?P():T()},[i.isOpenDelayedRef,P,T]),onTriggerLeave:m.useCallback(()=>{y?I():(window.clearTimeout(d.current),d.current=0)},[I,y]),onOpen:T,onClose:I,disableHoverableContent:y,children:r})})};Ba.displayName=jt;var ln="TooltipTrigger",Va=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=ir(ln,r),o=Nn(ln,r),l=sr(r),s=m.useRef(null),i=Ve(t,s,a.onTriggerChange),c=m.useRef(!1),u=m.useRef(!1),f=m.useCallback(()=>c.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),g.jsx(Mi,{asChild:!0,...l,children:g.jsx(_e.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:i,onPointerMove:ke(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ke(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ke(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ke(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:ke(e.onBlur,a.onClose),onClick:ke(e.onClick,a.onClose)})})});Va.displayName=ln;var mc="TooltipPortal",[Bp,vc]=ar(mc,{forceMount:void 0}),wt="TooltipContent",qa=m.forwardRef((e,t)=>{const r=vc(wt,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=e,l=ir(wt,e.__scopeTooltip);return g.jsx(_t,{present:n||l.open,children:l.disableHoverableContent?g.jsx(Ua,{side:a,...o,ref:t}):g.jsx(yc,{side:a,...o,ref:t})})}),yc=m.forwardRef((e,t)=>{const r=ir(wt,e.__scopeTooltip),n=Nn(wt,e.__scopeTooltip),a=m.useRef(null),o=Ve(t,a),[l,s]=m.useState(null),{trigger:i,onClose:c}=r,u=a.current,{onPointerInTransitChange:f}=n,h=m.useCallback(()=>{s(null),f(!1)},[f]),d=m.useCallback((y,w)=>{const C=y.currentTarget,A={x:y.clientX,y:y.clientY},S=Sc(A,C.getBoundingClientRect()),j=Ec(A,S),T=kc(w.getBoundingClientRect()),I=Tc([...j,...T]);s(I),f(!0)},[f]);return m.useEffect(()=>()=>h(),[h]),m.useEffect(()=>{if(i&&u){const y=C=>d(C,u),w=C=>d(C,i);return i.addEventListener("pointerleave",y),u.addEventListener("pointerleave",w),()=>{i.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",w)}}},[i,u,d,h]),m.useEffect(()=>{if(l){const y=w=>{const C=w.target,A={x:w.clientX,y:w.clientY},S=(i==null?void 0:i.contains(C))||(u==null?void 0:u.contains(C)),j=!Cc(A,l);S?h():j&&(h(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[i,u,l,c,h]),g.jsx(Ua,{...e,ref:o})}),[bc,wc]=ar(jt,{isInside:!1}),xc=Di("TooltipContent"),Ua=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:l,...s}=e,i=ir(wt,r),c=sr(r),{onClose:u}=i;return m.useEffect(()=>(document.addEventListener(sn,u),()=>document.removeEventListener(sn,u)),[u]),m.useEffect(()=>{if(i.trigger){const f=h=>{const d=h.target;d!=null&&d.contains(i.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[i.trigger,u]),g.jsx(Pi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:g.jsxs(zi,{"data-state":i.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(xc,{children:n}),g.jsx(bc,{scope:r,isInside:!0,children:g.jsx(Oi,{id:i.contentId,role:"tooltip",children:a||n})})]})})});qa.displayName=wt;var Wa="TooltipArrow",_c=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=sr(r);return wc(Wa,r).isInside?null:g.jsx(Fi,{...a,...n,ref:t})});_c.displayName=Wa;function Sc(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Ec(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function kc(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function Cc(e,t){const{x:r,y:n}=e;let a=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const s=t[o],i=t[l],c=s.x,u=s.y,f=i.x,h=i.y;u>n!=h>n&&r<(f-c)*(n-u)/(h-u)+c&&(a=!a)}return a}function Tc(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Rc(t)}function Rc(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const o=t[t.length-1],l=t[t.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var jc=Ha,Ac=Ba,Nc=Va,Xa=qa;const Ya=jc,Ka=Ac,Qa=Nc,Ic=e=>typeof e!="string"?e:g.jsx("div",{className:"relative top-0 pt-1 whitespace-pre-wrap break-words",children:e}),In=m.forwardRef(({className:e,side:t="left",align:r="start",children:n,...a},o)=>{const l=m.useRef(null);return m.useEffect(()=>{l.current&&(l.current.scrollTop=0)},[n]),g.jsx(Xa,{ref:o,side:t,align:r,className:ue("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 max-h-[60vh] overflow-y-auto whitespace-pre-wrap break-words rounded-md border px-3 py-2 text-sm shadow-md z-60",e),...a,children:typeof n=="string"?Ic(n):n})});In.displayName=Xa.displayName;const fo=An("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-8"}},defaultVariants:{variant:"default",size:"default"}}),we=m.forwardRef(({className:e,variant:t,tooltip:r,size:n,side:a="right",asChild:o=!1,...l},s)=>{const i=o?$i:"button";return r?g.jsx(Ya,{children:g.jsxs(Ka,{children:[g.jsx(Qa,{asChild:!0,children:g.jsx(i,{className:ue(fo({variant:t,size:n,className:e}),"cursor-pointer"),ref:s,...l})}),g.jsx(In,{side:a,children:r})]})}):g.jsx(i,{className:ue(fo({variant:t,size:n,className:e}),"cursor-pointer"),ref:s,...l})});we.displayName="Button";const At=m.forwardRef(({className:e,type:t,...r},n)=>g.jsx("input",{type:t,className:ue("border-input file:text-foreground placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-1 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm [&::-webkit-inner-spin-button]:opacity-50 [&::-webkit-outer-spin-button]:opacity-50",e),ref:n,...r}));At.displayName="Input";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ja=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...s},i)=>m.createElement("svg",{ref:i,...Pc,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Ja("lucide",a),...s},[...l.map(([c,u])=>m.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const r=m.forwardRef(({className:n,...a},o)=>m.createElement(zc,{ref:o,iconNode:t,className:Ja(`lucide-${Lc(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Vp=ie("Activity",Dc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],qp=ie("AlignCenter",Oc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Up=ie("AlignLeft",Gc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Wp=ie("AlignRight",Mc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Xp=ie("ArrowDown",Fc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yp=ie("ArrowRight",$c);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Kp=ie("ArrowUp",Hc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vc=ie("BookOpen",Bc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Za=ie("Check",qc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qp=ie("ChevronDown",Uc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Jp=ie("ChevronLeft",Wc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zp=ie("ChevronRight",Xc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],em=ie("ChevronUp",Yc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],tm=ie("ChevronsLeft",Kc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],rm=ie("ChevronsRight",Qc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Zc=ie("ChevronsUpDown",Jc);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ho=ie("CircleCheckBig",eu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],go=ie("CircleX",tu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],nm=ie("Clock",ru);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],om=ie("Copy",nu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],am=ie("Database",ou);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],sm=ie("Eraser",au);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],im=ie("FileText",su);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]],lm=ie("Files",iu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{width:"10",height:"8",x:"7",y:"8",rx:"1",key:"vys8me"}]],cu=ie("Fullscreen",lu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=[["path",{d:"M6 3v12",key:"qpgusn"}],["path",{d:"M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"1d02ji"}],["path",{d:"M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"chk6ph"}],["path",{d:"M15 6a9 9 0 0 0-9 9",key:"or332x"}],["path",{d:"M18 15v6",key:"9wciyi"}],["path",{d:"M21 18h-6",key:"139f0c"}]],du=ie("GitBranchPlus",uu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],cm=ie("Github",fu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"19",cy:"5",r:"1",key:"w8mnmm"}],["circle",{cx:"5",cy:"5",r:"1",key:"lttvr7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}],["circle",{cx:"19",cy:"19",r:"1",key:"shf9b7"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],gu=ie("Grip",hu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],um=ie("Info",pu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ln=ie("LoaderCircle",mu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],dm=ie("Loader",vu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],fm=ie("LogOut",yu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],wu=ie("Maximize",bu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],hm=ie("MessageSquare",xu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],Su=ie("Minimize",_u);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],gm=ie("Palette",Eu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Cu=ie("Pause",ku);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ru=ie("Pencil",Tu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Au=ie("Play",ju);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pm=ie("Plus",Nu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lu=ie("RefreshCw",Iu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],zu=ie("RotateCcw",Pu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Ou=ie("RotateCw",Du);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Mu=ie("Scissors",Gu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],es=ie("Search",Fu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],mm=ie("Send",$u);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bu=ie("Settings",Hu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vm=ie("SquareCheckBig",Vu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ym=ie("Tag",qu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],bm=ie("Trash",Uu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wm=ie("TriangleAlert",Wu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],ts=ie("Undo2",Xu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],xm=ie("Upload",Yu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],_m=ie("Users",Ku);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ju=ie("X",Qu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Sm=ie("Zap",Zu);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],td=ie("ZoomIn",ed);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nd=ie("ZoomOut",rd),od=ja,Em=Bi,ad=Ca,rs=m.forwardRef(({className:e,...t},r)=>g.jsx(Cn,{ref:r,className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/30",e),...t}));rs.displayName=Cn.displayName;const ns=m.forwardRef(({className:e,children:t,...r},n)=>g.jsxs(ad,{children:[g.jsx(rs,{}),g.jsxs(Tn,{ref:n,className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] fixed top-[50%] left-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e),...r,children:[t,g.jsxs(Hi,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none",children:[g.jsx(Ju,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ns.displayName=Tn.displayName;const os=({className:e,...t})=>g.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});os.displayName="DialogHeader";const as=({className:e,...t})=>g.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});as.displayName="DialogFooter";const ss=m.forwardRef(({className:e,...t},r)=>g.jsx(Ta,{ref:r,className:ue("text-lg leading-none font-semibold tracking-tight",e),...t}));ss.displayName=Ta.displayName;const is=m.forwardRef(({className:e,...t},r)=>g.jsx(Ra,{ref:r,className:ue("text-muted-foreground text-sm",e),...t}));is.displayName=Ra.displayName;const Pn=qi,zn=Ui,lr=m.forwardRef(({className:e,align:t="center",sideOffset:r=4,collisionPadding:n,sticky:a,avoidCollisions:o=!1,...l},s)=>g.jsx(Vi,{children:g.jsx(Aa,{ref:s,align:t,sideOffset:r,collisionPadding:n,sticky:a,avoidCollisions:o,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 rounded-md border p-4 shadow-md outline-none",e),...l})}));lr.displayName=Aa.displayName;var sd=`
precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_border)
    gl_FragColor = v_color;
  else
    gl_FragColor = transparent;

  #else
  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
  #endif
}
`,id=sd,ld=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;

uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;

  v_border = (0.5 / a_size) * u_sizeRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,cd=ld,ls=WebGLRenderingContext,po=ls.UNSIGNED_BYTE,mo=ls.FLOAT,ud=["u_sizeRatio","u_pixelRatio","u_matrix"],dd=(function(e){function t(){return va(this,t),ya(this,t,arguments)}return ga(t,e),pa(t,[{key:"getDefinition",value:function(){return{VERTICES:1,VERTEX_SHADER_SOURCE:cd,FRAGMENT_SHADER_SOURCE:id,METHOD:WebGLRenderingContext.POINTS,UNIFORMS:ud,ATTRIBUTES:[{name:"a_position",size:2,type:mo},{name:"a_size",size:1,type:mo},{name:"a_color",size:4,type:po,normalized:!0},{name:"a_id",size:4,type:po,normalized:!0}]}}},{key:"processVisibleItem",value:function(n,a,o){var l=this.array;l[a++]=o.x,l[a++]=o.y,l[a++]=o.size,l[a++]=rr(o.color),l[a++]=n}},{key:"setUniforms",value:function(n,a){var o=n.sizeRatio,l=n.pixelRatio,s=n.matrix,i=a.gl,c=a.uniformLocations,u=c.u_sizeRatio,f=c.u_pixelRatio,h=c.u_matrix;i.uniform1f(f,l),i.uniform1f(u,o),i.uniformMatrix3fv(h,!1,s)}}])})(ma),fd=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_sourceRadius;
attribute float a_targetRadius;
attribute float a_sourceRadiusCoef;
attribute float a_targetRadiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow heads:
  // Source arrow head
  float sourceRadius = a_sourceRadius * a_sourceRadiusCoef;
  float sourceDirection = sign(sourceRadius);
  float webGLSourceRadius = sourceDirection * sourceRadius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLSourceArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  vec2 sourceCompensationVector =
    vec2(-sourceDirection * unitNormal.y, sourceDirection * unitNormal.x)
    * (webGLSourceRadius + webGLSourceArrowHeadLength);
    
  // Target arrow head
  float targetRadius = a_targetRadius * a_targetRadiusCoef;
  float targetDirection = sign(targetRadius);
  float webGLTargetRadius = targetDirection * targetRadius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLTargetArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  vec2 targetCompensationVector =
  vec2(-targetDirection * unitNormal.y, targetDirection * unitNormal.x)
    * (webGLTargetRadius + webGLTargetArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + sourceCompensationVector + targetCompensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,hd=fd,cs=WebGLRenderingContext,vo=cs.UNSIGNED_BYTE,Ue=cs.FLOAT,gd=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],pd={lengthToThicknessRatio:En.lengthToThicknessRatio};function us(e){var t=Xt(Xt({},pd),{});return(function(r){function n(){return va(this,n),ya(this,n,arguments)}return ga(n,r),pa(n,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:hd,FRAGMENT_SHADER_SOURCE:Ci,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:gd,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Ue},{name:"a_positionEnd",size:2,type:Ue},{name:"a_normal",size:2,type:Ue},{name:"a_color",size:4,type:vo,normalized:!0},{name:"a_id",size:4,type:vo,normalized:!0},{name:"a_sourceRadius",size:1,type:Ue},{name:"a_targetRadius",size:1,type:Ue}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Ue},{name:"a_normalCoef",size:1,type:Ue},{name:"a_sourceRadiusCoef",size:1,type:Ue},{name:"a_targetRadiusCoef",size:1,type:Ue}],CONSTANT_DATA:[[0,1,-1,0],[0,-1,1,0],[1,1,0,1],[1,1,0,1],[0,-1,1,0],[1,-1,0,-1]]}}},{key:"processVisibleItem",value:function(o,l,s,i,c){var u=c.size||1,f=s.x,h=s.y,d=i.x,y=i.y,w=rr(c.color),C=d-f,A=y-h,S=s.size||1,j=i.size||1,T=C*C+A*A,I=0,P=0;T&&(T=1/Math.sqrt(T),I=-A*T*u,P=C*T*u);var p=this.array;p[l++]=f,p[l++]=h,p[l++]=d,p[l++]=y,p[l++]=I,p[l++]=P,p[l++]=w,p[l++]=o,p[l++]=S,p[l++]=j}},{key:"setUniforms",value:function(o,l){var s=l.gl,i=l.uniformLocations,c=i.u_matrix,u=i.u_zoomRatio,f=i.u_feather,h=i.u_pixelRatio,d=i.u_correctionRatio,y=i.u_sizeRatio,w=i.u_minEdgeThickness,C=i.u_lengthToThicknessRatio;s.uniformMatrix3fv(c,!1,o.matrix),s.uniform1f(u,o.zoomRatio),s.uniform1f(y,o.sizeRatio),s.uniform1f(d,o.correctionRatio),s.uniform1f(h,o.pixelRatio),s.uniform1f(f,o.antiAliasingFeather),s.uniform1f(w,o.minEdgeThickness),s.uniform1f(C,t.lengthToThicknessRatio)}}])})(ba)}us();function md(e){return Ti([us(),Jn(e),Jn(Xt(Xt({},e),{},{extremity:"source"}))])}md();function vd(e){if(Array.isArray(e))return e}function yd(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,l,s=[],i=!0,c=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(i=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);i=!0);}catch(u){c=!0,a=u}finally{try{if(!i&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw a}}return s}}function cn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ds(e,t){if(e){if(typeof e=="string")return cn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cn(e,t):void 0}}function bd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wd(e,t){return vd(e)||yd(e,t)||ds(e,t)||bd()}function xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _d(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fs(e){var t=_d(e,"string");return typeof t=="symbol"?t:t+""}function Sd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fs(n.key),n)}}function Ed(e,t,r){return t&&Sd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kt(e){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kt(e)}function hs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hs=function(){return!!e})()}function un(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kd(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return un(e)}function Cd(e,t,r){return t=Kt(t),kd(e,hs()?Reflect.construct(t,r||[],Kt(e).constructor):t.apply(e,r))}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},dn(e,t)}function Td(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}function mt(e,t,r){return(t=fs(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rd(e){if(Array.isArray(e))return cn(e)}function jd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ad(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vr(e){return Rd(e)||jd(e)||ds(e)||Ad()}function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yo(Object(r),!0).forEach(function(n){mt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Nd="relative",Id={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},Ld="#000000";function Pd(e){var t=e.borders,r=Zn(t.filter(function(a){var o=a.size;return"fill"in o}).length),n=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(t.flatMap(function(a,o){var l=a.size;return"attribute"in l?["varying float v_borderSize_".concat(o+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(a,o){var l=a.color;return"attribute"in l?["varying vec4 v_borderColor_".concat(o+1,";")]:"value"in l?["uniform vec4 u_borderColor_".concat(o+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(t.flatMap(function(a,o){var l=a.size;if("fill"in l)return[];l=l;var s="attribute"in l?"v_borderSize_".concat(o+1):Zn(l.value),i=(l.mode||Nd)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(o+1," = ").concat(i," * ").concat(s,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(t.flatMap(function(a,o){var l=a.size;return"fill"in l?[]:["borderSize_".concat(o+1)]}).join(" + "),") ) / ").concat(r,`;
`).concat(t.flatMap(function(a,o){var l=a.size;return"fill"in l?["  float borderSize_".concat(o+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(t.map(function(a,o){return"  float adjustedBorderSize_".concat(o+1," = adjustedBorderSize_").concat(o," - borderSize_").concat(o+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(t.map(function(a,o){var l=a.color,s=[];return"attribute"in l?s.push("  vec4 borderColor_".concat(o+1," = v_borderColor_").concat(o+1,";")):"transparent"in l?s.push("  vec4 borderColor_".concat(o+1," = vec4(0.0, 0.0, 0.0, 0.0);")):s.push("  vec4 borderColor_".concat(o+1," = u_borderColor_").concat(o+1,";")),s.push("  borderColor_".concat(o+1,".a *= bias;")),s.push("  if (borderSize_".concat(o+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(o+1," = borderColor_").concat(o,"; }")),s.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(t.map(function(a,o){return"if (dist > adjustedBorderSize_".concat(o,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(o+1,", borderColor_").concat(o,", (dist - adjustedBorderSize_").concat(o,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(o+1,`) {
    gl_FragColor = borderColor_`).concat(o+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return n}function zd(e){var t=e.borders,r=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(t.flatMap(function(n,a){var o=n.size;return"attribute"in o?["attribute float a_borderSize_".concat(a+1,";"),"varying float v_borderSize_".concat(a+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(n,a){var o=n.color;return"attribute"in o?["attribute vec4 a_borderColor_".concat(a+1,";"),"varying vec4 v_borderColor_".concat(a+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(t.flatMap(function(n,a){var o=n.size;return"attribute"in o?["  v_borderSize_".concat(a+1," = a_borderSize_").concat(a+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(n,a){var o=n.color;return"attribute"in o?["  v_borderColor_".concat(a+1," = a_borderColor_").concat(a+1,";")]:[]}).join(`
`),`
  #endif
}
`);return r}var gs=WebGLRenderingContext,wo=gs.UNSIGNED_BYTE,Dt=gs.FLOAT;function Dd(e){var t,r=bo(bo({},Id),{}),n=r.borders,a=r.drawLabel,o=r.drawHover,l=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(vr(n.flatMap(function(s,i){var c=s.color;return"value"in c?["u_borderColor_".concat(i+1)]:[]})));return t=(function(s){Td(i,s);function i(){var c;xd(this,i);for(var u=arguments.length,f=new Array(u),h=0;h<u;h++)f[h]=arguments[h];return c=Cd(this,i,[].concat(f)),mt(un(c),"drawLabel",a),mt(un(c),"drawHover",o),c}return Ed(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:zd(r),FRAGMENT_SHADER_SOURCE:Pd(r),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:l,ATTRIBUTES:[{name:"a_position",size:2,type:Dt},{name:"a_id",size:4,type:wo,normalized:!0},{name:"a_size",size:1,type:Dt}].concat(vr(n.flatMap(function(u,f){var h=u.color;return"attribute"in h?[{name:"a_borderColor_".concat(f+1),size:4,type:wo,normalized:!0}]:[]})),vr(n.flatMap(function(u,f){var h=u.size;return"attribute"in h?[{name:"a_borderSize_".concat(f+1),size:1,type:Dt}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Dt}],CONSTANT_DATA:[[i.ANGLE_1],[i.ANGLE_2],[i.ANGLE_3]]}}},{key:"processVisibleItem",value:function(u,f,h){var d=this.array;d[f++]=h.x,d[f++]=h.y,d[f++]=u,d[f++]=h.size,n.forEach(function(y){var w=y.color;"attribute"in w&&(d[f++]=rr(h[w.attribute]||w.defaultValue||Ld))}),n.forEach(function(y){var w=y.size;"attribute"in w&&(d[f++]=h[w.attribute]||w.defaultValue)})}},{key:"setUniforms",value:function(u,f){var h=f.gl,d=f.uniformLocations,y=d.u_sizeRatio,w=d.u_correctionRatio,C=d.u_matrix;h.uniform1f(w,u.correctionRatio),h.uniform1f(y,u.sizeRatio),h.uniformMatrix3fv(C,!1,u.matrix),n.forEach(function(A,S){var j=A.color;if("value"in j){var T=d["u_borderColor_".concat(S+1)],I=Ri(j.value),P=wd(I,4),p=P[0],_=P[1],x=P[2],R=P[3];h.uniform4f(T,p/255,_/255,x/255,R/255)}})}}]),i})(ma),mt(t,"ANGLE_1",0),mt(t,"ANGLE_2",2*Math.PI/3),mt(t,"ANGLE_3",4*Math.PI/3),t}var Od=Dd();function Gd(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ps(e){var t=Gd(e,"string");return typeof t=="symbol"?t:t+""}function ms(e,t,r){return(t=ps(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xo(Object(r),!0).forEach(function(n){ms(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xo(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ps(n.key),n)}}function $d(e,t,r){return t&&Fd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(e)}function vs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vs=function(){return!!e})()}function ys(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hd(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ys(e)}function Bd(e,t,r){return t=Jt(t),Hd(e,vs()?Reflect.construct(t,r||[],Jt(e).constructor):t.apply(e,r))}function fn(e,t){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fn(e,t)}function Vd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fn(e,t)}function hn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qd(e){if(Array.isArray(e))return hn(e)}function Ud(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wd(e,t){if(e){if(typeof e=="string")return hn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hn(e,t):void 0}}function Xd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yr(e){return qd(e)||Ud(e)||Wd(e)||Xd()}function bs(e,t,r,n){var a=Math.pow(1-e,2)*t.x+2*(1-e)*e*r.x+Math.pow(e,2)*n.x,o=Math.pow(1-e,2)*t.y+2*(1-e)*e*r.y+Math.pow(e,2)*n.y;return{x:a,y:o}}function Yd(e,t,r){for(var n=20,a=0,o=e,l=0;l<n;l++){var s=bs((l+1)/n,e,t,r);a+=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),o=s}return a}function Kd(e){var t=e.curvatureAttribute,r=e.defaultCurvature,n=e.keepLabelUpright,a=n===void 0?!0:n;return function(o,l,s,i,c){var u=c.edgeLabelSize,f=l[t]||r,h=c.edgeLabelFont,d=c.edgeLabelWeight,y=c.edgeLabelColor.attribute?l[c.edgeLabelColor.attribute]||c.edgeLabelColor.color||"#000":c.edgeLabelColor.color,w=l.label;if(w){o.fillStyle=y,o.font="".concat(d," ").concat(u,"px ").concat(h);var C=!a||s.x<i.x,A=C?s.x:i.x,S=C?s.y:i.y,j=C?i.x:s.x,T=C?i.y:s.y,I=(A+j)/2,P=(S+T)/2,p=j-A,_=T-S,x=Math.sqrt(Math.pow(p,2)+Math.pow(_,2)),R=C?1:-1,N=I+_*f*R,O=P-p*f*R,b=l.size*.7+5,H={x:O-S,y:-(N-A)},K=Math.sqrt(Math.pow(H.x,2)+Math.pow(H.y,2)),D={x:T-O,y:-(j-N)},k=Math.sqrt(Math.pow(D.x,2)+Math.pow(D.y,2));A+=b*H.x/K,S+=b*H.y/K,j+=b*D.x/k,T+=b*D.y/k,N+=b*_/x,O-=b*p/x;var E={x:N,y:O},B={x:A,y:S},le={x:j,y:T},F=Yd(B,E,le);if(!(F<s.size+i.size)){var v=o.measureText(w).width,z=F-s.size-i.size;if(v>z){var V="…";for(w=w+V,v=o.measureText(w).width;v>z&&w.length>1;)w=w.slice(0,-2)+V,v=o.measureText(w).width;if(w.length<4)return}for(var $={},Q=0,W=w.length;Q<W;Q++){var X=w[Q];$[X]||($[X]=o.measureText(X).width*(1+f*.35))}for(var ae=.5-v/F/2,ne=0,se=w.length;ne<se;ne++){var M=w[ne],J=bs(ae,B,E,le),U=2*(1-ae)*(N-A)+2*ae*(j-N),q=2*(1-ae)*(O-S)+2*ae*(T-O),L=Math.atan2(q,U);o.save(),o.translate(J.x,J.y),o.rotate(L),o.fillText(M,0,0),o.restore(),ae+=$[M]/F}}}}}function Qd(e){var t=e.arrowHead,r=(t==null?void 0:t.extremity)==="target"||(t==null?void 0:t.extremity)==="both",n=(t==null?void 0:t.extremity)==="source"||(t==null?void 0:t.extremity)==="both",a=`
precision highp float;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`.concat(r?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(n?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(t?`
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;`:"",`

float det(vec2 a, vec2 b) {
  return a.x * b.y - b.x * a.y;
}

vec2 getDistanceVector(vec2 b0, vec2 b1, vec2 b2) {
  float a = det(b0, b2), b = 2.0 * det(b1, b0), d = 2.0 * det(b2, b1);
  float f = b * d - a * a;
  vec2 d21 = b2 - b1, d10 = b1 - b0, d20 = b2 - b0;
  vec2 gf = 2.0 * (b * d21 + d * d10 + a * d20);
  gf = vec2(gf.y, -gf.x);
  vec2 pp = -f * gf / dot(gf, gf);
  vec2 d0p = b0 - pp;
  float ap = det(d0p, d20), bp = 2.0 * det(d10, d0p);
  float t = clamp((ap + bp) / (2.0 * a + b + d), 0.0, 1.0);
  return mix(mix(b0, b1, t), mix(b1, b2, t), t);
}

float distToQuadraticBezierCurve(vec2 p, vec2 b0, vec2 b1, vec2 b2) {
  return length(getDistanceVector(b0 - p, b1 - p, b2 - p));
}

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = distToQuadraticBezierCurve(gl_FragCoord.xy, v_cpA, v_cpB, v_cpC);
  float thickness = v_thickness;
`).concat(r?`
  float distToTarget = length(gl_FragCoord.xy - v_targetPoint);
  float targetArrowLength = v_targetSize + thickness * u_lengthToThicknessRatio;
  if (distToTarget < targetArrowLength) {
    thickness = (distToTarget - v_targetSize) / (targetArrowLength - v_targetSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`
`).concat(n?`
  float distToSource = length(gl_FragCoord.xy - v_sourcePoint);
  float sourceArrowLength = v_sourceSize + thickness * u_lengthToThicknessRatio;
  if (distToSource < sourceArrowLength) {
    thickness = (distToSource - v_sourceSize) / (sourceArrowLength - v_sourceSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`

  float halfThickness = thickness / 2.0;
  if (dist < halfThickness) {
    #ifdef PICKING_MODE
    gl_FragColor = v_color;
    #else
    float t = smoothstep(
      halfThickness - v_feather,
      halfThickness,
      dist
    );

    gl_FragColor = mix(v_color, transparent, t);
    #endif
  } else {
    gl_FragColor = transparent;
  }
}
`);return a}function Jd(e){var t=e.arrowHead,r=(t==null?void 0:t.extremity)==="target"||(t==null?void 0:t.extremity)==="both",n=(t==null?void 0:t.extremity)==="source"||(t==null?void 0:t.extremity)==="both",a=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute float a_direction;
attribute float a_thickness;
attribute vec2 a_source;
attribute vec2 a_target;
attribute float a_current;
attribute float a_curvature;
`.concat(r?`attribute float a_targetSize;
`:"",`
`).concat(n?`attribute float a_sourceSize;
`:"",`

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform vec2 u_dimensions;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`).concat(r?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(n?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(t?`
uniform float u_widenessToThicknessRatio;`:"",`

const float bias = 255.0 / 254.0;
const float epsilon = 0.7;

vec2 clipspaceToViewport(vec2 pos, vec2 dimensions) {
  return vec2(
    (pos.x + 1.0) * dimensions.x / 2.0,
    (pos.y + 1.0) * dimensions.y / 2.0
  );
}

vec2 viewportToClipspace(vec2 pos, vec2 dimensions) {
  return vec2(
    pos.x / dimensions.x * 2.0 - 1.0,
    pos.y / dimensions.y * 2.0 - 1.0
  );
}

void main() {
  float minThickness = u_minEdgeThickness;

  // Selecting the correct position
  // Branchless "position = a_source if a_current == 1.0 else a_target"
  vec2 position = a_source * max(0.0, a_current) + a_target * max(0.0, 1.0 - a_current);
  position = (u_matrix * vec3(position, 1)).xy;

  vec2 source = (u_matrix * vec3(a_source, 1)).xy;
  vec2 target = (u_matrix * vec3(a_target, 1)).xy;

  vec2 viewportPosition = clipspaceToViewport(position, u_dimensions);
  vec2 viewportSource = clipspaceToViewport(source, u_dimensions);
  vec2 viewportTarget = clipspaceToViewport(target, u_dimensions);

  vec2 delta = viewportTarget.xy - viewportSource.xy;
  float len = length(delta);
  vec2 normal = vec2(-delta.y, delta.x) * a_direction;
  vec2 unitNormal = normal / len;
  float boundingBoxThickness = len * a_curvature;

  float curveThickness = max(minThickness, a_thickness / u_sizeRatio);
  v_thickness = curveThickness * u_pixelRatio;
  v_feather = u_feather;

  v_cpA = viewportSource;
  v_cpB = 0.5 * (viewportSource + viewportTarget) + unitNormal * a_direction * boundingBoxThickness;
  v_cpC = viewportTarget;

  vec2 viewportOffsetPosition = (
    viewportPosition +
    unitNormal * (boundingBoxThickness / 2.0 + sign(boundingBoxThickness) * (`).concat(t?"curveThickness * u_widenessToThicknessRatio":"curveThickness",` + epsilon)) *
    max(0.0, a_direction) // NOTE: cutting the bounding box in half to avoid overdraw
  );

  position = viewportToClipspace(viewportOffsetPosition, u_dimensions);
  gl_Position = vec4(position, 0, 1);
    
`).concat(r?`
  v_targetSize = a_targetSize * u_pixelRatio / u_sizeRatio;
  v_targetPoint = viewportTarget;
`:"",`
`).concat(n?`
  v_sourceSize = a_sourceSize * u_pixelRatio / u_sizeRatio;
  v_sourcePoint = viewportSource;
`:"",`

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`);return a}var ws=.25,Zd={arrowHead:null,curvatureAttribute:"curvature",defaultCurvature:ws},xs=WebGLRenderingContext,_o=xs.UNSIGNED_BYTE,et=xs.FLOAT;function cr(e){var t=Qt(Qt({},Zd),e||{}),r=t,n=r.arrowHead,a=r.curvatureAttribute,o=r.drawLabel,l=(n==null?void 0:n.extremity)==="target"||(n==null?void 0:n.extremity)==="both",s=(n==null?void 0:n.extremity)==="source"||(n==null?void 0:n.extremity)==="both",i=["u_matrix","u_sizeRatio","u_dimensions","u_pixelRatio","u_feather","u_minEdgeThickness"].concat(yr(n?["u_lengthToThicknessRatio","u_widenessToThicknessRatio"]:[]));return(function(c){Vd(u,c);function u(){var f;Md(this,u);for(var h=arguments.length,d=new Array(h),y=0;y<h;y++)d[y]=arguments[y];return f=Bd(this,u,[].concat(d)),ms(ys(f),"drawLabel",o||Kd(t)),f}return $d(u,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Jd(t),FRAGMENT_SHADER_SOURCE:Qd(t),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:i,ATTRIBUTES:[{name:"a_source",size:2,type:et},{name:"a_target",size:2,type:et}].concat(yr(l?[{name:"a_targetSize",size:1,type:et}]:[]),yr(s?[{name:"a_sourceSize",size:1,type:et}]:[]),[{name:"a_thickness",size:1,type:et},{name:"a_curvature",size:1,type:et},{name:"a_color",size:4,type:_o,normalized:!0},{name:"a_id",size:4,type:_o,normalized:!0}]),CONSTANT_ATTRIBUTES:[{name:"a_current",size:1,type:et},{name:"a_direction",size:1,type:et}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[0,-1],[1,1],[1,-1]]}}},{key:"processVisibleItem",value:function(h,d,y,w,C){var A,S=C.size||1,j=y.x,T=y.y,I=w.x,P=w.y,p=rr(C.color),_=(A=C[a])!==null&&A!==void 0?A:ws,x=this.array;x[d++]=j,x[d++]=T,x[d++]=I,x[d++]=P,l&&(x[d++]=w.size),s&&(x[d++]=y.size),x[d++]=S,x[d++]=_,x[d++]=p,x[d++]=h}},{key:"setUniforms",value:function(h,d){var y=d.gl,w=d.uniformLocations,C=w.u_matrix,A=w.u_pixelRatio,S=w.u_feather,j=w.u_sizeRatio,T=w.u_dimensions,I=w.u_minEdgeThickness;if(y.uniformMatrix3fv(C,!1,h.matrix),y.uniform1f(A,h.pixelRatio),y.uniform1f(j,h.sizeRatio),y.uniform1f(S,h.antiAliasingFeather),y.uniform2f(T,h.width*h.pixelRatio,h.height*h.pixelRatio),y.uniform1f(I,h.minEdgeThickness),n){var P=w.u_lengthToThicknessRatio,p=w.u_widenessToThicknessRatio;y.uniform1f(P,n.lengthToThicknessRatio),y.uniform1f(p,n.widenessToThicknessRatio)}}}]),u})(ba)}cr();var ef=cr({arrowHead:En});cr({arrowHead:Qt(Qt({},En),{},{extremity:"both"})});const tf=({node:e,move:t})=>{const r=Be(),{gotoNode:n}=wa();return m.useEffect(()=>{const a=r.getGraph();if(t){if(e&&a.hasNode(e))try{a.setNodeAttribute(e,"highlighted",!0),n(e)}catch(o){console.error("Error focusing on node:",o)}else r.setCustomBBox(null),r.getCamera().animate({x:.5,y:.5,ratio:1},{duration:0});te.getState().setMoveToSelectedNode(!1)}else if(e&&a.hasNode(e))try{a.setNodeAttribute(e,"highlighted",!0)}catch(o){console.error("Error highlighting node:",o)}return()=>{if(e&&a.hasNode(e))try{a.setNodeAttribute(e,"highlighted",!1)}catch(o){console.error("Error cleaning up node highlight:",o)}}},[e,t,r,n]),null};function St(e,t){const r=Be(),n=m.useRef(t);return xa(n.current,t)||(n.current=t),{positions:m.useCallback((()=>n.current?e(r.getGraph(),n.current):{}),[r,n,e]),assign:m.useCallback((()=>{n.current&&e.assign(r.getGraph(),n.current)}),[r,n,e])}}function Dn(e,t){const r=Be(),[n,a]=m.useState(!1),[o,l]=m.useState(null),s=m.useRef(t);return xa(s.current,t)||(s.current=t),m.useEffect((()=>{a(!1);let i=null;return s.current&&(i=new e(r.getGraph(),s.current)),l(i),()=>{i!==null&&i.kill()}}),[r,s,l,a,e]),{stop:m.useCallback((()=>{o&&(o.stop(),a(!1))}),[o,a]),start:m.useCallback((()=>{o&&(o.start(),a(!0))}),[o,a]),kill:m.useCallback((()=>{o&&o.kill(),a(!1)}),[o,a]),isRunning:n}}var br,So;function It(){if(So)return br;So=1;function e(r){return!r||typeof r!="object"||typeof r=="function"||Array.isArray(r)||r instanceof Set||r instanceof Map||r instanceof RegExp||r instanceof Date}function t(r,n){r=r||{};var a={};for(var o in n){var l=r[o],s=n[o];if(!e(s)){a[o]=t(l,s);continue}l===void 0?a[o]=s:a[o]=l}return a}return br=t,br}var wr,Eo;function rf(){if(Eo)return wr;Eo=1;function e(r){return function(n,a){return n+Math.floor(r()*(a-n+1))}}var t=e(Math.random);return t.createRandom=e,wr=t,wr}var xr,ko;function nf(){if(ko)return xr;ko=1;var e=rf().createRandom;function t(n){var a=e(n);return function(o){for(var l=o.length,s=l-1,i=-1;++i<l;){var c=a(i,s),u=o[c];o[c]=o[i],o[i]=u}}}var r=t(Math.random);return r.createShuffleInPlace=t,xr=r,xr}var _r,Co;function of(){if(Co)return _r;Co=1;var e=It(),t=Xe(),r=nf(),n={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function a(p,_,x,R,N){this.wrappedCircle=N||null,this.children={},this.countChildren=0,this.id=p||null,this.next=null,this.previous=null,this.x=_||null,this.y=x||null,N?this.r=1010101:this.r=R||999}a.prototype.hasChildren=function(){return this.countChildren>0},a.prototype.addChild=function(p,_){this.children[p]=_,++this.countChildren},a.prototype.getChild=function(p){if(!this.children.hasOwnProperty(p)){var _=new a;this.children[p]=_,++this.countChildren}return this.children[p]},a.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var p=this;for(var _ in p.children){var x=p.children[_];x.x+=p.x,x.y+=p.y,x.applyPositionToChildren()}}};function o(p,_,x){for(var R in _.children){var N=_.children[R];N.hasChildren()?o(p,N,x):x[N.id]={x:N.x,y:N.y}}}function l(p,_){var x=p.r-_.r,R=_.x-p.x,N=_.y-p.y;return x<0||x*x<R*R+N*N}function s(p,_){var x=p.r-_.r+1e-6,R=_.x-p.x,N=_.y-p.y;return x>0&&x*x>R*R+N*N}function i(p,_){for(var x=0;x<_.length;++x)if(!s(p,_[x]))return!1;return!0}function c(p){return new a(null,p.x,p.y,p.r)}function u(p,_){var x=p.x,R=p.y,N=p.r,O=_.x,b=_.y,H=_.r,K=O-x,D=b-R,k=H-N,E=Math.sqrt(K*K+D*D);return new a(null,(x+O+K/E*k)/2,(R+b+D/E*k)/2,(E+N+H)/2)}function f(p,_,x){var R=p.x,N=p.y,O=p.r,b=_.x,H=_.y,K=_.r,D=x.x,k=x.y,E=x.r,B=R-b,le=R-D,F=N-H,v=N-k,z=K-O,V=E-O,$=R*R+N*N-O*O,Q=$-b*b-H*H+K*K,W=$-D*D-k*k+E*E,X=le*F-B*v,ae=(F*W-v*Q)/(X*2)-R,ne=(v*z-F*V)/X,se=(le*Q-B*W)/(X*2)-N,M=(B*V-le*z)/X,J=ne*ne+M*M-1,U=2*(O+ae*ne+se*M),q=ae*ae+se*se-O*O,L=-(J?(U+Math.sqrt(U*U-4*J*q))/(2*J):q/U);return new a(null,R+ae+ne*L,N+se+M*L,L)}function h(p){switch(p.length){case 1:return c(p[0]);case 2:return u(p[0],p[1]);case 3:return f(p[0],p[1],p[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+p.length)}}function d(p,_){var x,R;if(i(_,p))return[_];for(x=0;x<p.length;++x)if(l(_,p[x])&&i(u(p[x],_),p))return[p[x],_];for(x=0;x<p.length-1;++x)for(R=x+1;R<p.length;++R)if(l(u(p[x],p[R]),_)&&l(u(p[x],_),p[R])&&l(u(p[R],_),p[x])&&i(f(p[x],p[R],_),p))return[p[x],p[R],_];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function y(p){var _=p.wrappedCircle,x=p.next.wrappedCircle,R=_.r+x.r,N=(_.x*x.r+x.x*_.r)/R,O=(_.y*x.r+x.y*_.r)/R;return N*N+O*O}function w(p,_){var x=0,R=p.slice(),N=p.length,O=[],b,H;for(_(R);x<N;)b=R[x],H&&s(H,b)?++x:(O=d(O,b),H=h(O),x=0);return H}function C(p,_,x){var R=p.x-_.x,N,O,b=p.y-_.y,H,K,D=R*R+b*b;D?(O=_.r+x.r,O*=O,K=p.r+x.r,K*=K,O>K?(N=(D+K-O)/(2*D),H=Math.sqrt(Math.max(0,K/D-N*N)),x.x=p.x-N*R-H*b,x.y=p.y-N*b+H*R):(N=(D+O-K)/(2*D),H=Math.sqrt(Math.max(0,O/D-N*N)),x.x=_.x+N*R-H*b,x.y=_.y+N*b+H*R)):(x.x=_.x+x.r,x.y=_.y)}function A(p,_){var x=p.r+_.r-1e-6,R=_.x-p.x,N=_.y-p.y;return x>0&&x*x>R*R+N*N}function S(p,_){var x=p.length;if(x===0)return 0;var R,N,O,b,H,K,D,k,E,B;if(R=p[0],R.x=0,R.y=0,x<=1)return R.r;if(N=p[1],R.x=-N.r,N.x=R.r,N.y=0,x<=2)return R.r+N.r;O=p[2],C(N,R,O),R=new a(null,null,null,null,R),N=new a(null,null,null,null,N),O=new a(null,null,null,null,O),R.next=O.previous=N,N.next=R.previous=O,O.next=N.previous=R;e:for(K=3;K<x;++K){O=p[K],C(R.wrappedCircle,N.wrappedCircle,O),O=new a(null,null,null,null,O),D=N.next,k=R.previous,E=N.wrappedCircle.r,B=R.wrappedCircle.r;do if(E<=B){if(A(D.wrappedCircle,O.wrappedCircle)){N=D,R.next=N,N.previous=R,--K;continue e}E+=D.wrappedCircle.r,D=D.next}else{if(A(k.wrappedCircle,O.wrappedCircle)){R=k,R.next=N,N.previous=R,--K;continue e}B+=k.wrappedCircle.r,k=k.previous}while(D!==k.next);for(O.previous=R,O.next=N,R.next=N.previous=N=O,b=y(R);(O=O.next)!==N;)(H=y(O))<b&&(R=O,b=H);N=R.next}R=[N.wrappedCircle],O=N;for(var le=1e4;(O=O.next)!==N&&--le!==0;)R.push(O.wrappedCircle);for(O=w(R,_),K=0;K<x;++K)R=p[K],R.x-=O.x,R.y-=O.y;return O.r}function j(p,_){var x=0;if(p.hasChildren()){for(var R in p.children){var N=p.children[R];N.hasChildren()&&(N.r=j(N,_))}x=S(Object.values(p.children),_)}return x}function T(p,_){j(p,_);for(var x in p.children){var R=p.children[x];R.applyPositionToChildren()}}function I(p,_,x){if(!t(_))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");x=e(x,n);var R={},N={},O=_.nodes(),b=x.center,H=x.hierarchyAttributes,K=r.createShuffleInPlace(x.rng),D=x.scale,k=new a;_.forEachNode(function(z,V){var $=V.size?V.size:1,Q=new a(z,null,null,$),W=k;H.forEach(function(X){var ae=V[X];W=W.getChild(ae)}),W.addChild(z,Q)}),T(k,K),o(_,k,R);var E=O.length,B,le,F;for(F=0;F<E;F++){var v=O[F];B=b+D*R[v].x,le=b+D*R[v].y,N[v]={x:B,y:le},p&&(_.setNodeAttribute(v,x.attributes.x,B),_.setNodeAttribute(v,x.attributes.y,le))}return N}var P=I.bind(null,!1);return P.assign=I.bind(null,!0),_r=P,_r}var af=of();const sf=He(af);function lf(e={}){return St(sf,e)}var Sr,To;function cf(){if(To)return Sr;To=1;var e=It(),t=Xe(),r={dimensions:["x","y"],center:.5,scale:1};function n(o,l,s){if(!t(l))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");s=e(s,r);var i=s.dimensions;if(!Array.isArray(i)||i.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=s.center,u=s.scale,f=Math.PI*2,h=(c-.5)*u,d=l.order,y=i[0],w=i[1];function C(j,T){return T[y]=u*Math.cos(j*f/d)+h,T[w]=u*Math.sin(j*f/d)+h,T}var A=0;if(!o){var S={};return l.forEachNode(function(j){S[j]=C(A++,{})}),S}l.updateEachNodeAttributes(function(j,T){return C(A++,T),T},{attributes:i})}var a=n.bind(null,!1);return a.assign=n.bind(null,!0),Sr=a,Sr}var uf=cf();const df=He(uf);function ff(e={}){return St(df,e)}var Ct={},Ro;function On(){if(Ro)return Ct;Ro=1;function e(n){return typeof n!="number"||isNaN(n)?1:n}function t(n,a){var o={},l=function(c){return typeof c>"u"?a:c};typeof a=="function"&&(l=a);var s=function(c){return l(c[n])},i=function(){return l(void 0)};return typeof n=="string"?(o.fromAttributes=s,o.fromGraph=function(c,u){return s(c.getNodeAttributes(u))},o.fromEntry=function(c,u){return s(u)}):typeof n=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},o.fromGraph=function(c,u){return l(n(u,c.getNodeAttributes(u)))},o.fromEntry=function(c,u){return l(n(c,u))}):(o.fromAttributes=i,o.fromGraph=i,o.fromEntry=i),o}function r(n,a){var o={},l=function(c){return typeof c>"u"?a:c};typeof a=="function"&&(l=a);var s=function(c){return l(c[n])},i=function(){return l(void 0)};return typeof n=="string"?(o.fromAttributes=s,o.fromGraph=function(c,u){return s(c.getEdgeAttributes(u))},o.fromEntry=function(c,u){return s(u)},o.fromPartialEntry=o.fromEntry,o.fromMinimalEntry=o.fromEntry):typeof n=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},o.fromGraph=function(c,u){var f=c.extremities(u);return l(n(u,c.getEdgeAttributes(u),f[0],f[1],c.getNodeAttributes(f[0]),c.getNodeAttributes(f[1]),c.isUndirected(u)))},o.fromEntry=function(c,u,f,h,d,y,w){return l(n(c,u,f,h,d,y,w))},o.fromPartialEntry=function(c,u,f,h){return l(n(c,u,f,h))},o.fromMinimalEntry=function(c,u){return l(n(c,u))}):(o.fromAttributes=i,o.fromGraph=i,o.fromEntry=i,o.fromMinimalEntry=i),o}return Ct.createNodeValueGetter=t,Ct.createEdgeValueGetter=r,Ct.createEdgeWeightGetter=function(n){return r(n,e)},Ct}var Er,jo;function _s(){if(jo)return Er;jo=1;const{createNodeValueGetter:e,createEdgeValueGetter:t}=On();return Er=function(n,a,o){const{nodeXAttribute:l,nodeYAttribute:s}=o,{attraction:i,repulsion:c,gravity:u,inertia:f,maxMove:h}=o.settings;let{shouldSkipNode:d,shouldSkipEdge:y,isNodeFixed:w}=o;w=e(w),d=e(d,!1),y=t(y,!1);const C=n.filterNodes((j,T)=>!d.fromEntry(j,T)),A=C.length;for(let j=0;j<A;j++){const T=C[j],I=n.getNodeAttributes(T),P=a[T];P?a[T]={dx:P.dx*f,dy:P.dy*f,x:I[l]||0,y:I[s]||0}:a[T]={dx:0,dy:0,x:I[l]||0,y:I[s]||0}}if(c)for(let j=0;j<A;j++){const T=C[j],I=a[T];for(let P=j+1;P<A;P++){const p=C[P],_=a[p],x=_.x-I.x,R=_.y-I.y,N=Math.sqrt(x*x+R*R)||1,O=c/N*x,b=c/N*R;I.dx-=O,I.dy-=b,_.dx+=O,_.dy+=b}}if(i&&n.forEachEdge((j,T,I,P,p,_,x)=>{if(I===P||d.fromEntry(I,p)||d.fromEntry(P,_)||y.fromEntry(j,T,I,P,p,_,x))return;const R=a[I],N=a[P],O=N.x-R.x,b=N.y-R.y,H=Math.sqrt(O*O+b*b)||1,K=i*H*O,D=i*H*b;R.dx+=K,R.dy+=D,N.dx-=K,N.dy-=D}),u)for(let j=0;j<A;j++){const T=C[j],I=a[T],{x:P,y:p}=I,_=Math.sqrt(P*P+p*p)||1;a[T].dx-=P*u*_,a[T].dy-=p*u*_}const S=!1;for(let j=0;j<A;j++){const T=C[j],I=a[T],P=Math.sqrt(I.dx*I.dx+I.dy*I.dy);P>h&&(I.dx*=h/P,I.dy*=h/P),w.fromGraph(n,T)?I.fixed=!0:(I.x+=I.dx,I.y+=I.dy,I.fixed=!1)}return{converged:S}},Er}var Ot={},Ao;function Ss(){return Ao||(Ao=1,Ot.assignLayoutChanges=function(e,t,r){const{nodeXAttribute:n,nodeYAttribute:a}=r;e.updateEachNodeAttributes((o,l)=>{const s=t[o];return!s||s.fixed||(l[n]=s.x,l[a]=s.y),l},{attributes:["x","y"]})},Ot.collectLayoutChanges=function(e){const t={};for(const r in e){const n=e[r];t[r]={x:n.x,y:n.y}}return t}),Ot}var kr,No;function Es(){return No||(No=1,kr={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),kr}var Cr,Io;function hf(){if(Io)return Cr;Io=1;const e=Xe(),t=It(),r=_s(),n=Ss(),a=Es();function o(s,i,c){if(!e(i))throw new Error("graphology-layout-force: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};const u=c.maxIterations;if(c=t(c,a),typeof u!="number"||u<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");const f={};let h=null,d;for(d=0;d<u&&(h=r(i,f,c),!h.converged);d++);if(s){n.assignLayoutChanges(i,f,c);return}return n.collectLayoutChanges(f)}const l=o.bind(null,!1);return l.assign=o.bind(null,!0),Cr=l,Cr}var gf=hf();const pf=He(gf);var Tr,Lo;function mf(){if(Lo)return Tr;Lo=1;const e=Xe(),t=It(),r=_s(),n=Ss(),a=Es();function o(l,s){if(!e(l))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");s=t(s,a),this.callbacks={},s.onConverged&&(this.callbacks.onConverged=s.onConverged),this.graph=l,this.params=s,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}return o.prototype.isRunning=function(){return this.running},o.prototype.runFrame=function(){let{converged:l}=r(this.graph,this.nodeStates,this.params);n.assignLayoutChanges(this.graph,this.nodeStates,this.params),l=!1,l?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},o.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},o.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},o.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Tr=o,Tr}var vf=mf();const yf=He(vf);function bf(e={maxIterations:100}){return St(pf,e)}function wf(e={}){return Dn(yf,e)}var Rr,Po;function xf(){if(Po)return Rr;Po=1;var e=0,t=1,r=2,n=3,a=4,o=5,l=6,s=7,i=8,c=9,u=0,f=1,h=2,d=0,y=1,w=2,C=3,A=4,S=5,j=6,T=7,I=8,P=3,p=10,_=3,x=9,R=10;return Rr=function(O,b,H){var K,D,k,E,B,le,F,v,z,V,$=b.length,Q=H.length,W=O.adjustSizes,X=O.barnesHutTheta*O.barnesHutTheta,ae,ne,se,M,J,U,q,L=[];for(k=0;k<$;k+=p)b[k+a]=b[k+r],b[k+o]=b[k+n],b[k+r]=0,b[k+n]=0;if(O.outboundAttractionDistribution){for(ae=0,k=0;k<$;k+=p)ae+=b[k+l];ae/=$/p}if(O.barnesHutOptimize){var oe=1/0,de=-1/0,re=1/0,ee=-1/0,G,ge,pe;for(k=0;k<$;k+=p)oe=Math.min(oe,b[k+e]),de=Math.max(de,b[k+e]),re=Math.min(re,b[k+t]),ee=Math.max(ee,b[k+t]);var be=de-oe,xe=ee-re;for(be>xe?(re-=(be-xe)/2,ee=re+be):(oe-=(xe-be)/2,de=oe+xe),L[0+d]=-1,L[0+y]=(oe+de)/2,L[0+w]=(re+ee)/2,L[0+C]=Math.max(de-oe,ee-re),L[0+A]=-1,L[0+S]=-1,L[0+j]=0,L[0+T]=0,L[0+I]=0,K=1,k=0;k<$;k+=p)for(D=0,pe=P;;)if(L[D+S]>=0){b[k+e]<L[D+y]?b[k+t]<L[D+w]?G=L[D+S]:G=L[D+S]+x:b[k+t]<L[D+w]?G=L[D+S]+x*2:G=L[D+S]+x*3,L[D+T]=(L[D+T]*L[D+j]+b[k+e]*b[k+l])/(L[D+j]+b[k+l]),L[D+I]=(L[D+I]*L[D+j]+b[k+t]*b[k+l])/(L[D+j]+b[k+l]),L[D+j]+=b[k+l],D=G;continue}else if(L[D+d]<0){L[D+d]=k;break}else{if(L[D+S]=K*x,v=L[D+C]/2,z=L[D+S],L[z+d]=-1,L[z+y]=L[D+y]-v,L[z+w]=L[D+w]-v,L[z+C]=v,L[z+A]=z+x,L[z+S]=-1,L[z+j]=0,L[z+T]=0,L[z+I]=0,z+=x,L[z+d]=-1,L[z+y]=L[D+y]-v,L[z+w]=L[D+w]+v,L[z+C]=v,L[z+A]=z+x,L[z+S]=-1,L[z+j]=0,L[z+T]=0,L[z+I]=0,z+=x,L[z+d]=-1,L[z+y]=L[D+y]+v,L[z+w]=L[D+w]-v,L[z+C]=v,L[z+A]=z+x,L[z+S]=-1,L[z+j]=0,L[z+T]=0,L[z+I]=0,z+=x,L[z+d]=-1,L[z+y]=L[D+y]+v,L[z+w]=L[D+w]+v,L[z+C]=v,L[z+A]=L[D+A],L[z+S]=-1,L[z+j]=0,L[z+T]=0,L[z+I]=0,K+=4,b[L[D+d]+e]<L[D+y]?b[L[D+d]+t]<L[D+w]?G=L[D+S]:G=L[D+S]+x:b[L[D+d]+t]<L[D+w]?G=L[D+S]+x*2:G=L[D+S]+x*3,L[D+j]=b[L[D+d]+l],L[D+T]=b[L[D+d]+e],L[D+I]=b[L[D+d]+t],L[G+d]=L[D+d],L[D+d]=-1,b[k+e]<L[D+y]?b[k+t]<L[D+w]?ge=L[D+S]:ge=L[D+S]+x:b[k+t]<L[D+w]?ge=L[D+S]+x*2:ge=L[D+S]+x*3,G===ge)if(pe--){D=G;continue}else{pe=P;break}L[ge+d]=k;break}}if(O.barnesHutOptimize)for(ne=O.scalingRatio,k=0;k<$;k+=p)for(D=0;;)if(L[D+S]>=0)if(U=Math.pow(b[k+e]-L[D+T],2)+Math.pow(b[k+t]-L[D+I],2),V=L[D+C],4*V*V/U<X){if(se=b[k+e]-L[D+T],M=b[k+t]-L[D+I],W===!0?U>0?(q=ne*b[k+l]*L[D+j]/U,b[k+r]+=se*q,b[k+n]+=M*q):U<0&&(q=-ne*b[k+l]*L[D+j]/Math.sqrt(U),b[k+r]+=se*q,b[k+n]+=M*q):U>0&&(q=ne*b[k+l]*L[D+j]/U,b[k+r]+=se*q,b[k+n]+=M*q),D=L[D+A],D<0)break;continue}else{D=L[D+S];continue}else{if(le=L[D+d],le>=0&&le!==k&&(se=b[k+e]-b[le+e],M=b[k+t]-b[le+t],U=se*se+M*M,W===!0?U>0?(q=ne*b[k+l]*b[le+l]/U,b[k+r]+=se*q,b[k+n]+=M*q):U<0&&(q=-ne*b[k+l]*b[le+l]/Math.sqrt(U),b[k+r]+=se*q,b[k+n]+=M*q):U>0&&(q=ne*b[k+l]*b[le+l]/U,b[k+r]+=se*q,b[k+n]+=M*q)),D=L[D+A],D<0)break;continue}else for(ne=O.scalingRatio,E=0;E<$;E+=p)for(B=0;B<E;B+=p)se=b[E+e]-b[B+e],M=b[E+t]-b[B+t],W===!0?(U=Math.sqrt(se*se+M*M)-b[E+i]-b[B+i],U>0?(q=ne*b[E+l]*b[B+l]/U/U,b[E+r]+=se*q,b[E+n]+=M*q,b[B+r]-=se*q,b[B+n]-=M*q):U<0&&(q=100*ne*b[E+l]*b[B+l],b[E+r]+=se*q,b[E+n]+=M*q,b[B+r]-=se*q,b[B+n]-=M*q)):(U=Math.sqrt(se*se+M*M),U>0&&(q=ne*b[E+l]*b[B+l]/U/U,b[E+r]+=se*q,b[E+n]+=M*q,b[B+r]-=se*q,b[B+n]-=M*q));for(z=O.gravity/O.scalingRatio,ne=O.scalingRatio,k=0;k<$;k+=p)q=0,se=b[k+e],M=b[k+t],U=Math.sqrt(Math.pow(se,2)+Math.pow(M,2)),O.strongGravityMode?U>0&&(q=ne*b[k+l]*z):U>0&&(q=ne*b[k+l]*z/U),b[k+r]-=se*q,b[k+n]-=M*q;for(ne=1*(O.outboundAttractionDistribution?ae:1),F=0;F<Q;F+=_)E=H[F+u],B=H[F+f],v=H[F+h],J=Math.pow(v,O.edgeWeightInfluence),se=b[E+e]-b[B+e],M=b[E+t]-b[B+t],W===!0?(U=Math.sqrt(se*se+M*M)-b[E+i]-b[B+i],O.linLogMode?O.outboundAttractionDistribution?U>0&&(q=-ne*J*Math.log(1+U)/U/b[E+l]):U>0&&(q=-ne*J*Math.log(1+U)/U):O.outboundAttractionDistribution?U>0&&(q=-ne*J/b[E+l]):U>0&&(q=-ne*J)):(U=Math.sqrt(Math.pow(se,2)+Math.pow(M,2)),O.linLogMode?O.outboundAttractionDistribution?U>0&&(q=-ne*J*Math.log(1+U)/U/b[E+l]):U>0&&(q=-ne*J*Math.log(1+U)/U):O.outboundAttractionDistribution?(U=1,q=-ne*J/b[E+l]):(U=1,q=-ne*J)),U>0&&(b[E+r]+=se*q,b[E+n]+=M*q,b[B+r]-=se*q,b[B+n]-=M*q);var fe,me,Ne,Ce,Te,Pe;if(W===!0)for(k=0;k<$;k+=p)b[k+c]!==1&&(fe=Math.sqrt(Math.pow(b[k+r],2)+Math.pow(b[k+n],2)),fe>R&&(b[k+r]=b[k+r]*R/fe,b[k+n]=b[k+n]*R/fe),me=b[k+l]*Math.sqrt((b[k+a]-b[k+r])*(b[k+a]-b[k+r])+(b[k+o]-b[k+n])*(b[k+o]-b[k+n])),Ne=Math.sqrt((b[k+a]+b[k+r])*(b[k+a]+b[k+r])+(b[k+o]+b[k+n])*(b[k+o]+b[k+n]))/2,Ce=.1*Math.log(1+Ne)/(1+Math.sqrt(me)),Te=b[k+e]+b[k+r]*(Ce/O.slowDown),b[k+e]=Te,Pe=b[k+t]+b[k+n]*(Ce/O.slowDown),b[k+t]=Pe);else for(k=0;k<$;k+=p)b[k+c]!==1&&(me=b[k+l]*Math.sqrt((b[k+a]-b[k+r])*(b[k+a]-b[k+r])+(b[k+o]-b[k+n])*(b[k+o]-b[k+n])),Ne=Math.sqrt((b[k+a]+b[k+r])*(b[k+a]+b[k+r])+(b[k+o]+b[k+n])*(b[k+o]+b[k+n]))/2,Ce=b[k+s]*Math.log(1+Ne)/(1+Math.sqrt(me)),b[k+s]=Math.min(1,Math.sqrt(Ce*(Math.pow(b[k+r],2)+Math.pow(b[k+n],2))/(1+Math.sqrt(me)))),Te=b[k+e]+b[k+r]*(Ce/O.slowDown),b[k+e]=Te,Pe=b[k+t]+b[k+n]*(Ce/O.slowDown),b[k+t]=Pe);return{}},Rr}var We={},zo;function ks(){if(zo)return We;zo=1;var e=10,t=3;return We.assign=function(r){r=r||{};var n=Array.prototype.slice.call(arguments).slice(1),a,o,l;for(a=0,l=n.length;a<l;a++)if(n[a])for(o in n[a])r[o]=n[a][o];return r},We.validateSettings=function(r){return"linLogMode"in r&&typeof r.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in r&&typeof r.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in r&&typeof r.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in r&&typeof r.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in r&&!(typeof r.scalingRatio=="number"&&r.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in r&&typeof r.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in r&&!(typeof r.gravity=="number"&&r.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in r&&!(typeof r.slowDown=="number"||r.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in r&&typeof r.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in r&&!(typeof r.barnesHutTheta=="number"&&r.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},We.graphToByteArrays=function(r,n){var a=r.order,o=r.size,l={},s,i=new Float32Array(a*e),c=new Float32Array(o*t);return s=0,r.forEachNode(function(u,f){l[u]=s,i[s]=f.x,i[s+1]=f.y,i[s+2]=0,i[s+3]=0,i[s+4]=0,i[s+5]=0,i[s+6]=1,i[s+7]=1,i[s+8]=f.size||1,i[s+9]=f.fixed?1:0,s+=e}),s=0,r.forEachEdge(function(u,f,h,d,y,w,C){var A=l[h],S=l[d],j=n(u,f,h,d,y,w,C);i[A+6]+=j,i[S+6]+=j,c[s]=A,c[s+1]=S,c[s+2]=j,s+=t}),{nodes:i,edges:c}},We.assignLayoutChanges=function(r,n,a){var o=0;r.updateEachNodeAttributes(function(l,s){return s.x=n[o],s.y=n[o+1],o+=e,a?a(l,s):s})},We.readGraphPositions=function(r,n){var a=0;r.forEachNode(function(o,l){n[a]=l.x,n[a+1]=l.y,a+=e})},We.collectLayoutChanges=function(r,n,a){for(var o=r.nodes(),l={},s=0,i=0,c=n.length;s<c;s+=e){if(a){var u=Object.assign({},r.getNodeAttributes(o[i]));u.x=n[s],u.y=n[s+1],u=a(o[i],u),l[o[i]]={x:u.x,y:u.y}}else l[o[i]]={x:n[s],y:n[s+1]};i++}return l},We.createWorker=function(n){var a=window.URL||window.webkitURL,o=n.toString(),l=a.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),s=new Worker(l);return a.revokeObjectURL(l),s},We}var jr,Do;function Cs(){return Do||(Do=1,jr={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),jr}var Ar,Oo;function _f(){if(Oo)return Ar;Oo=1;var e=Xe(),t=On().createEdgeWeightGetter,r=xf(),n=ks(),a=Cs();function o(i,c,u){if(!e(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof u=="number"&&(u={iterations:u});var f=u.iterations;if(typeof f!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(f<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=t("getEdgeWeight"in u?u.getEdgeWeight:"weight").fromEntry,d=typeof u.outputReducer=="function"?u.outputReducer:null,y=n.assign({},a,u.settings),w=n.validateSettings(y);if(w)throw new Error("graphology-layout-forceatlas2: "+w.message);var C=n.graphToByteArrays(c,h),A;for(A=0;A<f;A++)r(y,C.nodes,C.edges);if(i){n.assignLayoutChanges(c,C.nodes,d);return}return n.collectLayoutChanges(c,C.nodes)}function l(i){var c=typeof i=="number"?i:i.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),s.inferSettings=l,Ar=s,Ar}var Sf=_f();const Ef=He(Sf);var Nr,Go;function kf(){return Go||(Go=1,Nr=function(){var t,r,n={};(function(){var o=0,l=1,s=2,i=3,c=4,u=5,f=6,h=7,d=8,y=9,w=0,C=1,A=2,S=0,j=1,T=2,I=3,P=4,p=5,_=6,x=7,R=8,N=3,O=10,b=3,H=9,K=10;n.exports=function(k,E,B){var le,F,v,z,V,$,Q,W,X,ae,ne=E.length,se=B.length,M=k.adjustSizes,J=k.barnesHutTheta*k.barnesHutTheta,U,q,L,oe,de,re,ee,G=[];for(v=0;v<ne;v+=O)E[v+c]=E[v+s],E[v+u]=E[v+i],E[v+s]=0,E[v+i]=0;if(k.outboundAttractionDistribution){for(U=0,v=0;v<ne;v+=O)U+=E[v+f];U/=ne/O}if(k.barnesHutOptimize){var ge=1/0,pe=-1/0,be=1/0,xe=-1/0,fe,me,Ne;for(v=0;v<ne;v+=O)ge=Math.min(ge,E[v+o]),pe=Math.max(pe,E[v+o]),be=Math.min(be,E[v+l]),xe=Math.max(xe,E[v+l]);var Ce=pe-ge,Te=xe-be;for(Ce>Te?(be-=(Ce-Te)/2,xe=be+Ce):(ge-=(Te-Ce)/2,pe=ge+Te),G[0+S]=-1,G[0+j]=(ge+pe)/2,G[0+T]=(be+xe)/2,G[0+I]=Math.max(pe-ge,xe-be),G[0+P]=-1,G[0+p]=-1,G[0+_]=0,G[0+x]=0,G[0+R]=0,le=1,v=0;v<ne;v+=O)for(F=0,Ne=N;;)if(G[F+p]>=0){E[v+o]<G[F+j]?E[v+l]<G[F+T]?fe=G[F+p]:fe=G[F+p]+H:E[v+l]<G[F+T]?fe=G[F+p]+H*2:fe=G[F+p]+H*3,G[F+x]=(G[F+x]*G[F+_]+E[v+o]*E[v+f])/(G[F+_]+E[v+f]),G[F+R]=(G[F+R]*G[F+_]+E[v+l]*E[v+f])/(G[F+_]+E[v+f]),G[F+_]+=E[v+f],F=fe;continue}else if(G[F+S]<0){G[F+S]=v;break}else{if(G[F+p]=le*H,W=G[F+I]/2,X=G[F+p],G[X+S]=-1,G[X+j]=G[F+j]-W,G[X+T]=G[F+T]-W,G[X+I]=W,G[X+P]=X+H,G[X+p]=-1,G[X+_]=0,G[X+x]=0,G[X+R]=0,X+=H,G[X+S]=-1,G[X+j]=G[F+j]-W,G[X+T]=G[F+T]+W,G[X+I]=W,G[X+P]=X+H,G[X+p]=-1,G[X+_]=0,G[X+x]=0,G[X+R]=0,X+=H,G[X+S]=-1,G[X+j]=G[F+j]+W,G[X+T]=G[F+T]-W,G[X+I]=W,G[X+P]=X+H,G[X+p]=-1,G[X+_]=0,G[X+x]=0,G[X+R]=0,X+=H,G[X+S]=-1,G[X+j]=G[F+j]+W,G[X+T]=G[F+T]+W,G[X+I]=W,G[X+P]=G[F+P],G[X+p]=-1,G[X+_]=0,G[X+x]=0,G[X+R]=0,le+=4,E[G[F+S]+o]<G[F+j]?E[G[F+S]+l]<G[F+T]?fe=G[F+p]:fe=G[F+p]+H:E[G[F+S]+l]<G[F+T]?fe=G[F+p]+H*2:fe=G[F+p]+H*3,G[F+_]=E[G[F+S]+f],G[F+x]=E[G[F+S]+o],G[F+R]=E[G[F+S]+l],G[fe+S]=G[F+S],G[F+S]=-1,E[v+o]<G[F+j]?E[v+l]<G[F+T]?me=G[F+p]:me=G[F+p]+H:E[v+l]<G[F+T]?me=G[F+p]+H*2:me=G[F+p]+H*3,fe===me)if(Ne--){F=fe;continue}else{Ne=N;break}G[me+S]=v;break}}if(k.barnesHutOptimize)for(q=k.scalingRatio,v=0;v<ne;v+=O)for(F=0;;)if(G[F+p]>=0)if(re=Math.pow(E[v+o]-G[F+x],2)+Math.pow(E[v+l]-G[F+R],2),ae=G[F+I],4*ae*ae/re<J){if(L=E[v+o]-G[F+x],oe=E[v+l]-G[F+R],M===!0?re>0?(ee=q*E[v+f]*G[F+_]/re,E[v+s]+=L*ee,E[v+i]+=oe*ee):re<0&&(ee=-q*E[v+f]*G[F+_]/Math.sqrt(re),E[v+s]+=L*ee,E[v+i]+=oe*ee):re>0&&(ee=q*E[v+f]*G[F+_]/re,E[v+s]+=L*ee,E[v+i]+=oe*ee),F=G[F+P],F<0)break;continue}else{F=G[F+p];continue}else{if($=G[F+S],$>=0&&$!==v&&(L=E[v+o]-E[$+o],oe=E[v+l]-E[$+l],re=L*L+oe*oe,M===!0?re>0?(ee=q*E[v+f]*E[$+f]/re,E[v+s]+=L*ee,E[v+i]+=oe*ee):re<0&&(ee=-q*E[v+f]*E[$+f]/Math.sqrt(re),E[v+s]+=L*ee,E[v+i]+=oe*ee):re>0&&(ee=q*E[v+f]*E[$+f]/re,E[v+s]+=L*ee,E[v+i]+=oe*ee)),F=G[F+P],F<0)break;continue}else for(q=k.scalingRatio,z=0;z<ne;z+=O)for(V=0;V<z;V+=O)L=E[z+o]-E[V+o],oe=E[z+l]-E[V+l],M===!0?(re=Math.sqrt(L*L+oe*oe)-E[z+d]-E[V+d],re>0?(ee=q*E[z+f]*E[V+f]/re/re,E[z+s]+=L*ee,E[z+i]+=oe*ee,E[V+s]-=L*ee,E[V+i]-=oe*ee):re<0&&(ee=100*q*E[z+f]*E[V+f],E[z+s]+=L*ee,E[z+i]+=oe*ee,E[V+s]-=L*ee,E[V+i]-=oe*ee)):(re=Math.sqrt(L*L+oe*oe),re>0&&(ee=q*E[z+f]*E[V+f]/re/re,E[z+s]+=L*ee,E[z+i]+=oe*ee,E[V+s]-=L*ee,E[V+i]-=oe*ee));for(X=k.gravity/k.scalingRatio,q=k.scalingRatio,v=0;v<ne;v+=O)ee=0,L=E[v+o],oe=E[v+l],re=Math.sqrt(Math.pow(L,2)+Math.pow(oe,2)),k.strongGravityMode?re>0&&(ee=q*E[v+f]*X):re>0&&(ee=q*E[v+f]*X/re),E[v+s]-=L*ee,E[v+i]-=oe*ee;for(q=1*(k.outboundAttractionDistribution?U:1),Q=0;Q<se;Q+=b)z=B[Q+w],V=B[Q+C],W=B[Q+A],de=Math.pow(W,k.edgeWeightInfluence),L=E[z+o]-E[V+o],oe=E[z+l]-E[V+l],M===!0?(re=Math.sqrt(L*L+oe*oe)-E[z+d]-E[V+d],k.linLogMode?k.outboundAttractionDistribution?re>0&&(ee=-q*de*Math.log(1+re)/re/E[z+f]):re>0&&(ee=-q*de*Math.log(1+re)/re):k.outboundAttractionDistribution?re>0&&(ee=-q*de/E[z+f]):re>0&&(ee=-q*de)):(re=Math.sqrt(Math.pow(L,2)+Math.pow(oe,2)),k.linLogMode?k.outboundAttractionDistribution?re>0&&(ee=-q*de*Math.log(1+re)/re/E[z+f]):re>0&&(ee=-q*de*Math.log(1+re)/re):k.outboundAttractionDistribution?(re=1,ee=-q*de/E[z+f]):(re=1,ee=-q*de)),re>0&&(E[z+s]+=L*ee,E[z+i]+=oe*ee,E[V+s]-=L*ee,E[V+i]-=oe*ee);var Pe,Ye,Ke,Re,it,ze;if(M===!0)for(v=0;v<ne;v+=O)E[v+y]!==1&&(Pe=Math.sqrt(Math.pow(E[v+s],2)+Math.pow(E[v+i],2)),Pe>K&&(E[v+s]=E[v+s]*K/Pe,E[v+i]=E[v+i]*K/Pe),Ye=E[v+f]*Math.sqrt((E[v+c]-E[v+s])*(E[v+c]-E[v+s])+(E[v+u]-E[v+i])*(E[v+u]-E[v+i])),Ke=Math.sqrt((E[v+c]+E[v+s])*(E[v+c]+E[v+s])+(E[v+u]+E[v+i])*(E[v+u]+E[v+i]))/2,Re=.1*Math.log(1+Ke)/(1+Math.sqrt(Ye)),it=E[v+o]+E[v+s]*(Re/k.slowDown),E[v+o]=it,ze=E[v+l]+E[v+i]*(Re/k.slowDown),E[v+l]=ze);else for(v=0;v<ne;v+=O)E[v+y]!==1&&(Ye=E[v+f]*Math.sqrt((E[v+c]-E[v+s])*(E[v+c]-E[v+s])+(E[v+u]-E[v+i])*(E[v+u]-E[v+i])),Ke=Math.sqrt((E[v+c]+E[v+s])*(E[v+c]+E[v+s])+(E[v+u]+E[v+i])*(E[v+u]+E[v+i]))/2,Re=E[v+h]*Math.log(1+Ke)/(1+Math.sqrt(Ye)),E[v+h]=Math.min(1,Math.sqrt(Re*(Math.pow(E[v+s],2)+Math.pow(E[v+i],2))/(1+Math.sqrt(Ye)))),it=E[v+o]+E[v+s]*(Re/k.slowDown),E[v+o]=it,ze=E[v+l]+E[v+i]*(Re/k.slowDown),E[v+l]=ze);return{}}})();var a=n.exports;self.addEventListener("message",function(o){var l=o.data;t=new Float32Array(l.nodes),l.edges&&(r=new Float32Array(l.edges)),a(l.settings,t,r),self.postMessage({nodes:t.buffer},[t.buffer])})}),Nr}var Ir,Mo;function Cf(){if(Mo)return Ir;Mo=1;var e=kf(),t=Xe(),r=On().createEdgeWeightGetter,n=ks(),a=Cs();function o(l,s){if(s=s||{},!t(l))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var i=r("getEdgeWeight"in s?s.getEdgeWeight:"weight").fromEntry,c=n.assign({},a,s.settings),u=n.validateSettings(c);if(u)throw new Error("graphology-layout-forceatlas2/worker: "+u.message);this.worker=null,this.graph=l,this.settings=c,this.getEdgeWeight=i,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof s.outputReducer=="function"?s.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var f=void 0,h=this;this.handleGraphUpdate=function(){h.worker&&h.worker.terminate(),f&&clearTimeout(f),f=setTimeout(function(){f=void 0,h.spawnWorker()},0)},l.on("nodeAdded",this.handleGraphUpdate),l.on("edgeAdded",this.handleGraphUpdate),l.on("nodeDropped",this.handleGraphUpdate),l.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}return o.prototype.isRunning=function(){return this.running},o.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=n.createWorker(e),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},o.prototype.handleMessage=function(l){if(this.running){var s=new Float32Array(l.data.nodes);n.assignLayoutChanges(this.graph,s,this.outputReducer),this.outputReducer&&n.readGraphPositions(this.graph,s),this.matrices.nodes=s,this.askForIterations()}},o.prototype.askForIterations=function(l){var s=this.matrices,i={settings:this.settings,nodes:s.nodes.buffer},c=[s.nodes.buffer];return l&&(i.edges=s.edges.buffer,c.push(s.edges.buffer)),this.worker.postMessage(i,c),this},o.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=n.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)},o.prototype.stop=function(){return this.running=!1,this},o.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)},Ir=o,Ir}var Tf=Cf();const Rf=He(Tf);function Ts(e={iterations:100}){return St(Ef,e)}function jf(e={}){return Dn(Rf,e)}var Lr,Fo;function Af(){if(Fo)return Lr;Fo=1;var e=0,t=1,r=2,n=3;function a(l,s){return l+"§"+s}function o(){return .01*(.5-Math.random())}return Lr=function(s,i){var c=s.margin,u=s.ratio,f=s.expansion,h=s.gridSize,d=s.speed,y,w,C,A,S,j,T=!0,I=i.length,P=I/n|0,p=new Float32Array(P),_=new Float32Array(P),x=1/0,R=1/0,N=-1/0,O=-1/0;for(y=0;y<I;y+=n)C=i[y+e],A=i[y+t],j=i[y+r]*u+c,x=Math.min(x,C-j),N=Math.max(N,C+j),R=Math.min(R,A-j),O=Math.max(O,A+j);var b=N-x,H=O-R,K=(x+N)/2,D=(R+O)/2;x=K-f*b/2,N=K+f*b/2,R=D-f*H/2,O=D+f*H/2;var k=new Array(h*h),E=k.length,B;for(B=0;B<E;B++)k[B]=[];var le,F,v,z,V,$,Q,W,X,ae;for(y=0;y<I;y+=n)for(C=i[y+e],A=i[y+t],j=i[y+r]*u+c,le=C-j,F=C+j,v=A-j,z=A+j,V=Math.floor(h*(le-x)/(N-x)),$=Math.floor(h*(F-x)/(N-x)),Q=Math.floor(h*(v-R)/(O-R)),W=Math.floor(h*(z-R)/(O-R)),X=V;X<=$;X++)for(ae=Q;ae<=W;ae++)k[X*h+ae].push(y);var ne,se=new Set,M,J,U,q,L,oe,de,re,ee,G,ge,pe,be;for(B=0;B<E;B++)for(ne=k[B],y=0,S=ne.length;y<S;y++)for(M=ne[y],U=i[M+e],L=i[M+t],de=i[M+r],w=y+1;w<S;w++)J=ne[w],ee=a(M,J),!(E>1&&se.has(ee))&&(E>1&&se.add(ee),q=i[J+e],oe=i[J+t],re=i[J+r],G=q-U,ge=oe-L,pe=Math.sqrt(G*G+ge*ge),be=pe<de*u+c+(re*u+c),be&&(T=!1,J=J/n|0,pe>0?(p[J]+=G/pe*(1+de),_[J]+=ge/pe*(1+de)):(p[J]+=b*o(),_[J]+=H*o())));for(y=0,w=0;y<I;y+=n,w++)i[y+e]+=p[w]*.1*d,i[y+t]+=_[w]*.1*d;return{converged:T}},Lr}var ct={},$o;function Rs(){if($o)return ct;$o=1;var e=3;return ct.validateSettings=function(t){return"gridSize"in t&&typeof t.gridSize!="number"||t.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in t&&typeof t.margin!="number"||t.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in t&&typeof t.expansion!="number"||t.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in t&&typeof t.ratio!="number"||t.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in t&&typeof t.speed!="number"||t.speed<=0?{message:"the `speed` setting should be a positive number."}:null},ct.graphToByteArray=function(t,r){var n=t.order,a=new Float32Array(n*e),o=0;return t.forEachNode(function(l,s){typeof r=="function"&&(s=r(l,s)),a[o]=s.x,a[o+1]=s.y,a[o+2]=s.size||1,o+=e}),a},ct.assignLayoutChanges=function(t,r,n){var a=0;t.forEachNode(function(o){var l={x:r[a],y:r[a+1]};typeof n=="function"&&(l=n(o,l)),t.mergeNodeAttributes(o,l),a+=e})},ct.collectLayoutChanges=function(t,r,n){var a={},o=0;return t.forEachNode(function(l){var s={x:r[o],y:r[o+1]};typeof n=="function"&&(s=n(l,s)),a[l]=s,o+=e}),a},ct.createWorker=function(r){var n=window.URL||window.webkitURL,a=r.toString(),o=n.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),l=new Worker(o);return n.revokeObjectURL(o),l},ct}var Pr,Ho;function js(){return Ho||(Ho=1,Pr={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),Pr}var zr,Bo;function Nf(){if(Bo)return zr;Bo=1;var e=Xe(),t=Af(),r=Rs(),n=js(),a=500;function o(s,i,c){if(!e(i))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};var u=c.maxIterations||a;if(typeof u!="number"||u<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var f=Object.assign({},n,c.settings),h=r.validateSettings(f);if(h)throw new Error("graphology-layout-noverlap: "+h.message);var d=r.graphToByteArray(i,c.inputReducer),y=!1,w;for(w=0;w<u&&!y;w++)y=t(f,d).converged;if(s){r.assignLayoutChanges(i,d,c.outputReducer);return}return r.collectLayoutChanges(i,d,c.outputReducer)}var l=o.bind(null,!1);return l.assign=o.bind(null,!0),zr=l,zr}var If=Nf();const Lf=He(If);var Dr,Vo;function Pf(){return Vo||(Vo=1,Dr=function(){var t,r={};(function(){var a=0,o=1,l=2,s=3;function i(u,f){return u+"§"+f}function c(){return .01*(.5-Math.random())}r.exports=function(f,h){var d=f.margin,y=f.ratio,w=f.expansion,C=f.gridSize,A=f.speed,S,j,T,I,P,p,_=!0,x=h.length,R=x/s|0,N=new Float32Array(R),O=new Float32Array(R),b=1/0,H=1/0,K=-1/0,D=-1/0;for(S=0;S<x;S+=s)T=h[S+a],I=h[S+o],p=h[S+l]*y+d,b=Math.min(b,T-p),K=Math.max(K,T+p),H=Math.min(H,I-p),D=Math.max(D,I+p);var k=K-b,E=D-H,B=(b+K)/2,le=(H+D)/2;b=B-w*k/2,K=B+w*k/2,H=le-w*E/2,D=le+w*E/2;var F=new Array(C*C),v=F.length,z;for(z=0;z<v;z++)F[z]=[];var V,$,Q,W,X,ae,ne,se,M,J;for(S=0;S<x;S+=s)for(T=h[S+a],I=h[S+o],p=h[S+l]*y+d,V=T-p,$=T+p,Q=I-p,W=I+p,X=Math.floor(C*(V-b)/(K-b)),ae=Math.floor(C*($-b)/(K-b)),ne=Math.floor(C*(Q-H)/(D-H)),se=Math.floor(C*(W-H)/(D-H)),M=X;M<=ae;M++)for(J=ne;J<=se;J++)F[M*C+J].push(S);var U,q=new Set,L,oe,de,re,ee,G,ge,pe,be,xe,fe,me,Ne;for(z=0;z<v;z++)for(U=F[z],S=0,P=U.length;S<P;S++)for(L=U[S],de=h[L+a],ee=h[L+o],ge=h[L+l],j=S+1;j<P;j++)oe=U[j],be=i(L,oe),!(v>1&&q.has(be))&&(v>1&&q.add(be),re=h[oe+a],G=h[oe+o],pe=h[oe+l],xe=re-de,fe=G-ee,me=Math.sqrt(xe*xe+fe*fe),Ne=me<ge*y+d+(pe*y+d),Ne&&(_=!1,oe=oe/s|0,me>0?(N[oe]+=xe/me*(1+ge),O[oe]+=fe/me*(1+ge)):(N[oe]+=k*c(),O[oe]+=E*c())));for(S=0,j=0;S<x;S+=s,j++)h[S+a]+=N[j]*.1*A,h[S+o]+=O[j]*.1*A;return{converged:_}}})();var n=r.exports;self.addEventListener("message",function(a){var o=a.data;t=new Float32Array(o.nodes);var l=n(o.settings,t);self.postMessage({result:l,nodes:t.buffer},[t.buffer])})}),Dr}var Or,qo;function zf(){if(qo)return Or;qo=1;var e=Pf(),t=Xe(),r=Rs(),n=js();function a(o,l){if(l=l||{},!t(o))throw new Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var s=Object.assign({},n,l.settings),i=r.validateSettings(s);if(i)throw new Error("graphology-layout-noverlap/worker: "+i.message);this.worker=null,this.graph=o,this.settings=s,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=l.inputReducer,this.outputReducer=l.outputReducer,this.callbacks={onConverged:typeof l.onConverged=="function"?l.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var c=!1,u=this;this.handleAddition=function(){c||(c=!0,u.spawnWorker(),setTimeout(function(){c=!1},0))},o.on("nodeAdded",this.handleAddition),o.on("edgeAdded",this.handleAddition),this.spawnWorker()}return a.prototype.isRunning=function(){return this.running},a.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=r.createWorker(e),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},a.prototype.handleMessage=function(o){if(this.running){var l=new Float32Array(o.data.nodes);if(r.assignLayoutChanges(this.graph,l,this.outputReducer),this.matrices.nodes=l,o.data.result.converged){this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop();return}this.askForIterations()}},a.prototype.askForIterations=function(){var o=this.matrices,l={settings:this.settings,nodes:o.nodes.buffer},s=[o.nodes.buffer];return this.worker.postMessage(l,s),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running?this:(this.matrices={nodes:r.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations(),this)},a.prototype.stop=function(){return this.running=!1,this},a.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)},Or=a,Or}var Df=zf();const Of=He(Df);function Gf(e={}){return St(Lf,e)}function Mf(e={}){return Dn(Of,e)}var Gr,Uo;function Ff(){if(Uo)return Gr;Uo=1;var e=It(),t=Xe(),r={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function n(o,l,s){if(!t(l))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");s=e(s,r);var i=s.dimensions;if(!Array.isArray(i)||i.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=i.length,u=s.center,f=s.rng,h=s.scale,d=(u-.5)*h;function y(C){for(var A=0;A<c;A++)C[i[A]]=f()*h+d;return C}if(!o){var w={};return l.forEachNode(function(C){w[C]=y({})}),w}l.updateEachNodeAttributes(function(C,A){return y(A),A},{attributes:i})}var a=n.bind(null,!1);return a.assign=n.bind(null,!0),Gr=a,Gr}var $f=Ff();const Hf=He($f);function Bf(e={}){return St(Hf,e)}var Wo=1,Vf=.9,qf=.8,Uf=.17,Mr=.1,Fr=.999,Wf=.9999,Xf=.99,Yf=/[\\\/_+.#"@\[\(\{&]/,Kf=/[\\\/_+.#"@\[\(\{&]/g,Qf=/[\s-]/,As=/[\s-]/g;function gn(e,t,r,n,a,o,l){if(o===t.length)return a===e.length?Wo:Xf;var s=`${a},${o}`;if(l[s]!==void 0)return l[s];for(var i=n.charAt(o),c=r.indexOf(i,a),u=0,f,h,d,y;c>=0;)f=gn(e,t,r,n,c+1,o+1,l),f>u&&(c===a?f*=Wo:Yf.test(e.charAt(c-1))?(f*=qf,d=e.slice(a,c-1).match(Kf),d&&a>0&&(f*=Math.pow(Fr,d.length))):Qf.test(e.charAt(c-1))?(f*=Vf,y=e.slice(a,c-1).match(As),y&&a>0&&(f*=Math.pow(Fr,y.length))):(f*=Uf,a>0&&(f*=Math.pow(Fr,c-a))),e.charAt(c)!==t.charAt(o)&&(f*=Wf)),(f<Mr&&r.charAt(c-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(c-1)!==n.charAt(o))&&(h=gn(e,t,r,n,c+1,o+2,l),h*Mr>f&&(f=h*Mr)),f>u&&(u=f),c=r.indexOf(i,c+1);return l[s]=u,u}function Xo(e){return e.toLowerCase().replace(As," ")}function Jf(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,gn(e,t,Xo(e),Xo(t),0,0,{})}var Tt='[cmdk-group=""]',$r='[cmdk-group-items=""]',Zf='[cmdk-group-heading=""]',Ns='[cmdk-item=""]',Yo=`${Ns}:not([aria-disabled="true"])`,pn="cmdk-item-select",vt="data-value",eh=(e,t,r)=>Jf(e,t,r),Is=m.createContext(void 0),Lt=()=>m.useContext(Is),Ls=m.createContext(void 0),Gn=()=>m.useContext(Ls),Ps=m.createContext(void 0),zs=m.forwardRef((e,t)=>{let r=yt(()=>{var v,z;return{search:"",value:(z=(v=e.value)!=null?v:e.defaultValue)!=null?z:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=yt(()=>new Set),a=yt(()=>new Map),o=yt(()=>new Map),l=yt(()=>new Set),s=Ds(e),{label:i,children:c,value:u,onValueChange:f,filter:h,shouldFilter:d,loop:y,disablePointerSelection:w=!1,vimBindings:C=!0,...A}=e,S=ft(),j=ft(),T=ft(),I=m.useRef(null),P=dh();gt(()=>{if(u!==void 0){let v=u.trim();r.current.value=v,p.emit()}},[u]),gt(()=>{P(6,b)},[]);let p=m.useMemo(()=>({subscribe:v=>(l.current.add(v),()=>l.current.delete(v)),snapshot:()=>r.current,setState:(v,z,V)=>{var $,Q,W,X;if(!Object.is(r.current[v],z)){if(r.current[v]=z,v==="search")O(),R(),P(1,N);else if(v==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ae=document.getElementById(T);ae?ae.focus():($=document.getElementById(S))==null||$.focus()}if(P(7,()=>{var ae;r.current.selectedItemId=(ae=H())==null?void 0:ae.id,p.emit()}),V||P(5,b),((Q=s.current)==null?void 0:Q.value)!==void 0){let ae=z??"";(X=(W=s.current).onValueChange)==null||X.call(W,ae);return}}p.emit()}},emit:()=>{l.current.forEach(v=>v())}}),[]),_=m.useMemo(()=>({value:(v,z,V)=>{var $;z!==(($=o.current.get(v))==null?void 0:$.value)&&(o.current.set(v,{value:z,keywords:V}),r.current.filtered.items.set(v,x(z,V)),P(2,()=>{R(),p.emit()}))},item:(v,z)=>(n.current.add(v),z&&(a.current.has(z)?a.current.get(z).add(v):a.current.set(z,new Set([v]))),P(3,()=>{O(),R(),r.current.value||N(),p.emit()}),()=>{o.current.delete(v),n.current.delete(v),r.current.filtered.items.delete(v);let V=H();P(4,()=>{O(),(V==null?void 0:V.getAttribute("id"))===v&&N(),p.emit()})}),group:v=>(a.current.has(v)||a.current.set(v,new Set),()=>{o.current.delete(v),a.current.delete(v)}),filter:()=>s.current.shouldFilter,label:i||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:T,labelId:j,listInnerRef:I}),[]);function x(v,z){var V,$;let Q=($=(V=s.current)==null?void 0:V.filter)!=null?$:eh;return v?Q(v,r.current.search,z):0}function R(){if(!r.current.search||s.current.shouldFilter===!1)return;let v=r.current.filtered.items,z=[];r.current.filtered.groups.forEach($=>{let Q=a.current.get($),W=0;Q.forEach(X=>{let ae=v.get(X);W=Math.max(ae,W)}),z.push([$,W])});let V=I.current;K().sort(($,Q)=>{var W,X;let ae=$.getAttribute("id"),ne=Q.getAttribute("id");return((W=v.get(ne))!=null?W:0)-((X=v.get(ae))!=null?X:0)}).forEach($=>{let Q=$.closest($r);Q?Q.appendChild($.parentElement===Q?$:$.closest(`${$r} > *`)):V.appendChild($.parentElement===V?$:$.closest(`${$r} > *`))}),z.sort(($,Q)=>Q[1]-$[1]).forEach($=>{var Q;let W=(Q=I.current)==null?void 0:Q.querySelector(`${Tt}[${vt}="${encodeURIComponent($[0])}"]`);W==null||W.parentElement.appendChild(W)})}function N(){let v=K().find(V=>V.getAttribute("aria-disabled")!=="true"),z=v==null?void 0:v.getAttribute(vt);p.setState("value",z||void 0)}function O(){var v,z,V,$;if(!r.current.search||s.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let Q=0;for(let W of n.current){let X=(z=(v=o.current.get(W))==null?void 0:v.value)!=null?z:"",ae=($=(V=o.current.get(W))==null?void 0:V.keywords)!=null?$:[],ne=x(X,ae);r.current.filtered.items.set(W,ne),ne>0&&Q++}for(let[W,X]of a.current)for(let ae of X)if(r.current.filtered.items.get(ae)>0){r.current.filtered.groups.add(W);break}r.current.filtered.count=Q}function b(){var v,z,V;let $=H();$&&(((v=$.parentElement)==null?void 0:v.firstChild)===$&&((V=(z=$.closest(Tt))==null?void 0:z.querySelector(Zf))==null||V.scrollIntoView({block:"nearest"})),$.scrollIntoView({block:"nearest"}))}function H(){var v;return(v=I.current)==null?void 0:v.querySelector(`${Ns}[aria-selected="true"]`)}function K(){var v;return Array.from(((v=I.current)==null?void 0:v.querySelectorAll(Yo))||[])}function D(v){let z=K()[v];z&&p.setState("value",z.getAttribute(vt))}function k(v){var z;let V=H(),$=K(),Q=$.findIndex(X=>X===V),W=$[Q+v];(z=s.current)!=null&&z.loop&&(W=Q+v<0?$[$.length-1]:Q+v===$.length?$[0]:$[Q+v]),W&&p.setState("value",W.getAttribute(vt))}function E(v){let z=H(),V=z==null?void 0:z.closest(Tt),$;for(;V&&!$;)V=v>0?ch(V,Tt):uh(V,Tt),$=V==null?void 0:V.querySelector(Yo);$?p.setState("value",$.getAttribute(vt)):k(v)}let B=()=>D(K().length-1),le=v=>{v.preventDefault(),v.metaKey?B():v.altKey?E(1):k(1)},F=v=>{v.preventDefault(),v.metaKey?D(0):v.altKey?E(-1):k(-1)};return m.createElement(_e.div,{ref:t,tabIndex:-1,...A,"cmdk-root":"",onKeyDown:v=>{var z;(z=A.onKeyDown)==null||z.call(A,v);let V=v.nativeEvent.isComposing||v.keyCode===229;if(!(v.defaultPrevented||V))switch(v.key){case"n":case"j":{C&&v.ctrlKey&&le(v);break}case"ArrowDown":{le(v);break}case"p":case"k":{C&&v.ctrlKey&&F(v);break}case"ArrowUp":{F(v);break}case"Home":{v.preventDefault(),D(0);break}case"End":{v.preventDefault(),B();break}case"Enter":{v.preventDefault();let $=H();if($){let Q=new Event(pn);$.dispatchEvent(Q)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:hh},i),ur(e,v=>m.createElement(Ls.Provider,{value:p},m.createElement(Is.Provider,{value:_},v))))}),th=m.forwardRef((e,t)=>{var r,n;let a=ft(),o=m.useRef(null),l=m.useContext(Ps),s=Lt(),i=Ds(e),c=(n=(r=i.current)==null?void 0:r.forceMount)!=null?n:l==null?void 0:l.forceMount;gt(()=>{if(!c)return s.item(a,l==null?void 0:l.id)},[c]);let u=Os(a,o,[e.value,e.children,o],e.keywords),f=Gn(),h=st(P=>P.value&&P.value===u.current),d=st(P=>c||s.filter()===!1?!0:P.search?P.filtered.items.get(a)>0:!0);m.useEffect(()=>{let P=o.current;if(!(!P||e.disabled))return P.addEventListener(pn,y),()=>P.removeEventListener(pn,y)},[d,e.onSelect,e.disabled]);function y(){var P,p;w(),(p=(P=i.current).onSelect)==null||p.call(P,u.current)}function w(){f.setState("value",u.current,!0)}if(!d)return null;let{disabled:C,value:A,onSelect:S,forceMount:j,keywords:T,...I}=e;return m.createElement(_e.div,{ref:Rt(o,t),...I,id:a,"cmdk-item":"",role:"option","aria-disabled":!!C,"aria-selected":!!h,"data-disabled":!!C,"data-selected":!!h,onPointerMove:C||s.getDisablePointerSelection()?void 0:w,onClick:C?void 0:y},e.children)}),rh=m.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...o}=e,l=ft(),s=m.useRef(null),i=m.useRef(null),c=ft(),u=Lt(),f=st(d=>a||u.filter()===!1?!0:d.search?d.filtered.groups.has(l):!0);gt(()=>u.group(l),[]),Os(l,s,[e.value,e.heading,i]);let h=m.useMemo(()=>({id:l,forceMount:a}),[a]);return m.createElement(_e.div,{ref:Rt(s,t),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&m.createElement("div",{ref:i,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),ur(e,d=>m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},m.createElement(Ps.Provider,{value:h},d))))}),nh=m.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=m.useRef(null),o=st(l=>!l.search);return!r&&!o?null:m.createElement(_e.div,{ref:Rt(a,t),...n,"cmdk-separator":"",role:"separator"})}),oh=m.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,o=Gn(),l=st(c=>c.search),s=st(c=>c.selectedItemId),i=Lt();return m.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),m.createElement(_e.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":i.listId,"aria-labelledby":i.labelId,"aria-activedescendant":s,id:i.inputId,type:"text",value:a?e.value:l,onChange:c=>{a||o.setState("search",c.target.value),r==null||r(c.target.value)}})}),ah=m.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,o=m.useRef(null),l=m.useRef(null),s=st(c=>c.selectedItemId),i=Lt();return m.useEffect(()=>{if(l.current&&o.current){let c=l.current,u=o.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let d=c.offsetHeight;u.style.setProperty("--cmdk-list-height",d.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(f),h.unobserve(c)}}},[]),m.createElement(_e.div,{ref:Rt(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":n,id:i.listId},ur(e,c=>m.createElement("div",{ref:Rt(l,i.listInnerRef),"cmdk-list-sizer":""},c)))}),sh=m.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:o,container:l,...s}=e;return m.createElement(ja,{open:r,onOpenChange:n},m.createElement(Ca,{container:l},m.createElement(Cn,{"cmdk-overlay":"",className:a}),m.createElement(Tn,{"aria-label":e.label,"cmdk-dialog":"",className:o},m.createElement(zs,{ref:t,...s}))))}),ih=m.forwardRef((e,t)=>st(r=>r.filtered.count===0)?m.createElement(_e.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),lh=m.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...o}=e;return m.createElement(_e.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},ur(e,l=>m.createElement("div",{"aria-hidden":!0},l)))}),Ae=Object.assign(zs,{List:ah,Item:th,Input:oh,Group:rh,Separator:nh,Dialog:sh,Empty:ih,Loading:lh});function ch(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function uh(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Ds(e){let t=m.useRef(e);return gt(()=>{t.current=e}),t}var gt=typeof window>"u"?m.useEffect:m.useLayoutEffect;function yt(e){let t=m.useRef();return t.current===void 0&&(t.current=e()),t}function st(e){let t=Gn(),r=()=>e(t.snapshot());return m.useSyncExternalStore(t.subscribe,r,r)}function Os(e,t,r,n=[]){let a=m.useRef(),o=Lt();return gt(()=>{var l;let s=(()=>{var c;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():a.current}})(),i=n.map(c=>c.trim());o.value(e,s,i),(l=t.current)==null||l.setAttribute(vt,s),a.current=s}),a}var dh=()=>{let[e,t]=m.useState(),r=yt(()=>new Map);return gt(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function fh(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ur({asChild:e,children:t},r){return e&&m.isValidElement(t)?m.cloneElement(fh(t),{ref:t.ref},r(t.props.children)):r(t)}var hh={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const dr=m.forwardRef(({className:e,...t},r)=>g.jsx(Ae,{ref:r,className:ue("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t}));dr.displayName=Ae.displayName;const Mn=m.forwardRef(({className:e,...t},r)=>g.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[g.jsx(es,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),g.jsx(Ae.Input,{ref:r,className:ue("placeholder:text-muted-foreground flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Mn.displayName=Ae.Input.displayName;const fr=m.forwardRef(({className:e,...t},r)=>g.jsx(Ae.List,{ref:r,className:ue("max-h-[300px] overflow-x-hidden overflow-y-auto",e),...t}));fr.displayName=Ae.List.displayName;const Fn=m.forwardRef((e,t)=>g.jsx(Ae.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Fn.displayName=Ae.Empty.displayName;const Et=m.forwardRef(({className:e,...t},r)=>g.jsx(Ae.Group,{ref:r,className:ue("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t}));Et.displayName=Ae.Group.displayName;const gh=m.forwardRef(({className:e,...t},r)=>g.jsx(Ae.Separator,{ref:r,className:ue("bg-border -mx-1 h-px",e),...t}));gh.displayName=Ae.Separator.displayName;const kt=m.forwardRef(({className:e,...t},r)=>g.jsx(Ae.Item,{ref:r,className:ue("data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));kt.displayName=Ae.Item.displayName;const ph=({layout:e,autoRunFor:t,mainLayout:r})=>{const n=Be(),[a,o]=m.useState(!1),l=m.useRef(null),{t:s}=Se(),i=m.useCallback(()=>{if(n)try{const u=n.getGraph();if(!u||u.order===0)return;const f=r.positions();_a(u,f,{duration:300})}catch(u){console.error("Error updating positions:",u),l.current&&(window.clearInterval(l.current),l.current=null,o(!1))}},[n,r]),c=m.useCallback(()=>{if(a){console.log("Stopping layout animation"),l.current&&(window.clearInterval(l.current),l.current=null);try{typeof e.kill=="function"?(e.kill(),console.log("Layout algorithm killed")):typeof e.stop=="function"&&(e.stop(),console.log("Layout algorithm stopped"))}catch(u){console.error("Error stopping layout algorithm:",u)}o(!1)}else console.log("Starting layout animation"),i(),l.current=window.setInterval(()=>{i()},200),o(!0),setTimeout(()=>{if(l.current){console.log("Auto-stopping layout animation after 3 seconds"),window.clearInterval(l.current),l.current=null,o(!1);try{typeof e.kill=="function"?e.kill():typeof e.stop=="function"&&e.stop()}catch(u){console.error("Error stopping layout algorithm:",u)}}},3e3)},[a,e,i]);return m.useEffect(()=>{if(!n){console.log("No sigma instance available");return}let u=null;return t!==void 0&&t>-1&&n.getGraph().order>0&&(console.log("Auto-starting layout animation"),i(),l.current=window.setInterval(()=>{i()},200),o(!0),t>0&&(u=window.setTimeout(()=>{console.log("Auto-stopping layout animation after timeout"),l.current&&(window.clearInterval(l.current),l.current=null),o(!1)},t))),()=>{l.current&&(window.clearInterval(l.current),l.current=null),u&&window.clearTimeout(u),o(!1)}},[t,n,i]),g.jsx(we,{size:"icon",onClick:c,tooltip:s(a?"graphPanel.sideBar.layoutsControl.stopAnimation":"graphPanel.sideBar.layoutsControl.startAnimation"),variant:Ie,children:a?g.jsx(Cu,{}):g.jsx(Au,{})})},mh=()=>{const e=Be(),{t}=Se(),[r,n]=m.useState("Circular"),[a,o]=m.useState(!1),l=Z.use.graphLayoutMaxIterations(),s=ff(),i=lf(),c=Bf(),u=Gf({maxIterations:l,settings:{margin:5,expansion:1.1,gridSize:1,ratio:1,speed:3}}),f=bf({maxIterations:l,settings:{attraction:3e-4,repulsion:.02,gravity:.02,inertia:.4,maxMove:100}}),h=Ts({iterations:l}),d=Mf(),y=wf(),w=jf(),C=m.useMemo(()=>({Circular:{layout:s},Circlepack:{layout:i},Random:{layout:c},Noverlaps:{layout:u,worker:d},"Force Directed":{layout:f,worker:y},"Force Atlas":{layout:h,worker:w}}),[i,s,f,h,u,c,y,d,w]),A=m.useCallback(S=>{console.debug("Running layout:",S);const{positions:j}=C[S].layout;try{const T=e.getGraph();if(!T){console.error("No graph available");return}const I=j();console.log("Positions calculated, animating nodes"),_a(T,I,{duration:400}),n(S)}catch(T){console.error("Error running layout:",T)}},[C,e]);return g.jsxs("div",{children:[g.jsx("div",{children:C[r]&&"worker"in C[r]&&g.jsx(ph,{layout:C[r].worker,mainLayout:C[r].layout})}),g.jsx("div",{children:g.jsxs(Pn,{open:a,onOpenChange:o,children:[g.jsx(zn,{asChild:!0,children:g.jsx(we,{size:"icon",variant:Ie,onClick:()=>o(S=>!S),tooltip:t("graphPanel.sideBar.layoutsControl.layoutGraph"),children:g.jsx(gu,{})})}),g.jsx(lr,{side:"right",align:"start",sideOffset:8,collisionPadding:5,sticky:"always",className:"p-1 min-w-auto",children:g.jsx(dr,{children:g.jsx(fr,{children:g.jsx(Et,{children:Object.keys(C).map(S=>g.jsx(kt,{onSelect:()=>{A(S)},className:"cursor-pointer text-xs",children:t(`graphPanel.sideBar.layoutsControl.layouts.${S}`)},S))})})})})]})})]})},vh=()=>{const e=m.useContext(Oa);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Gt=e=>!!(e.type.startsWith("mouse")&&e.buttons!==0),yh=({disableHoverEffect:e})=>{const t=Be(),r=Sa(),n=ji(),a=Z.use.graphLayoutMaxIterations(),{assign:o}=Ts({iterations:a}),{theme:l}=vh(),s=Z.use.enableHideUnselectedEdges(),i=Z.use.enableEdgeEvents(),c=Z.use.showEdgeLabel(),u=Z.use.showNodeLabel(),f=Z.use.minEdgeSize(),h=Z.use.maxEdgeSize(),d=te.use.selectedNode(),y=te.use.focusedNode(),w=te.use.selectedEdge(),C=te.use.focusedEdge(),A=te.use.sigmaGraph();return m.useEffect(()=>{if(A&&t){try{typeof t.setGraph=="function"?(t.setGraph(A),console.log("Binding graph to sigma instance")):(t.graph=A,console.warn("Simgma missing setGraph function, set graph property directly"))}catch(S){console.error("Error setting graph on sigma instance:",S)}o(),console.log("Initial layout applied to graph")}},[t,A,o,a]),m.useEffect(()=>{t&&(te.getState().sigmaInstance||(console.log("Setting sigma instance from GraphControl"),te.getState().setSigmaInstance(t)))},[t]),m.useEffect(()=>{const{setFocusedNode:S,setSelectedNode:j,setFocusedEdge:T,setSelectedEdge:I,clearSelection:P}=te.getState(),p={enterNode:_=>{Gt(_.event.original)||t.getGraph().hasNode(_.node)&&S(_.node)},leaveNode:_=>{Gt(_.event.original)||S(null)},clickNode:_=>{t.getGraph().hasNode(_.node)&&(j(_.node),I(null))},clickStage:()=>P()};i&&(p.clickEdge=_=>{I(_.edge),j(null)},p.enterEdge=_=>{Gt(_.event.original)||T(_.edge)},p.leaveEdge=_=>{Gt(_.event.original)||T(null)}),r(p)},[r,i,t]),m.useEffect(()=>{if(t&&A){const S=t.getGraph();let j=Number.MAX_SAFE_INTEGER,T=0;S.forEachEdge(P=>{const p=S.getEdgeAttribute(P,"originalWeight")||1;typeof p=="number"&&(j=Math.min(j,p),T=Math.max(T,p))});const I=T-j;if(I>0){const P=h-f;S.forEachEdge(p=>{const _=S.getEdgeAttribute(p,"originalWeight")||1;if(typeof _=="number"){const x=f+P*Math.pow((_-j)/I,.5);S.setEdgeAttribute(p,"size",x)}})}else S.forEachEdge(P=>{S.setEdgeAttribute(P,"size",f)});t.refresh()}},[t,A,f,h]),m.useEffect(()=>{const S=l==="dark",j=S?Jr:void 0,T=S?nl:void 0;n({enableEdgeEvents:i,renderEdgeLabels:c,renderLabels:u,nodeReducer:(I,P)=>{const p=t.getGraph(),_={...P,highlighted:P.highlighted||!1,labelColor:j};if(!e){_.highlighted=!1;const x=y||d,R=C||w;if(x&&p.hasNode(x))try{(I===x||p.neighbors(x).includes(I))&&(_.highlighted=!0,I===d&&(_.borderColor=rl))}catch(N){console.error("Error in nodeReducer:",N)}else if(R&&p.hasEdge(R))p.extremities(R).includes(I)&&(_.highlighted=!0,_.size=3);else return _;_.highlighted?S&&(_.labelColor=el):_.color=tl}return _},edgeReducer:(I,P)=>{const p=t.getGraph(),_={...P,hidden:!1,labelColor:j,color:T};if(!e){const x=y||d;if(x&&p.hasNode(x))try{s?p.extremities(I).includes(x)||(_.hidden=!0):p.extremities(I).includes(x)&&(_.color=to)}catch(R){console.error("Error in edgeReducer:",R)}else{const R=w&&p.hasEdge(w)?w:null,N=C&&p.hasEdge(C)?C:null;(R||N)&&(I===R?_.color=ol:I===N?_.color=to:s&&(_.hidden=!0))}}return _}})},[d,y,w,C,n,t,e,l,s,i,c,u]),null},bh=()=>{const{zoomIn:e,zoomOut:t,reset:r}=wa({duration:200,factor:1.5}),n=Be(),{t:a}=Se(),o=m.useCallback(()=>e(),[e]),l=m.useCallback(()=>t(),[t]),s=m.useCallback(()=>{if(n)try{n.setCustomBBox(null),n.refresh();const u=n.getGraph();if(!(u!=null&&u.order)||u.nodes().length===0){r();return}n.getCamera().animate({x:.5,y:.5,ratio:1.1},{duration:1e3})}catch(u){console.error("Error resetting zoom:",u),r()}},[n,r]),i=m.useCallback(()=>{if(!n)return;const u=n.getCamera(),h=u.angle+Math.PI/8;u.animate({angle:h},{duration:200})},[n]),c=m.useCallback(()=>{if(!n)return;const u=n.getCamera(),h=u.angle-Math.PI/8;u.animate({angle:h},{duration:200})},[n]);return g.jsxs(g.Fragment,{children:[g.jsx(we,{variant:Ie,onClick:i,tooltip:a("graphPanel.sideBar.zoomControl.rotateCamera"),size:"icon",children:g.jsx(Ou,{})}),g.jsx(we,{variant:Ie,onClick:c,tooltip:a("graphPanel.sideBar.zoomControl.rotateCameraCounterClockwise"),size:"icon",children:g.jsx(zu,{})}),g.jsx(we,{variant:Ie,onClick:s,tooltip:a("graphPanel.sideBar.zoomControl.resetZoom"),size:"icon",children:g.jsx(cu,{})}),g.jsx(we,{variant:Ie,onClick:o,tooltip:a("graphPanel.sideBar.zoomControl.zoomIn"),size:"icon",children:g.jsx(td,{})}),g.jsx(we,{variant:Ie,onClick:l,tooltip:a("graphPanel.sideBar.zoomControl.zoomOut"),size:"icon",children:g.jsx(nd,{})})]})},wh=()=>{const{isFullScreen:e,toggle:t}=Ai(),{t:r}=Se();return g.jsx(g.Fragment,{children:e?g.jsx(we,{variant:Ie,onClick:t,tooltip:r("graphPanel.sideBar.fullScreenControl.windowed"),size:"icon",children:g.jsx(Su,{})}):g.jsx(we,{variant:Ie,onClick:t,tooltip:r("graphPanel.sideBar.fullScreenControl.fullScreen"),size:"icon",children:g.jsx(wu,{})})})};var hr="Checkbox",[xh]=kn(hr),[_h,$n]=xh(hr);function Sh(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:o,form:l,name:s,onCheckedChange:i,required:c,value:u="on",internal_do_not_use_render:f}=e,[h,d]=ka({prop:r,defaultProp:a??!1,onChange:i,caller:hr}),[y,w]=m.useState(null),[C,A]=m.useState(null),S=m.useRef(!1),j=y?!!l||!!y.closest("form"):!0,T={checked:h,disabled:o,setChecked:d,control:y,setControl:w,name:s,form:l,value:u,hasConsumerStoppedPropagationRef:S,required:c,defaultChecked:ot(a)?!1:a,isFormControl:j,bubbleInput:C,setBubbleInput:A};return g.jsx(_h,{scope:t,...T,children:Eh(f)?f(T):n})}var Gs="CheckboxTrigger",Ms=m.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:o,value:l,disabled:s,checked:i,required:c,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:d,bubbleInput:y}=$n(Gs,e),w=Ve(a,u),C=m.useRef(i);return m.useEffect(()=>{const A=o==null?void 0:o.form;if(A){const S=()=>f(C.current);return A.addEventListener("reset",S),()=>A.removeEventListener("reset",S)}},[o,f]),g.jsx(_e.button,{type:"button",role:"checkbox","aria-checked":ot(i)?"mixed":i,"aria-required":c,"data-state":Vs(i),"data-disabled":s?"":void 0,disabled:s,value:l,...n,ref:w,onKeyDown:ke(t,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:ke(r,A=>{f(S=>ot(S)?!0:!S),y&&d&&(h.current=A.isPropagationStopped(),h.current||A.stopPropagation())})})});Ms.displayName=Gs;var Hn=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:l,disabled:s,value:i,onCheckedChange:c,form:u,...f}=e;return g.jsx(Sh,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:s,required:l,onCheckedChange:c,name:n,form:u,value:i,internal_do_not_use_render:({isFormControl:h})=>g.jsxs(g.Fragment,{children:[g.jsx(Ms,{...f,ref:t,__scopeCheckbox:r}),h&&g.jsx(Bs,{__scopeCheckbox:r})]})})});Hn.displayName=hr;var Fs="CheckboxIndicator",$s=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,o=$n(Fs,r);return g.jsx(_t,{present:n||ot(o.checked)||o.checked===!0,children:g.jsx(_e.span,{"data-state":Vs(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});$s.displayName=Fs;var Hs="CheckboxBubbleInput",Bs=m.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:l,required:s,disabled:i,name:c,value:u,form:f,bubbleInput:h,setBubbleInput:d}=$n(Hs,e),y=Ve(r,d),w=Wi(o),C=Xi(n);m.useEffect(()=>{const S=h;if(!S)return;const j=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(j,"checked").set,P=!a.current;if(w!==o&&I){const p=new Event("click",{bubbles:P});S.indeterminate=ot(o),I.call(S,ot(o)?!1:o),S.dispatchEvent(p)}},[h,w,o,a]);const A=m.useRef(ot(o)?!1:o);return g.jsx(_e.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??A.current,required:s,disabled:i,name:c,value:u,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Bs.displayName=Hs;function Eh(e){return typeof e=="function"}function ot(e){return e==="indeterminate"}function Vs(e){return ot(e)?"indeterminate":e?"checked":"unchecked"}const qs=m.forwardRef(({className:e,...t},r)=>g.jsx(Hn,{ref:r,className:ue("peer border-primary ring-offset-background focus-visible:ring-ring data-[state=checked]:bg-muted data-[state=checked]:text-muted-foreground h-4 w-4 shrink-0 rounded-sm border focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:g.jsx($s,{className:ue("flex items-center justify-center text-current"),children:g.jsx(Za,{className:"h-4 w-4"})})}));qs.displayName=Hn.displayName;var kh="Separator",Ko="horizontal",Ch=["horizontal","vertical"],Us=m.forwardRef((e,t)=>{const{decorative:r,orientation:n=Ko,...a}=e,o=Th(n)?n:Ko,s=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return g.jsx(_e.div,{"data-orientation":o,...s,...a,ref:t})});Us.displayName=kh;function Th(e){return Ch.includes(e)}var Ws=Us;const bt=m.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>g.jsx(Ws,{ref:a,decorative:r,orientation:t,className:ue("bg-border shrink-0",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));bt.displayName=Ws.displayName;const tt=({checked:e,onCheckedChange:t,label:r})=>{const n=`checkbox-${r.toLowerCase().replace(/\s+/g,"-")}`;return g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(qs,{id:n,checked:e,onCheckedChange:t}),g.jsx("label",{htmlFor:n,className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r})]})},Hr=({value:e,onEditFinished:t,label:r,min:n,max:a,defaultValue:o})=>{const{t:l}=Se(),[s,i]=m.useState(e),c=`input-${r.toLowerCase().replace(/\s+/g,"-")}`;m.useEffect(()=>{i(e)},[e]);const u=m.useCallback(d=>{const y=d.target.value.trim();if(y.length===0){i(null);return}const w=Number.parseInt(y);if(!isNaN(w)&&w!==s){if(n!==void 0&&w<n||a!==void 0&&w>a)return;i(w)}},[s,n,a]),f=m.useCallback(()=>{s!==null&&e!==s&&t(s)},[e,s,t]),h=m.useCallback(()=>{o!==void 0&&e!==o&&(i(o),t(o))},[o,e,t]);return g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{htmlFor:c,className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(At,{id:c,type:"number",value:s===null?"":s,onChange:u,className:"h-6 w-full min-w-0 pr-1",min:n,max:a,onBlur:f,onKeyDown:d=>{d.key==="Enter"&&f()}}),o!==void 0&&g.jsx(we,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0 hover:bg-muted text-muted-foreground hover:text-foreground",onClick:h,type:"button",title:l("graphPanel.sideBar.settings.resetToDefault"),children:g.jsx(ts,{className:"h-3.5 w-3.5"})})]})]})};function Rh(){const[e,t]=m.useState(!1),r=Z.use.showPropertyPanel(),n=Z.use.showNodeSearchBar(),a=Z.use.showNodeLabel(),o=Z.use.enableEdgeEvents(),l=Z.use.enableNodeDrag(),s=Z.use.enableHideUnselectedEdges(),i=Z.use.showEdgeLabel(),c=Z.use.minEdgeSize(),u=Z.use.maxEdgeSize(),f=Z.use.graphQueryMaxDepth(),h=Z.use.graphMaxNodes(),d=Z.use.backendMaxGraphNodes(),y=Z.use.graphLayoutMaxIterations(),w=Z.use.enableHealthCheck(),C=m.useCallback(()=>Z.setState(b=>({enableNodeDrag:!b.enableNodeDrag})),[]),A=m.useCallback(()=>Z.setState(b=>({enableEdgeEvents:!b.enableEdgeEvents})),[]),S=m.useCallback(()=>Z.setState(b=>({enableHideUnselectedEdges:!b.enableHideUnselectedEdges})),[]),j=m.useCallback(()=>Z.setState(b=>({showEdgeLabel:!b.showEdgeLabel})),[]),T=m.useCallback(()=>Z.setState(b=>({showPropertyPanel:!b.showPropertyPanel})),[]),I=m.useCallback(()=>Z.setState(b=>({showNodeSearchBar:!b.showNodeSearchBar})),[]),P=m.useCallback(()=>Z.setState(b=>({showNodeLabel:!b.showNodeLabel})),[]),p=m.useCallback(()=>Z.setState(b=>({enableHealthCheck:!b.enableHealthCheck})),[]),_=m.useCallback(b=>{if(b<1)return;Z.setState({graphQueryMaxDepth:b});const H=Z.getState().queryLabel;Z.getState().setQueryLabel(""),setTimeout(()=>{Z.getState().setQueryLabel(H)},300)},[]),x=m.useCallback(b=>{const H=d||1e3;b<1||b>H||Z.getState().setGraphMaxNodes(b,!0)},[d]),R=m.useCallback(b=>{b<1||Z.setState({graphLayoutMaxIterations:b})},[]),{t:N}=Se(),O=()=>t(!1);return g.jsx(g.Fragment,{children:g.jsxs(Pn,{open:e,onOpenChange:t,children:[g.jsx(zn,{asChild:!0,children:g.jsx(we,{variant:Ie,tooltip:N("graphPanel.sideBar.settings.settings"),size:"icon",children:g.jsx(Bu,{})})}),g.jsx(lr,{side:"right",align:"end",sideOffset:8,collisionPadding:5,className:"p-2 max-w-[200px]",onCloseAutoFocus:b=>b.preventDefault(),children:g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx(tt,{checked:w,onCheckedChange:p,label:N("graphPanel.sideBar.settings.healthCheck")}),g.jsx(bt,{}),g.jsx(tt,{checked:r,onCheckedChange:T,label:N("graphPanel.sideBar.settings.showPropertyPanel")}),g.jsx(tt,{checked:n,onCheckedChange:I,label:N("graphPanel.sideBar.settings.showSearchBar")}),g.jsx(bt,{}),g.jsx(tt,{checked:a,onCheckedChange:P,label:N("graphPanel.sideBar.settings.showNodeLabel")}),g.jsx(tt,{checked:l,onCheckedChange:C,label:N("graphPanel.sideBar.settings.nodeDraggable")}),g.jsx(bt,{}),g.jsx(tt,{checked:i,onCheckedChange:j,label:N("graphPanel.sideBar.settings.showEdgeLabel")}),g.jsx(tt,{checked:s,onCheckedChange:S,label:N("graphPanel.sideBar.settings.hideUnselectedEdges")}),g.jsx(tt,{checked:o,onCheckedChange:A,label:N("graphPanel.sideBar.settings.edgeEvents")}),g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{htmlFor:"edge-size-min",className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:N("graphPanel.sideBar.settings.edgeSizeRange")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(At,{id:"edge-size-min",type:"number",value:c,onChange:b=>{const H=Number(b.target.value);!isNaN(H)&&H>=1&&H<=u&&Z.setState({minEdgeSize:H})},className:"h-6 w-16 min-w-0 pr-1",min:1,max:Math.min(u,10)}),g.jsx("span",{children:"-"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(At,{id:"edge-size-max",type:"number",value:u,onChange:b=>{const H=Number(b.target.value);!isNaN(H)&&H>=c&&H>=1&&H<=10&&Z.setState({maxEdgeSize:H})},className:"h-6 w-16 min-w-0 pr-1",min:c,max:10}),g.jsx(we,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0 hover:bg-muted text-muted-foreground hover:text-foreground",onClick:()=>Z.setState({minEdgeSize:1,maxEdgeSize:5}),type:"button",title:N("graphPanel.sideBar.settings.resetToDefault"),children:g.jsx(ts,{className:"h-3.5 w-3.5"})})]})]})]}),g.jsx(bt,{}),g.jsx(Hr,{label:N("graphPanel.sideBar.settings.maxQueryDepth"),min:1,value:f,defaultValue:3,onEditFinished:_}),g.jsx(Hr,{label:`${N("graphPanel.sideBar.settings.maxNodes")} (≤ ${d||1e3})`,min:1,max:d||1e3,value:h,defaultValue:d||1e3,onEditFinished:x}),g.jsx(Hr,{label:N("graphPanel.sideBar.settings.maxLayoutIterations"),min:1,max:30,value:y,defaultValue:15,onEditFinished:R}),g.jsx(bt,{}),g.jsx(we,{onClick:O,variant:"outline",size:"sm",className:"ml-auto px-4",children:N("graphPanel.sideBar.settings.save")})]})})]})})}const jh="ENTRIES",Xs="KEYS",Ys="VALUES",Ee="";class Br{constructor(t,r){const n=t._tree,a=Array.from(n.keys());this.set=t,this._type=r,this._path=a.length>0?[{node:n,keys:a}]:[]}next(){const t=this.dive();return this.backtrack(),t}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:t,keys:r}=pt(this._path);if(pt(r)===Ee)return{done:!1,value:this.result()};const n=t.get(pt(r));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const t=pt(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:t})=>pt(t)).filter(t=>t!==Ee).join("")}value(){return pt(this._path).node.get(Ee)}result(){switch(this._type){case Ys:return this.value();case Xs:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const pt=e=>e[e.length-1],Ah=(e,t,r)=>{const n=new Map;if(t===void 0)return n;const a=t.length+1,o=a+r,l=new Uint8Array(o*a).fill(r+1);for(let s=0;s<a;++s)l[s]=s;for(let s=1;s<o;++s)l[s*a]=s;return Ks(e,t,r,n,l,1,a,""),n},Ks=(e,t,r,n,a,o,l,s)=>{const i=o*l;e:for(const c of e.keys())if(c===Ee){const u=a[i-1];u<=r&&n.set(s,[e.get(c),u])}else{let u=o;for(let f=0;f<c.length;++f,++u){const h=c[f],d=l*u,y=d-l;let w=a[d];const C=Math.max(0,u-r-1),A=Math.min(l-1,u+r);for(let S=C;S<A;++S){const j=h!==t[S],T=a[y+S]+ +j,I=a[y+S+1]+1,P=a[d+S]+1,p=a[d+S+1]=Math.min(T,I,P);p<w&&(w=p)}if(w>r)continue e}Ks(e.get(c),t,r,n,a,u,l,s+c)}};class nt{constructor(t=new Map,r=""){this._size=void 0,this._tree=t,this._prefix=r}atPrefix(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");const[r,n]=Zt(this._tree,t.slice(this._prefix.length));if(r===void 0){const[a,o]=Bn(n);for(const l of a.keys())if(l!==Ee&&l.startsWith(o)){const s=new Map;return s.set(l.slice(o.length),a.get(l)),new nt(s,t)}}return new nt(r,t)}clear(){this._size=void 0,this._tree.clear()}delete(t){return this._size=void 0,Nh(this._tree,t)}entries(){return new Br(this,jh)}forEach(t){for(const[r,n]of this)t(r,n,this)}fuzzyGet(t,r){return Ah(this._tree,t,r)}get(t){const r=mn(this._tree,t);return r!==void 0?r.get(Ee):void 0}has(t){const r=mn(this._tree,t);return r!==void 0&&r.has(Ee)}keys(){return new Br(this,Xs)}set(t,r){if(typeof t!="string")throw new Error("key must be a string");return this._size=void 0,Vr(this._tree,t).set(Ee,r),this}get size(){if(this._size)return this._size;this._size=0;const t=this.entries();for(;!t.next().done;)this._size+=1;return this._size}update(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;const n=Vr(this._tree,t);return n.set(Ee,r(n.get(Ee))),this}fetch(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;const n=Vr(this._tree,t);let a=n.get(Ee);return a===void 0&&n.set(Ee,a=r()),a}values(){return new Br(this,Ys)}[Symbol.iterator](){return this.entries()}static from(t){const r=new nt;for(const[n,a]of t)r.set(n,a);return r}static fromObject(t){return nt.from(Object.entries(t))}}const Zt=(e,t,r=[])=>{if(t.length===0||e==null)return[e,r];for(const n of e.keys())if(n!==Ee&&t.startsWith(n))return r.push([e,n]),Zt(e.get(n),t.slice(n.length),r);return r.push([e,t]),Zt(void 0,"",r)},mn=(e,t)=>{if(t.length===0||e==null)return e;for(const r of e.keys())if(r!==Ee&&t.startsWith(r))return mn(e.get(r),t.slice(r.length))},Vr=(e,t)=>{const r=t.length;e:for(let n=0;e&&n<r;){for(const o of e.keys())if(o!==Ee&&t[n]===o[0]){const l=Math.min(r-n,o.length);let s=1;for(;s<l&&t[n+s]===o[s];)++s;const i=e.get(o);if(s===o.length)e=i;else{const c=new Map;c.set(o.slice(s),i),e.set(t.slice(n,n+s),c),e.delete(o),e=c}n+=s;continue e}const a=new Map;return e.set(t.slice(n),a),a}return e},Nh=(e,t)=>{const[r,n]=Zt(e,t);if(r!==void 0){if(r.delete(Ee),r.size===0)Qs(n);else if(r.size===1){const[a,o]=r.entries().next().value;Js(n,a,o)}}},Qs=e=>{if(e.length===0)return;const[t,r]=Bn(e);if(t.delete(r),t.size===0)Qs(e.slice(0,-1));else if(t.size===1){const[n,a]=t.entries().next().value;n!==Ee&&Js(e.slice(0,-1),n,a)}},Js=(e,t,r)=>{if(e.length===0)return;const[n,a]=Bn(e);n.set(a+t,r),n.delete(a)},Bn=e=>e[e.length-1],Vn="or",Zs="and",Ih="and_not";class at{constructor(t){if((t==null?void 0:t.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const r=t.autoVacuum==null||t.autoVacuum===!0?Wr:t.autoVacuum;this._options={...Ur,...t,autoVacuum:r,searchOptions:{...Qo,...t.searchOptions||{}},autoSuggestOptions:{...Oh,...t.autoSuggestOptions||{}}},this._index=new nt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=yn,this.addFields(this._options.fields)}add(t){const{extractField:r,stringifyField:n,tokenize:a,processTerm:o,fields:l,idField:s}=this._options,i=r(t,s);if(i==null)throw new Error(`MiniSearch: document does not have ID field "${s}"`);if(this._idToShortId.has(i))throw new Error(`MiniSearch: duplicate ID ${i}`);const c=this.addDocumentId(i);this.saveStoredFields(c,t);for(const u of l){const f=r(t,u);if(f==null)continue;const h=a(n(f,u),u),d=this._fieldIds[u],y=new Set(h).size;this.addFieldLength(c,d,this._documentCount-1,y);for(const w of h){const C=o(w,u);if(Array.isArray(C))for(const A of C)this.addTerm(d,c,A);else C&&this.addTerm(d,c,C)}}}addAll(t){for(const r of t)this.add(r)}addAllAsync(t,r={}){const{chunkSize:n=10}=r,a={chunk:[],promise:Promise.resolve()},{chunk:o,promise:l}=t.reduce(({chunk:s,promise:i},c,u)=>(s.push(c),(u+1)%n===0?{chunk:[],promise:i.then(()=>new Promise(f=>setTimeout(f,0))).then(()=>this.addAll(s))}:{chunk:s,promise:i}),a);return l.then(()=>this.addAll(o))}remove(t){const{tokenize:r,processTerm:n,extractField:a,stringifyField:o,fields:l,idField:s}=this._options,i=a(t,s);if(i==null)throw new Error(`MiniSearch: document does not have ID field "${s}"`);const c=this._idToShortId.get(i);if(c==null)throw new Error(`MiniSearch: cannot remove document with ID ${i}: it is not in the index`);for(const u of l){const f=a(t,u);if(f==null)continue;const h=r(o(f,u),u),d=this._fieldIds[u],y=new Set(h).size;this.removeFieldLength(c,d,this._documentCount,y);for(const w of h){const C=n(w,u);if(Array.isArray(C))for(const A of C)this.removeTerm(d,c,A);else C&&this.removeTerm(d,c,C)}}this._storedFields.delete(c),this._documentIds.delete(c),this._idToShortId.delete(i),this._fieldLength.delete(c),this._documentCount-=1}removeAll(t){if(t)for(const r of t)this.remove(r);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new nt,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(t){const r=this._idToShortId.get(t);if(r==null)throw new Error(`MiniSearch: cannot discard document with ID ${t}: it is not in the index`);this._idToShortId.delete(t),this._documentIds.delete(r),this._storedFields.delete(r),(this._fieldLength.get(r)||[]).forEach((n,a)=>{this.removeFieldLength(r,a,this._documentCount,n)}),this._fieldLength.delete(r),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:t,minDirtCount:r,batchSize:n,batchWait:a}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:a},{minDirtCount:r,minDirtFactor:t})}discardAll(t){const r=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const n of t)this.discard(n)}finally{this._options.autoVacuum=r}this.maybeAutoVacuum()}replace(t){const{idField:r,extractField:n}=this._options,a=n(t,r);this.discard(a),this.add(t)}vacuum(t={}){return this.conditionalVacuum(t)}conditionalVacuum(t,r){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&r,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=yn,this.performVacuuming(t,n)}),this._enqueuedVacuum)):this.vacuumConditionsMet(r)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)}async performVacuuming(t,r){const n=this._dirtCount;if(this.vacuumConditionsMet(r)){const a=t.batchSize||vn.batchSize,o=t.batchWait||vn.batchWait;let l=1;for(const[s,i]of this._index){for(const[c,u]of i)for(const[f]of u)this._documentIds.has(f)||(u.size<=1?i.delete(c):u.delete(f));this._index.get(s).size===0&&this._index.delete(s),l%a===0&&await new Promise(c=>setTimeout(c,o)),l+=1}this._dirtCount-=n}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(t){if(t==null)return!0;let{minDirtCount:r,minDirtFactor:n}=t;return r=r||Wr.minDirtCount,n=n||Wr.minDirtFactor,this.dirtCount>=r&&this.dirtFactor>=n}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(t){return this._idToShortId.has(t)}getStoredFields(t){const r=this._idToShortId.get(t);if(r!=null)return this._storedFields.get(r)}search(t,r={}){const{searchOptions:n}=this._options,a={...n,...r},o=this.executeQuery(t,r),l=[];for(const[s,{score:i,terms:c,match:u}]of o){const f=c.length||1,h={id:this._documentIds.get(s),score:i*f,terms:Object.keys(u),queryTerms:c,match:u};Object.assign(h,this._storedFields.get(s)),(a.filter==null||a.filter(h))&&l.push(h)}return t===at.wildcard&&a.boostDocument==null||l.sort(Zo),l}autoSuggest(t,r={}){r={...this._options.autoSuggestOptions,...r};const n=new Map;for(const{score:o,terms:l}of this.search(t,r)){const s=l.join(" "),i=n.get(s);i!=null?(i.score+=o,i.count+=1):n.set(s,{score:o,terms:l,count:1})}const a=[];for(const[o,{score:l,terms:s,count:i}]of n)a.push({suggestion:o,terms:s,score:l/i});return a.sort(Zo),a}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),r)}static async loadJSONAsync(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(t),r)}static getDefault(t){if(Ur.hasOwnProperty(t))return qr(Ur,t);throw new Error(`MiniSearch: unknown option "${t}"`)}static loadJS(t,r){const{index:n,documentIds:a,fieldLength:o,storedFields:l,serializationVersion:s}=t,i=this.instantiateMiniSearch(t,r);i._documentIds=Mt(a),i._fieldLength=Mt(o),i._storedFields=Mt(l);for(const[c,u]of i._documentIds)i._idToShortId.set(u,c);for(const[c,u]of n){const f=new Map;for(const h of Object.keys(u)){let d=u[h];s===1&&(d=d.ds),f.set(parseInt(h,10),Mt(d))}i._index.set(c,f)}return i}static async loadJSAsync(t,r){const{index:n,documentIds:a,fieldLength:o,storedFields:l,serializationVersion:s}=t,i=this.instantiateMiniSearch(t,r);i._documentIds=await Ft(a),i._fieldLength=await Ft(o),i._storedFields=await Ft(l);for(const[u,f]of i._documentIds)i._idToShortId.set(f,u);let c=0;for(const[u,f]of n){const h=new Map;for(const d of Object.keys(f)){let y=f[d];s===1&&(y=y.ds),h.set(parseInt(d,10),await Ft(y))}++c%1e3===0&&await ei(0),i._index.set(u,h)}return i}static instantiateMiniSearch(t,r){const{documentCount:n,nextId:a,fieldIds:o,averageFieldLength:l,dirtCount:s,serializationVersion:i}=t;if(i!==1&&i!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const c=new at(r);return c._documentCount=n,c._nextId=a,c._idToShortId=new Map,c._fieldIds=o,c._avgFieldLength=l,c._dirtCount=s||0,c._index=new nt,c}executeQuery(t,r={}){if(t===at.wildcard)return this.executeWildcardQuery(r);if(typeof t!="string"){const h={...r,...t,queries:void 0},d=t.queries.map(y=>this.executeQuery(y,h));return this.combineResults(d,h.combineWith)}const{tokenize:n,processTerm:a,searchOptions:o}=this._options,l={tokenize:n,processTerm:a,...o,...r},{tokenize:s,processTerm:i}=l,f=s(t).flatMap(h=>i(h)).filter(h=>!!h).map(Dh(l)).map(h=>this.executeQuerySpec(h,l));return this.combineResults(f,l.combineWith)}executeQuerySpec(t,r){const n={...this._options.searchOptions,...r},a=(n.fields||this._options.fields).reduce((w,C)=>({...w,[C]:qr(n.boost,C)||1}),{}),{boostDocument:o,weights:l,maxFuzzy:s,bm25:i}=n,{fuzzy:c,prefix:u}={...Qo.weights,...l},f=this._index.get(t.term),h=this.termResults(t.term,t.term,1,t.termBoost,f,a,o,i);let d,y;if(t.prefix&&(d=this._index.atPrefix(t.term)),t.fuzzy){const w=t.fuzzy===!0?.2:t.fuzzy,C=w<1?Math.min(s,Math.round(t.term.length*w)):w;C&&(y=this._index.fuzzyGet(t.term,C))}if(d)for(const[w,C]of d){const A=w.length-t.term.length;if(!A)continue;y==null||y.delete(w);const S=u*w.length/(w.length+.3*A);this.termResults(t.term,w,S,t.termBoost,C,a,o,i,h)}if(y)for(const w of y.keys()){const[C,A]=y.get(w);if(!A)continue;const S=c*w.length/(w.length+A);this.termResults(t.term,w,S,t.termBoost,C,a,o,i,h)}return h}executeWildcardQuery(t){const r=new Map,n={...this._options.searchOptions,...t};for(const[a,o]of this._documentIds){const l=n.boostDocument?n.boostDocument(o,"",this._storedFields.get(a)):1;r.set(a,{score:l,terms:[],match:{}})}return r}combineResults(t,r=Vn){if(t.length===0)return new Map;const n=r.toLowerCase(),a=Lh[n];if(!a)throw new Error(`Invalid combination operator: ${r}`);return t.reduce(a)||new Map}toJSON(){const t=[];for(const[r,n]of this._index){const a={};for(const[o,l]of n)a[o]=Object.fromEntries(l);t.push([r,a])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:t,serializationVersion:2}}termResults(t,r,n,a,o,l,s,i,c=new Map){if(o==null)return c;for(const u of Object.keys(l)){const f=l[u],h=this._fieldIds[u],d=o.get(h);if(d==null)continue;let y=d.size;const w=this._avgFieldLength[h];for(const C of d.keys()){if(!this._documentIds.has(C)){this.removeTerm(h,C,r),y-=1;continue}const A=s?s(this._documentIds.get(C),r,this._storedFields.get(C)):1;if(!A)continue;const S=d.get(C),j=this._fieldLength.get(C)[h],T=zh(S,y,this._documentCount,j,w,i),I=n*a*f*A*T,P=c.get(C);if(P){P.score+=I,Gh(P.terms,t);const p=qr(P.match,r);p?p.push(u):P.match[r]=[u]}else c.set(C,{score:I,terms:[t],match:{[r]:[u]}})}}return c}addTerm(t,r,n){const a=this._index.fetch(n,ea);let o=a.get(t);if(o==null)o=new Map,o.set(r,1),a.set(t,o);else{const l=o.get(r);o.set(r,(l||0)+1)}}removeTerm(t,r,n){if(!this._index.has(n)){this.warnDocumentChanged(r,t,n);return}const a=this._index.fetch(n,ea),o=a.get(t);o==null||o.get(r)==null?this.warnDocumentChanged(r,t,n):o.get(r)<=1?o.size<=1?a.delete(t):o.delete(r):o.set(r,o.get(r)-1),this._index.get(n).size===0&&this._index.delete(n)}warnDocumentChanged(t,r,n){for(const a of Object.keys(this._fieldIds))if(this._fieldIds[a]===r){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(t)} has changed before removal: term "${n}" was not present in field "${a}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(t){const r=this._nextId;return this._idToShortId.set(t,r),this._documentIds.set(r,t),this._documentCount+=1,this._nextId+=1,r}addFields(t){for(let r=0;r<t.length;r++)this._fieldIds[t[r]]=r}addFieldLength(t,r,n,a){let o=this._fieldLength.get(t);o==null&&this._fieldLength.set(t,o=[]),o[r]=a;const s=(this._avgFieldLength[r]||0)*n+a;this._avgFieldLength[r]=s/(n+1)}removeFieldLength(t,r,n,a){if(n===1){this._avgFieldLength[r]=0;return}const o=this._avgFieldLength[r]*n-a;this._avgFieldLength[r]=o/(n-1)}saveStoredFields(t,r){const{storeFields:n,extractField:a}=this._options;if(n==null||n.length===0)return;let o=this._storedFields.get(t);o==null&&this._storedFields.set(t,o={});for(const l of n){const s=a(r,l);s!==void 0&&(o[l]=s)}}}at.wildcard=Symbol("*");const qr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0,Lh={[Vn]:(e,t)=>{for(const r of t.keys()){const n=e.get(r);if(n==null)e.set(r,t.get(r));else{const{score:a,terms:o,match:l}=t.get(r);n.score=n.score+a,n.match=Object.assign(n.match,l),Jo(n.terms,o)}}return e},[Zs]:(e,t)=>{const r=new Map;for(const n of t.keys()){const a=e.get(n);if(a==null)continue;const{score:o,terms:l,match:s}=t.get(n);Jo(a.terms,l),r.set(n,{score:a.score+o,terms:a.terms,match:Object.assign(a.match,s)})}return r},[Ih]:(e,t)=>{for(const r of t.keys())e.delete(r);return e}},Ph={k:1.2,b:.7,d:.5},zh=(e,t,r,n,a,o)=>{const{k:l,b:s,d:i}=o;return Math.log(1+(r-t+.5)/(t+.5))*(i+e*(l+1)/(e+l*(1-s+s*n/a)))},Dh=e=>(t,r,n)=>{const a=typeof e.fuzzy=="function"?e.fuzzy(t,r,n):e.fuzzy||!1,o=typeof e.prefix=="function"?e.prefix(t,r,n):e.prefix===!0,l=typeof e.boostTerm=="function"?e.boostTerm(t,r,n):1;return{term:t,fuzzy:a,prefix:o,termBoost:l}},Ur={idField:"id",extractField:(e,t)=>e[t],stringifyField:(e,t)=>e.toString(),tokenize:e=>e.split(Mh),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,t)=>{typeof(console==null?void 0:console[e])=="function"&&console[e](t)},autoVacuum:!0},Qo={combineWith:Vn,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Ph},Oh={combineWith:Zs,prefix:(e,t,r)=>t===r.length-1},vn={batchSize:1e3,batchWait:10},yn={minDirtFactor:.1,minDirtCount:20},Wr={...vn,...yn},Gh=(e,t)=>{e.includes(t)||e.push(t)},Jo=(e,t)=>{for(const r of t)e.includes(r)||e.push(r)},Zo=({score:e},{score:t})=>t-e,ea=()=>new Map,Mt=e=>{const t=new Map;for(const r of Object.keys(e))t.set(parseInt(r,10),e[r]);return t},Ft=async e=>{const t=new Map;let r=0;for(const n of Object.keys(e))t.set(parseInt(n,10),e[n]),++r%1e3===0&&await ei(0);return t},ei=e=>new Promise(t=>setTimeout(t,e)),Mh=/[\n\r\p{Z}\p{P}]+/u;function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ta.apply(null,arguments)}function Nt(e){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(e)}function Fh(e,t){if(Nt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $h(e){var t=Fh(e,"string");return Nt(t)=="symbol"?t:t+""}function km(e,t,r){return(t=$h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Hh(e){if(Array.isArray(e))return bn(e)}function Bh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vh(e,t){if(e){if(typeof e=="string")return bn(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bn(e,t):void 0}}function qh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cm(e){return Hh(e)||Bh(e)||Vh(e)||qh()}function Uh(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Tm(e,t){if(e==null)return{};var r,n,a=Uh(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const Wh={index:new at({fields:[]})};m.createContext(Wh);const wn=({label:e,color:t,hidden:r,labels:n={}})=>Y.createElement("div",{className:"node"},Y.createElement("span",{className:"render "+(r?"circle":"disc"),style:{backgroundColor:t||"#000"}}),Y.createElement("span",{className:`label ${r?"text-muted":""} ${e?"":"text-italic"}`},e||n.no_label||"No label")),Xh=({id:e,labels:t})=>{const r=Be(),n=m.useMemo((()=>{const a=r.getGraph().getNodeAttributes(e),o=r.getSetting("nodeReducer");return Object.assign(Object.assign({color:r.getSetting("defaultNodeColor")},a),o?o(e,a):{})}),[r,e]);return Y.createElement(wn,Object.assign({},n,{labels:t}))},Yh=({label:e,color:t,source:r,target:n,hidden:a,directed:o,labels:l={}})=>Y.createElement("div",{className:"edge"},Y.createElement(wn,Object.assign({},r,{labels:l})),Y.createElement("div",{className:"body"},Y.createElement("div",{className:"render"},Y.createElement("span",{className:a?"dotted":"dash",style:{borderColor:t||"#000"}})," ",o&&Y.createElement("span",{className:"arrow",style:{borderTopColor:t||"#000"}})),Y.createElement("span",{className:`label ${a?"text-muted":""} ${e?"":"fst-italic"}`},e||l.no_label||"No label")),Y.createElement(wn,Object.assign({},n,{labels:l}))),Kh=({id:e,labels:t})=>{const r=Be(),n=m.useMemo((()=>{const a=r.getGraph().getEdgeAttributes(e),o=r.getSetting("nodeReducer"),l=r.getSetting("edgeReducer"),s=r.getGraph().getNodeAttributes(r.getGraph().source(e)),i=r.getGraph().getNodeAttributes(r.getGraph().target(e));return Object.assign(Object.assign(Object.assign({color:r.getSetting("defaultEdgeColor"),directed:r.getGraph().isDirected(e)},a),l?l(e,a):{}),{source:Object.assign(Object.assign({color:r.getSetting("defaultNodeColor")},s),o?o(e,s):{}),target:Object.assign(Object.assign({color:r.getSetting("defaultNodeColor")},i),o?o(e,i):{})})}),[r,e]);return Y.createElement(Yh,Object.assign({},n,{labels:t}))};function qn(e,t){const[r,n]=m.useState(e);return m.useEffect(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),r}function Qh({fetcher:e,preload:t,filterFn:r,renderOption:n,getOptionValue:a,notFound:o,loadingSkeleton:l,label:s,placeholder:i="Select...",value:c,onChange:u,onFocus:f,disabled:h=!1,className:d,noResultsMessage:y}){const[w,C]=m.useState(!1),[A,S]=m.useState(!1),[j,T]=m.useState([]),[I,P]=m.useState(!1),[p,_]=m.useState(null),[x,R]=m.useState(""),N=qn(x,t?0:150),O=m.useRef(null);m.useEffect(()=>{C(!0)},[]),m.useEffect(()=>{const k=E=>{O.current&&!O.current.contains(E.target)&&A&&S(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[A]);const b=m.useCallback(async k=>{try{P(!0),_(null);const E=await e(k);T(E)}catch(E){_(E instanceof Error?E.message:"Failed to fetch options")}finally{P(!1)}},[e]);m.useEffect(()=>{w&&(t?N&&T(k=>k.filter(E=>r?r(E,N):!0)):b(N))},[w,N,t,r,b]),m.useEffect(()=>{!w||!c||b(c)},[w,c,b]);const H=m.useCallback(k=>{u(k),requestAnimationFrame(()=>{const E=document.activeElement;E==null||E.blur(),S(!1)})},[u]),K=m.useCallback(()=>{S(!0),b(x)},[x,b]),D=m.useCallback(k=>{k.target.closest(".cmd-item")&&k.preventDefault()},[]);return g.jsx("div",{ref:O,className:ue(h&&"cursor-not-allowed opacity-50",d),onMouseDown:D,children:g.jsxs(dr,{shouldFilter:!1,className:"bg-transparent",children:[g.jsxs("div",{children:[g.jsx(Mn,{placeholder:i,value:x,className:"max-h-8",onFocus:K,onValueChange:k=>{R(k),A||S(!0)}}),I&&g.jsx("div",{className:"absolute top-1/2 right-2 flex -translate-y-1/2 transform items-center",children:g.jsx(Ln,{className:"h-4 w-4 animate-spin"})})]}),g.jsxs(fr,{hidden:!A,children:[p&&g.jsx("div",{className:"text-destructive p-4 text-center",children:p}),I&&j.length===0&&(l||g.jsx(Jh,{})),!I&&!p&&j.length===0&&(o||g.jsx(Fn,{children:y??`No ${s.toLowerCase()} found.`})),g.jsx(Et,{children:j.map((k,E)=>g.jsxs(Y.Fragment,{children:[g.jsx(kt,{value:a(k),onSelect:H,onMouseMove:()=>f(a(k)),className:"truncate cmd-item",children:n(k)},a(k)+`${E}`),E!==j.length-1&&g.jsx("div",{className:"bg-foreground/10 h-[1px]"},`divider-${E}`)]},a(k)+`-fragment-${E}`))})]})]})})}function Jh(){return g.jsx(Et,{children:g.jsx(kt,{disabled:!0,children:g.jsxs("div",{className:"flex w-full items-center gap-2",children:[g.jsx("div",{className:"bg-muted h-6 w-6 animate-pulse rounded-full"}),g.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[g.jsx("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"}),g.jsx("div",{className:"bg-muted h-3 w-16 animate-pulse rounded"})]})]})})})}const Xr="__message_item",Zh=({id:e})=>{const t=te.use.sigmaGraph();return t!=null&&t.hasNode(e)?g.jsx(Xh,{id:e}):null};function eg(e){return g.jsxs("div",{children:[e.type==="nodes"&&g.jsx(Zh,{id:e.id}),e.type==="edges"&&g.jsx(Kh,{id:e.id}),e.type==="message"&&g.jsx("div",{children:e.message})]})}const tg=({onChange:e,onFocus:t,value:r})=>{const{t:n}=Se(),a=te.use.sigmaGraph(),o=te.use.searchEngine();m.useEffect(()=>{a&&te.getState().resetSearchEngine()},[a]),m.useEffect(()=>{if(!a||a.nodes().length===0||o)return;const s=new at({idField:"id",fields:["label"],searchOptions:{prefix:!0,fuzzy:.2,boost:{label:2}}}),i=a.nodes().map(c=>({id:c,label:a.getNodeAttribute(c,"label")}));s.addAll(i),te.getState().setSearchEngine(s)},[a,o]);const l=m.useCallback(async s=>{if(t&&t(null),!a||!o)return[];if(a.nodes().length===0)return[];if(!s)return a.nodes().filter(u=>a.hasNode(u)).slice(0,Pt).map(u=>({id:u,type:"nodes"}));let i=o.search(s).filter(c=>a.hasNode(c.id)).map(c=>({id:c.id,type:"nodes"}));if(i.length<5){const c=new Set(i.map(f=>f.id)),u=a.nodes().filter(f=>{if(c.has(f))return!1;const h=a.getNodeAttribute(f,"label");return h&&typeof h=="string"&&!h.toLowerCase().startsWith(s.toLowerCase())&&h.toLowerCase().includes(s.toLowerCase())}).map(f=>({id:f,type:"nodes"}));i=[...i,...u]}return i.length<=Pt?i:[...i.slice(0,Pt),{type:"message",id:Xr,message:n("graphPanel.search.message",{count:i.length-Pt})}]},[a,o,t,n]);return g.jsx(Qh,{className:"bg-background/60 w-24 rounded-xl border-1 opacity-60 backdrop-blur-lg transition-all hover:w-fit hover:opacity-100",fetcher:l,renderOption:eg,getOptionValue:s=>s.id,value:r&&r.type!=="message"?r.id:null,onChange:s=>{s!==Xr&&e(s?{id:s,type:"nodes"}:null)},onFocus:s=>{s!==Xr&&t&&t(s?{id:s,type:"nodes"}:null)},label:"item",placeholder:n("graphPanel.search.placeholder")})},rg=({...e})=>g.jsx(tg,{...e});function ng({fetcher:e,preload:t,filterFn:r,renderOption:n,getOptionValue:a,getDisplayValue:o,notFound:l,loadingSkeleton:s,label:i,placeholder:c="Select...",value:u,onChange:f,disabled:h=!1,className:d,triggerClassName:y,searchInputClassName:w,noResultsMessage:C,triggerTooltip:A,clearable:S=!0}){const[j,T]=m.useState(!1),[I,P]=m.useState(!1),[p,_]=m.useState([]),[x,R]=m.useState(!1),[N,O]=m.useState(null),[b,H]=m.useState(u),[K,D]=m.useState(null),[k,E]=m.useState(""),B=qn(k,t?0:150),[le,F]=m.useState([]),[v,z]=m.useState(null);m.useEffect(()=>{T(!0),H(u)},[u]),m.useEffect(()=>{u&&(!p.length||!K)?z(g.jsx("div",{children:u})):K&&z(null)},[u,p.length,K]),m.useEffect(()=>{if(u&&p.length>0){const $=p.find(Q=>a(Q)===u);$&&D($)}},[u,p,a]),m.useEffect(()=>{j||(async()=>{try{R(!0),O(null);const Q=await e(u);F(Q),_(Q)}catch(Q){O(Q instanceof Error?Q.message:"Failed to fetch options")}finally{R(!1)}})()},[j,e,u]),m.useEffect(()=>{const $=async()=>{try{R(!0),O(null);const Q=await e(B);F(Q),_(Q)}catch(Q){O(Q instanceof Error?Q.message:"Failed to fetch options")}finally{R(!1)}};j&&t?t&&_(B?le.filter(Q=>r?r(Q,B):!0):le):$()},[e,B,j,t,r]);const V=m.useCallback($=>{const Q=S&&$===b?"":$;H(Q),D(p.find(W=>a(W)===Q)||null),f(Q),P(!1)},[b,f,S,p,a]);return g.jsxs(Pn,{open:I,onOpenChange:P,children:[g.jsx(zn,{asChild:!0,children:g.jsxs(we,{variant:"outline",role:"combobox","aria-expanded":I,className:ue("justify-between",h&&"cursor-not-allowed opacity-50",y),disabled:h,tooltip:A,side:"bottom",children:[u==="*"?g.jsx("div",{children:"*"}):K?o(K):v||c,g.jsx(Zc,{className:"opacity-50",size:10})]})}),g.jsx(lr,{className:ue("p-0",d),onCloseAutoFocus:$=>$.preventDefault(),align:"start",sideOffset:8,collisionPadding:5,children:g.jsxs(dr,{shouldFilter:!1,children:[g.jsxs("div",{className:"relative w-full border-b",children:[g.jsx(Mn,{placeholder:`Search ${i.toLowerCase()}...`,value:k,onValueChange:$=>{E($)},className:w}),x&&p.length>0&&g.jsx("div",{className:"absolute top-1/2 right-2 flex -translate-y-1/2 transform items-center",children:g.jsx(Ln,{className:"h-4 w-4 animate-spin"})})]}),g.jsxs(fr,{children:[N&&g.jsx("div",{className:"text-destructive p-4 text-center",children:N}),x&&p.length===0&&(s||g.jsx(og,{})),!x&&!N&&p.length===0&&(l||g.jsx(Fn,{children:C??`No ${i.toLowerCase()} found.`})),g.jsx(Et,{children:p.map(($,Q)=>{const W=a($),X=`option-${Q}-${W.length}`;return g.jsxs(kt,{value:X,onSelect:ae=>{const ne=parseInt(ae.split("-")[1]),se=a(p[ne]);console.log(`CommandItem onSelect: safeValue='${ae}', originalValue='${se}' (length: ${se.length})`),V(se)},className:"truncate",children:[n($),g.jsx(Za,{className:ue("ml-auto h-3 w-3",b===W?"opacity-100":"opacity-0")})]},W)})})]})]})})]})}function og(){return g.jsx(Et,{children:g.jsx(kt,{disabled:!0,children:g.jsxs("div",{className:"flex w-full items-center gap-2",children:[g.jsx("div",{className:"bg-muted h-6 w-6 animate-pulse rounded-full"}),g.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[g.jsx("div",{className:"bg-muted h-4 w-24 animate-pulse rounded"}),g.jsx("div",{className:"bg-muted h-3 w-16 animate-pulse rounded"})]})]})})})}const ag=()=>{const{t:e}=Se(),t=Z.use.queryLabel(),r=te.use.allDatabaseLabels(),n=te.use.labelsFetchAttempted(),a=m.useCallback(()=>{const s=new at({idField:"id",fields:["value"],searchOptions:{prefix:!0,fuzzy:.2,boost:{label:2}}}),i=r.map((c,u)=>({id:u,value:c}));return s.addAll(i),{labels:r,searchEngine:s}},[r]),o=m.useCallback(async s=>{const{labels:i,searchEngine:c}=a();let u=i;if(s&&(u=c.search(s).map(f=>i[f.id]),u.length<15)){const f=new Set(u),h=i.filter(d=>f.has(d)?!1:d&&typeof d=="string"&&!d.toLowerCase().startsWith(s.toLowerCase())&&d.toLowerCase().includes(s.toLowerCase()));u=[...u,...h]}return u.length<=ro?u:[...u.slice(0,ro),"..."]},[a]);m.useEffect(()=>{n&&(r.length>1?t&&t!=="*"&&!r.includes(t)?(console.log(`Label "${t}" not in available labels, setting to "*"`),Z.getState().setQueryLabel("*")):console.log(`Label "${t}" is valid`):t&&r.length<=1&&t&&t!=="*"&&(console.log("Available labels list is empty, setting label to empty"),Z.getState().setQueryLabel("")),te.getState().setLabelsFetchAttempted(!1))},[r,t,n]);const l=m.useCallback(()=>{te.getState().setLabelsFetchAttempted(!1),te.getState().setGraphDataFetchAttempted(!1),te.getState().setLastSuccessfulQueryLabel("");const s=Z.getState().queryLabel;s?(Z.getState().setQueryLabel(""),setTimeout(()=>{Z.getState().setQueryLabel(s)},0)):Z.getState().setQueryLabel("*")},[]);return g.jsxs("div",{className:"flex items-center",children:[g.jsx(we,{size:"icon",variant:Ie,onClick:l,tooltip:e("graphPanel.graphLabels.refreshTooltip"),className:"mr-2",children:g.jsx(Lu,{className:"h-4 w-4"})}),g.jsx(ng,{className:"min-w-[300px]",triggerClassName:"max-h-8",searchInputClassName:"max-h-8",triggerTooltip:e("graphPanel.graphLabels.selectTooltip"),fetcher:o,renderOption:s=>g.jsx("div",{style:{whiteSpace:"pre"},children:s}),getOptionValue:s=>s,getDisplayValue:s=>g.jsx("div",{style:{whiteSpace:"pre"},children:s}),notFound:g.jsx("div",{className:"py-6 text-center text-sm",children:"No labels found"}),label:e("graphPanel.graphLabels.label"),placeholder:e("graphPanel.graphLabels.placeholder"),value:t!==null?t:"*",onChange:s=>{const i=Z.getState().queryLabel;s==="..."&&(s="*"),s===i&&s!=="*"&&(s="*"),te.getState().setGraphDataFetchAttempted(!1),Z.getState().setQueryLabel(s)},clearable:!1})]})},ti=({text:e,className:t,tooltipClassName:r,tooltip:n,side:a,onClick:o})=>n?g.jsx(Ya,{delayDuration:200,children:g.jsxs(Ka,{children:[g.jsx(Qa,{asChild:!0,children:g.jsx("label",{className:ue(t,o!==void 0?"cursor-pointer":void 0),onClick:o,children:e})}),g.jsx(In,{side:a,className:r,children:n})]})}):g.jsx("label",{className:ue(t,o!==void 0?"cursor-pointer":void 0),onClick:o,children:e});var $t={exports:{}},sg=$t.exports,ra;function ig(){return ra||(ra=1,(function(e){(function(t,r,n){function a(i){var c=this,u=s();c.next=function(){var f=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=f|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(i),c.s0<0&&(c.s0+=1),c.s1-=u(i),c.s1<0&&(c.s1+=1),c.s2-=u(i),c.s2<0&&(c.s2+=1),u=null}function o(i,c){return c.c=i.c,c.s0=i.s0,c.s1=i.s1,c.s2=i.s2,c}function l(i,c){var u=new a(i),f=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&o(f,u),h.state=function(){return o(u,{})}),h}function s(){var i=4022871197,c=function(u){u=String(u);for(var f=0;f<u.length;f++){i+=u.charCodeAt(f);var h=.02519603282416938*i;i=h>>>0,h-=i,h*=i,i=h>>>0,h-=i,i+=h*4294967296}return(i>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=l:this.alea=l})(sg,e)})($t)),$t.exports}var Ht={exports:{}},lg=Ht.exports,na;function cg(){return na||(na=1,(function(e){(function(t,r,n){function a(s){var i=this,c="";i.x=0,i.y=0,i.z=0,i.w=0,i.next=function(){var f=i.x^i.x<<11;return i.x=i.y,i.y=i.z,i.z=i.w,i.w^=i.w>>>19^f^f>>>8},s===(s|0)?i.x=s:c+=s;for(var u=0;u<c.length+64;u++)i.x^=c.charCodeAt(u)|0,i.next()}function o(s,i){return i.x=s.x,i.y=s.y,i.z=s.z,i.w=s.w,i}function l(s,i){var c=new a(s),u=i&&i.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var h=c.next()>>>11,d=(c.next()>>>0)/4294967296,y=(h+d)/(1<<21);while(y===0);return y},f.int32=c.next,f.quick=f,u&&(typeof u=="object"&&o(u,c),f.state=function(){return o(c,{})}),f}r&&r.exports?r.exports=l:this.xor128=l})(lg,e)})(Ht)),Ht.exports}var Bt={exports:{}},ug=Bt.exports,oa;function dg(){return oa||(oa=1,(function(e){(function(t,r,n){function a(s){var i=this,c="";i.next=function(){var f=i.x^i.x>>>2;return i.x=i.y,i.y=i.z,i.z=i.w,i.w=i.v,(i.d=i.d+362437|0)+(i.v=i.v^i.v<<4^(f^f<<1))|0},i.x=0,i.y=0,i.z=0,i.w=0,i.v=0,s===(s|0)?i.x=s:c+=s;for(var u=0;u<c.length+64;u++)i.x^=c.charCodeAt(u)|0,u==c.length&&(i.d=i.x<<10^i.x>>>4),i.next()}function o(s,i){return i.x=s.x,i.y=s.y,i.z=s.z,i.w=s.w,i.v=s.v,i.d=s.d,i}function l(s,i){var c=new a(s),u=i&&i.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var h=c.next()>>>11,d=(c.next()>>>0)/4294967296,y=(h+d)/(1<<21);while(y===0);return y},f.int32=c.next,f.quick=f,u&&(typeof u=="object"&&o(u,c),f.state=function(){return o(c,{})}),f}r&&r.exports?r.exports=l:this.xorwow=l})(ug,e)})(Bt)),Bt.exports}var Vt={exports:{}},fg=Vt.exports,aa;function hg(){return aa||(aa=1,(function(e){(function(t,r,n){function a(s){var i=this;i.next=function(){var u=i.x,f=i.i,h,d;return h=u[f],h^=h>>>7,d=h^h<<24,h=u[f+1&7],d^=h^h>>>10,h=u[f+3&7],d^=h^h>>>3,h=u[f+4&7],d^=h^h<<7,h=u[f+7&7],h=h^h<<13,d^=h^h<<9,u[f]=d,i.i=f+1&7,d};function c(u,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],u.x=d,u.i=0,h=256;h>0;--h)u.next()}c(i,s)}function o(s,i){return i.x=s.x.slice(),i.i=s.i,i}function l(s,i){s==null&&(s=+new Date);var c=new a(s),u=i&&i.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var h=c.next()>>>11,d=(c.next()>>>0)/4294967296,y=(h+d)/(1<<21);while(y===0);return y},f.int32=c.next,f.quick=f,u&&(u.x&&o(u,c),f.state=function(){return o(c,{})}),f}r&&r.exports?r.exports=l:this.xorshift7=l})(fg,e)})(Vt)),Vt.exports}var qt={exports:{}},gg=qt.exports,sa;function pg(){return sa||(sa=1,(function(e){(function(t,r,n){function a(s){var i=this;i.next=function(){var u=i.w,f=i.X,h=i.i,d,y;return i.w=u=u+1640531527|0,y=f[h+34&127],d=f[h=h+1&127],y^=y<<13,d^=d<<17,y^=y>>>15,d^=d>>>12,y=f[h]=y^d,i.i=h,y+(u^u>>>16)|0};function c(u,f){var h,d,y,w,C,A=[],S=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,S=Math.max(S,f.length)),y=0,w=-32;w<S;++w)f&&(d^=f.charCodeAt((w+32)%f.length)),w===0&&(C=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,w>=0&&(C=C+1640531527|0,h=A[w&127]^=d+C,y=h==0?y+1:0);for(y>=128&&(A[(f&&f.length||0)&127]=-1),y=127,w=512;w>0;--w)d=A[y+34&127],h=A[y=y+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,A[y]=d^h;u.w=C,u.X=A,u.i=y}c(i,s)}function o(s,i){return i.i=s.i,i.w=s.w,i.X=s.X.slice(),i}function l(s,i){s==null&&(s=+new Date);var c=new a(s),u=i&&i.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var h=c.next()>>>11,d=(c.next()>>>0)/4294967296,y=(h+d)/(1<<21);while(y===0);return y},f.int32=c.next,f.quick=f,u&&(u.X&&o(u,c),f.state=function(){return o(c,{})}),f}r&&r.exports?r.exports=l:this.xor4096=l})(gg,e)})(qt)),qt.exports}var Ut={exports:{}},mg=Ut.exports,ia;function vg(){return ia||(ia=1,(function(e){(function(t,r,n){function a(s){var i=this,c="";i.next=function(){var f=i.b,h=i.c,d=i.d,y=i.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^y,y=y-f|0,i.b=f=f<<20^f>>>12^h,i.c=h=h-d|0,i.d=d<<16^h>>>16^y,i.a=y-f|0},i.a=0,i.b=0,i.c=-1640531527,i.d=1367130551,s===Math.floor(s)?(i.a=s/4294967296|0,i.b=s|0):c+=s;for(var u=0;u<c.length+20;u++)i.b^=c.charCodeAt(u)|0,i.next()}function o(s,i){return i.a=s.a,i.b=s.b,i.c=s.c,i.d=s.d,i}function l(s,i){var c=new a(s),u=i&&i.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var h=c.next()>>>11,d=(c.next()>>>0)/4294967296,y=(h+d)/(1<<21);while(y===0);return y},f.int32=c.next,f.quick=f,u&&(typeof u=="object"&&o(u,c),f.state=function(){return o(c,{})}),f}r&&r.exports?r.exports=l:this.tychei=l})(mg,e)})(Ut)),Ut.exports}var Wt={exports:{}};const yg={},bg=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"})),wg=ki(bg);var xg=Wt.exports,la;function _g(){return la||(la=1,(function(e){(function(t,r,n){var a=256,o=6,l=52,s="random",i=n.pow(a,o),c=n.pow(2,l),u=c*2,f=a-1,h;function d(T,I,P){var p=[];I=I==!0?{entropy:!0}:I||{};var _=A(C(I.entropy?[T,j(r)]:T??S(),3),p),x=new y(p),R=function(){for(var N=x.g(o),O=i,b=0;N<c;)N=(N+b)*a,O*=a,b=x.g(1);for(;N>=u;)N/=2,O/=2,b>>>=1;return(N+b)/O};return R.int32=function(){return x.g(4)|0},R.quick=function(){return x.g(4)/4294967296},R.double=R,A(j(x.S),r),(I.pass||P||function(N,O,b,H){return H&&(H.S&&w(H,x),N.state=function(){return w(x,{})}),b?(n[s]=N,O):N})(R,_,"global"in I?I.global:this==n,I.state)}function y(T){var I,P=T.length,p=this,_=0,x=p.i=p.j=0,R=p.S=[];for(P||(T=[P++]);_<a;)R[_]=_++;for(_=0;_<a;_++)R[_]=R[x=f&x+T[_%P]+(I=R[_])],R[x]=I;(p.g=function(N){for(var O,b=0,H=p.i,K=p.j,D=p.S;N--;)O=D[H=f&H+1],b=b*a+D[f&(D[H]=D[K=f&K+O])+(D[K]=O)];return p.i=H,p.j=K,b})(a)}function w(T,I){return I.i=T.i,I.j=T.j,I.S=T.S.slice(),I}function C(T,I){var P=[],p=typeof T,_;if(I&&p=="object")for(_ in T)try{P.push(C(T[_],I-1))}catch{}return P.length?P:p=="string"?T:T+"\0"}function A(T,I){for(var P=T+"",p,_=0;_<P.length;)I[f&_]=f&(p^=I[f&_]*19)+P.charCodeAt(_++);return j(I)}function S(){try{var T;return h&&(T=h.randomBytes)?T=T(a):(T=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(T)),j(T)}catch{var I=t.navigator,P=I&&I.plugins;return[+new Date,t,P,t.screen,j(r)]}}function j(T){return String.fromCharCode.apply(0,T)}if(A(n.random(),r),e.exports){e.exports=d;try{h=wg}catch{}}else n["seed"+s]=d})(typeof self<"u"?self:xg,[],Math)})(Wt)),Wt.exports}var Yr,ca;function Sg(){if(ca)return Yr;ca=1;var e=ig(),t=cg(),r=dg(),n=hg(),a=pg(),o=vg(),l=_g();return l.alea=e,l.xor128=t,l.xorwow=r,l.xorshift7=n,l.xor4096=a,l.tychei=o,Yr=l,Yr}var Eg=Sg();const xn=He(Eg),kg={unknown:"unknown",未知:"unknown",other:"unknown",category:"category",类别:"category",type:"category",分类:"category",organization:"organization",组织:"organization",org:"organization",company:"organization",公司:"organization",机构:"organization",event:"event",事件:"event",activity:"event",活动:"event",person:"person",人物:"person",people:"person",human:"person",人:"person",animal:"animal",动物:"animal",creature:"animal",生物:"animal",geo:"geo",地理:"geo",geography:"geo",地域:"geo",location:"location",地点:"location",place:"location",address:"location",位置:"location",地址:"location",technology:"technology",技术:"technology",tech:"technology",科技:"technology",equipment:"equipment",设备:"equipment",device:"equipment",装备:"equipment",weapon:"weapon",武器:"weapon",arms:"weapon",军火:"weapon",object:"object",物品:"object",stuff:"object",物体:"object",group:"group",群组:"group",community:"group",社区:"group"},ua={unknown:"#f4d371",category:"#e3493b",organization:"#0f705d",event:"#00bfa0",person:"#4169E1",animal:"#84a3e1",geo:"#ff99cc",location:"#cf6d17",technology:"#b300b3",equipment:"#2F4F4F",weapon:"#4421af",object:"#00cc00",group:"#0f558a"},Cg=["#5a2c6d","#0000ff","#cd071e","#00CED1","#9b3a31","#b2e061","#bd7ebe","#6ef7b3","#003366","#DEB887"],da=e=>{const t="#5D6D7E",r=e?e.toLowerCase():"unknown",n=te.getState().typeColorMap;if(n.has(r))return n.get(r)||t;const a=kg[r];if(a){const c=ua[a],u=new Map(n);return u.set(r,c),te.setState({typeColorMap:u}),c}const o=new Set(Array.from(n.entries()).filter(([,c])=>!Object.values(ua).includes(c)).map(([,c])=>c)),s=Cg.find(c=>!o.has(c))||t,i=new Map(n);return i.set(r,s),te.setState({typeColorMap:i}),s},Tg=e=>{if(!e)return console.log("Graph validation failed: graph is null"),!1;if(!Array.isArray(e.nodes)||!Array.isArray(e.edges))return console.log("Graph validation failed: nodes or edges is not an array"),!1;if(e.nodes.length===0)return console.log("Graph validation failed: nodes array is empty"),!1;for(const t of e.nodes)if(!t.id||!t.labels||!t.properties)return console.log("Graph validation failed: invalid node structure"),!1;for(const t of e.edges)if(!t.id||!t.source||!t.target)return console.log("Graph validation failed: invalid edge structure"),!1;for(const t of e.edges){const r=e.getNode(t.source),n=e.getNode(t.target);if(r==null||n==null)return console.log("Graph validation failed: edge references non-existent node"),!1}return console.log("Graph validation passed"),!0},Rg=async(e,t,r)=>{let n=null;if(!te.getState().lastSuccessfulQueryLabel){console.log("Last successful queryLabel is empty");try{await te.getState().fetchAllDatabaseLabels()}catch(s){console.error("Failed to fetch all database labels:",s)}}te.getState().setLabelsFetchAttempted(!0);const o=e||"*";try{console.log(`Fetching graph label: ${o}, depth: ${t}, nodes: ${r}`),n=await Pa(o,t,r)}catch(s){return jn.getState().setErrorMessage(or(s),"Query Graphs Error!"),null}let l=null;if(n){const s={},i={};for(let h=0;h<n.nodes.length;h++){const d=n.nodes[h];s[d.id]=h,d.x=Math.random(),d.y=Math.random(),d.degree=0,d.size=10}for(let h=0;h<n.edges.length;h++){const d=n.edges[h];i[d.id]=h;const y=s[d.source],w=s[d.target];if(y!==void 0&&y!==void 0){const C=n.nodes[y],A=n.nodes[w];if(!C){console.error(`Source node ${d.source} is undefined`);continue}if(!A){console.error(`Target node ${d.target} is undefined`);continue}C.degree+=1,A.degree+=1}}let c=Number.MAX_SAFE_INTEGER,u=0;for(const h of n.nodes)c=Math.min(c,h.degree),u=Math.max(u,h.degree);const f=u-c;if(f>0){const h=en-dt;for(const d of n.nodes)d.size=Math.round(dt+h*Math.pow((d.degree-c)/f,.5))}l=new fl,l.nodes=n.nodes,l.edges=n.edges,l.nodeIdMap=s,l.edgeIdMap=i,Tg(l)||(l=null,console.warn("Invalid graph data")),console.log("Graph data loaded")}return{rawGraph:l,is_truncated:n.is_truncated}},jg=e=>{var s,i;const t=Z.getState().minEdgeSize,r=Z.getState().maxEdgeSize;if(!e||!e.nodes.length)return console.log("No graph data available, skipping sigma graph creation"),null;const n=new Kr;for(const c of(e==null?void 0:e.nodes)??[]){xn(c.id+Date.now().toString(),{global:!0});const u=Math.random(),f=Math.random();n.addNode(c.id,{label:c.labels.join(", "),color:c.color,x:u,y:f,size:c.size,borderColor:Zr,borderSize:.2})}for(const c of(e==null?void 0:e.edges)??[]){const u=((s=c.properties)==null?void 0:s.weight)!==void 0?Number(c.properties.weight):1;c.dynamicId=n.addEdge(c.source,c.target,{label:((i=c.properties)==null?void 0:i.keywords)||void 0,size:u,originalWeight:u,type:"curvedNoArrow"})}let a=Number.MAX_SAFE_INTEGER,o=0;n.forEachEdge(c=>{const u=n.getEdgeAttribute(c,"originalWeight")||1;a=Math.min(a,u),o=Math.max(o,u)});const l=o-a;if(l>0){const c=r-t;n.forEachEdge(u=>{const f=n.getEdgeAttribute(u,"originalWeight")||1,h=t+c*Math.pow((f-a)/l,.5);n.setEdgeAttribute(u,"size",h)})}else n.forEachEdge(c=>{n.setEdgeAttribute(c,"size",t)});return n},Ag=()=>{const{t:e}=Se(),t=Z.use.queryLabel(),r=te.use.rawGraph(),n=te.use.sigmaGraph(),a=Z.use.graphQueryMaxDepth(),o=Z.use.graphMaxNodes(),l=te.use.isFetching(),s=te.use.nodeToExpand(),i=te.use.nodeToPrune(),c=m.useRef(!1),u=m.useRef(!1),f=m.useRef(!1),h=m.useCallback(A=>(r==null?void 0:r.getNode(A))||null,[r]),d=m.useCallback((A,S=!0)=>(r==null?void 0:r.getEdge(A,S))||null,[r]),y=m.useRef(!1);m.useEffect(()=>{if(!t&&(r!==null||n!==null)){const A=te.getState();A.reset(),A.setGraphDataFetchAttempted(!1),A.setLabelsFetchAttempted(!1),c.current=!1,u.current=!1}},[t,r,n]),m.useEffect(()=>{if(!y.current&&!(!t&&f.current)&&!l&&!te.getState().graphDataFetchAttempted){y.current=!0,te.getState().setGraphDataFetchAttempted(!0);const A=te.getState();A.setIsFetching(!0),A.clearSelection(),A.sigmaGraph&&A.sigmaGraph.forEachNode(P=>{var p;(p=A.sigmaGraph)==null||p.setNodeAttribute(P,"highlighted",!1)}),console.log("Preparing graph data...");const S=t,j=a,T=o;let I;S?I=Rg(S,j,T):(console.log("Query label is empty, show empty graph"),I=Promise.resolve({rawGraph:null,is_truncated:!1})),I.then(P=>{const p=te.getState(),_=P==null?void 0:P.rawGraph;if(_&&_.nodes&&_.nodes.forEach(x=>{var N;const R=(N=x.properties)==null?void 0:N.entity_type;x.color=da(R)}),P!=null&&P.is_truncated&&rt.info(e("graphPanel.dataIsTruncated","Graph data is truncated to Max Nodes")),p.reset(),!_||!_.nodes||_.nodes.length===0){const x=new Kr;x.addNode("empty-graph-node",{label:e("graphPanel.emptyGraph"),color:"#5D6D7E",x:.5,y:.5,size:15,borderColor:Zr,borderSize:.2}),p.setSigmaGraph(x),p.setRawGraph(null),p.setGraphIsEmpty(!0);const R=jn.getState().message,N=R&&R.includes("Authentication required");!N&&S&&Z.getState().setQueryLabel(""),N?console.log("Keep queryLabel for post-login reload"):p.setLastSuccessfulQueryLabel(""),console.log(`Graph data is empty, created graph with empty graph node. Auth error: ${N}`)}else{const x=jg(_);_.buildDynamicMap(),p.setSigmaGraph(x),p.setRawGraph(_),p.setGraphIsEmpty(!1),p.setLastSuccessfulQueryLabel(S),p.setMoveToSelectedNode(!0)}c.current=!0,u.current=!0,y.current=!1,p.setIsFetching(!1),(!_||!_.nodes||_.nodes.length===0)&&!S&&(f.current=!0)}).catch(P=>{console.error("Error fetching graph data:",P);const p=te.getState();p.setIsFetching(!1),c.current=!1,y.current=!1,p.setGraphDataFetchAttempted(!1),p.setLastSuccessfulQueryLabel("")})}},[t,a,o,l,e]),m.useEffect(()=>{s&&((async S=>{var j,T,I,P,p,_;if(!(!S||!n||!r))try{const x=r.getNode(S);if(!x){console.error("Node not found:",S);return}const R=x.labels[0];if(!R){console.error("Node has no label:",S);return}const N=await Pa(R,2,1e3);if(!N||!N.nodes||!N.edges){console.error("Failed to fetch extended graph");return}const O=[];for(const M of N.nodes){xn(M.id,{global:!0});const J=(j=M.properties)==null?void 0:j.entity_type,U=da(J);O.push({id:M.id,labels:M.labels,properties:M.properties,size:10,x:Math.random(),y:Math.random(),color:U,degree:0})}const b=[];for(const M of N.edges)b.push({id:M.id,source:M.source,target:M.target,type:M.type,properties:M.properties,dynamicId:""});const H={};n.forEachNode(M=>{H[M]={x:n.getNodeAttribute(M,"x"),y:n.getNodeAttribute(M,"y")}});const K=new Set(n.nodes()),D=new Set,k=new Set,E=1;let B=0,le=Number.MAX_SAFE_INTEGER,F=0;n.forEachNode(M=>{const J=n.degree(M);B=Math.max(B,J)}),n.forEachEdge(M=>{const J=n.getEdgeAttribute(M,"originalWeight")||1;le=Math.min(le,J),F=Math.max(F,J)});for(const M of O){if(K.has(M.id))continue;b.some(U=>U.source===S&&U.target===M.id||U.target===S&&U.source===M.id)&&D.add(M.id)}const v=new Map,z=new Map,V=new Set;for(const M of b){const J=K.has(M.source)||D.has(M.source),U=K.has(M.target)||D.has(M.target);J&&U?(k.add(M.id),D.has(M.source)?v.set(M.source,(v.get(M.source)||0)+1):K.has(M.source)&&z.set(M.source,(z.get(M.source)||0)+1),D.has(M.target)?v.set(M.target,(v.get(M.target)||0)+1):K.has(M.target)&&z.set(M.target,(z.get(M.target)||0)+1)):(n.hasNode(M.source)?V.add(M.source):D.has(M.source)&&(V.add(M.source),v.set(M.source,(v.get(M.source)||0)+1)),n.hasNode(M.target)?V.add(M.target):D.has(M.target)&&(V.add(M.target),v.set(M.target,(v.get(M.target)||0)+1)))}const $=(M,J,U,q)=>{const L=q-U||1,oe=en-dt;for(const de of J)if(M.hasNode(de)){let re=M.degree(de);re+=1;const ee=Math.min(re,q+1),G=Math.round(dt+oe*Math.pow((ee-U)/L,.5));M.setNodeAttribute(de,"size",G)}},Q=(M,J,U)=>{const q=Z.getState().minEdgeSize,L=Z.getState().maxEdgeSize,oe=U-J||1,de=L-q;M.forEachEdge(re=>{const ee=M.getEdgeAttribute(re,"originalWeight")||1,G=q+de*Math.pow((ee-J)/oe,.5);M.setEdgeAttribute(re,"size",G)})};if(D.size===0){$(n,V,E,B),rt.info(e("graphPanel.propertiesView.node.noNewNodes"));return}for(const[,M]of v.entries())B=Math.max(B,M);for(const[M,J]of z.entries()){const q=n.degree(M)+J;B=Math.max(B,q)}const W=B-E||1,X=en-dt,ae=((T=te.getState().sigmaInstance)==null?void 0:T.getCamera().ratio)||1,ne=Math.max(Math.sqrt(x.size)*4,Math.sqrt(D.size)*3)/ae;xn(Date.now().toString(),{global:!0});const se=Math.random()*2*Math.PI;console.log("nodeSize:",x.size,"nodesToAdd:",D.size),console.log("cameraRatio:",Math.round(ae*100)/100,"spreadFactor:",Math.round(ne*100)/100);for(const M of D){const J=O.find(ee=>ee.id===M),U=v.get(M)||0,q=Math.min(U,B+1),L=Math.round(dt+X*Math.pow((q-E)/W,.5)),oe=2*Math.PI*(Array.from(D).indexOf(M)/D.size),de=((I=H[M])==null?void 0:I.x)||H[x.id].x+Math.cos(se+oe)*ne,re=((P=H[M])==null?void 0:P.y)||H[x.id].y+Math.sin(se+oe)*ne;n.addNode(M,{label:J.labels.join(", "),color:J.color,x:de,y:re,size:L,borderColor:Zr,borderSize:.2}),r.getNode(M)||(J.size=L,J.x=de,J.y=re,J.degree=U,r.nodes.push(J),r.nodeIdMap[M]=r.nodes.length-1)}for(const M of k){const J=b.find(q=>q.id===M);if(n.hasEdge(J.source,J.target))continue;const U=((p=J.properties)==null?void 0:p.weight)!==void 0?Number(J.properties.weight):1;le=Math.min(le,U),F=Math.max(F,U),J.dynamicId=n.addEdge(J.source,J.target,{label:((_=J.properties)==null?void 0:_.keywords)||void 0,size:U,originalWeight:U,type:"curvedNoArrow"}),r.getEdge(J.id,!1)?console.error("Edge already exists in rawGraph:",J.id):(r.edges.push(J),r.edgeIdMap[J.id]=r.edges.length-1,r.edgeDynamicIdMap[J.dynamicId]=r.edges.length-1)}if(r.buildDynamicMap(),te.getState().resetSearchEngine(),$(n,V,E,B),Q(n,le,F),n.hasNode(S)){const M=n.degree(S),J=Math.min(M,B+1),U=Math.round(dt+X*Math.pow((J-E)/W,.5));n.setNodeAttribute(S,"size",U),x.size=U,x.degree=M}}catch(x){console.error("Error expanding node:",x)}})(s),window.setTimeout(()=>{te.getState().triggerNodeExpand(null)},0))},[s,n,r,e]);const w=m.useCallback((A,S)=>{const j=new Set([A]);return S.forEachNode(T=>{if(T===A)return;const I=S.neighbors(T);I.length===1&&I[0]===A&&j.add(T)}),j},[]);return m.useEffect(()=>{i&&((S=>{if(!(!S||!n||!r))try{const j=te.getState();if(!n.hasNode(S)){console.error("Node not found:",S);return}const T=w(S,n);if(T.size===n.nodes().length){rt.error(e("graphPanel.propertiesView.node.deleteAllNodesError"));return}j.clearSelection();for(const I of T){n.dropNode(I);const P=r.nodeIdMap[I];if(P!==void 0){const p=r.edges.filter(_=>_.source===I||_.target===I);for(const _ of p){const x=r.edgeIdMap[_.id];if(x!==void 0){r.edges.splice(x,1);for(const[R,N]of Object.entries(r.edgeIdMap))N>x&&(r.edgeIdMap[R]=N-1);delete r.edgeIdMap[_.id],delete r.edgeDynamicIdMap[_.dynamicId]}}r.nodes.splice(P,1);for(const[_,x]of Object.entries(r.nodeIdMap))x>P&&(r.nodeIdMap[_]=x-1);delete r.nodeIdMap[I]}}r.buildDynamicMap(),te.getState().resetSearchEngine(),T.size>1&&rt.info(e("graphPanel.propertiesView.node.nodesRemoved",{count:T.size}))}catch(j){console.error("Error pruning node:",j)}})(i),window.setTimeout(()=>{te.getState().triggerNodePrune(null)},0))},[i,n,r,w,e]),{lightrageGraph:m.useCallback(()=>{if(n)return n;console.log("Creating new Sigma graph instance");const A=new Kr;return te.getState().setSigmaGraph(A),A},[n]),getNode:h,getEdge:d}},Ng=({name:e})=>{const{t}=Se(),r=n=>{const a=`graphPanel.propertiesView.node.propertyNames.${n}`,o=t(a);return o===a?n:o};return g.jsx("span",{className:"text-primary/60 tracking-wide whitespace-nowrap",children:r(e)})},Ig=({onClick:e})=>g.jsx("div",{children:g.jsx(Ru,{className:"h-3 w-3 text-gray-500 hover:text-gray-700 cursor-pointer",onClick:e})}),Lg=({value:e,onClick:t,tooltip:r})=>g.jsx("div",{className:"flex items-center gap-1 overflow-hidden",children:g.jsx(ti,{className:"hover:bg-primary/20 rounded p-1 overflow-hidden text-ellipsis whitespace-nowrap",tooltipClassName:"max-w-80 -translate-x-15",text:e,tooltip:r||(typeof e=="string"?e:JSON.stringify(e,null,2)),side:"left",onClick:t})}),Pg=({isOpen:e,onClose:t,onSave:r,propertyName:n,initialValue:a,isSubmitting:o=!1})=>{const{t:l}=Se(),[s,i]=m.useState(""),[c,u]=m.useState(null);m.useEffect(()=>{e&&i(a)},[e,a]);const f=y=>{const w=`graphPanel.propertiesView.node.propertyNames.${y}`,C=l(w);return C===w?y:C},h=y=>{switch(y){case"description":return{className:"max-h-[50vh] min-h-[10em] resize-y",style:{height:"70vh",minHeight:"20em",resize:"vertical"}};case"entity_id":return{rows:2,className:"",style:{}};case"keywords":return{rows:4,className:"",style:{}};default:return{rows:5,className:"",style:{}}}},d=async()=>{if(s.trim()!==""){u(null);try{await r(s),t()}catch(y){console.error("Save error:",y),u(typeof y=="object"&&y!==null&&y.message||l("common.saveFailed"))}}};return g.jsx(od,{open:e,onOpenChange:y=>!y&&t(),children:g.jsxs(ns,{className:"sm:max-w-md",children:[g.jsxs(os,{children:[g.jsx(ss,{children:l("graphPanel.propertiesView.editProperty",{property:f(n)})}),g.jsx(is,{children:l("graphPanel.propertiesView.editPropertyDescription")})]}),c&&g.jsx("div",{className:"bg-destructive/15 text-destructive px-4 py-2 rounded-md text-sm mt-2",children:c}),g.jsx("div",{className:"grid gap-4 py-4",children:(()=>{const y=h(n);return n==="description"?g.jsx("textarea",{value:s,onChange:w=>i(w.target.value),className:`border-input focus-visible:ring-ring flex w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 ${y.className}`,style:y.style,disabled:o}):g.jsx("textarea",{value:s,onChange:w=>i(w.target.value),rows:y.rows,className:`border-input focus-visible:ring-ring flex w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm transition-colors focus-visible:ring-1 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 ${y.className}`,disabled:o})})()}),g.jsxs(as,{children:[g.jsx(we,{type:"button",variant:"outline",onClick:t,disabled:o,children:l("common.cancel")}),g.jsx(we,{type:"button",onClick:d,disabled:o,children:o?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"mr-2",children:g.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),l("common.saving")]}):l("common.save")})]})]})})},zg=({name:e,value:t,onClick:r,nodeId:n,edgeId:a,entityId:o,dynamicId:l,entityType:s,sourceId:i,targetId:c,onValueChange:u,isEditable:f=!1,tooltip:h})=>{const{t:d}=Se(),[y,w]=m.useState(!1),[C,A]=m.useState(!1),[S,j]=m.useState(t);m.useEffect(()=>{j(t)},[t]);const T=()=>{f&&!y&&w(!0)},I=()=>{w(!1)},P=async p=>{if(C||p===String(S)){w(!1);return}A(!0);try{if(s==="node"&&o&&n){let _={[e]:p};if(e==="entity_id"){if(await bl(p)){rt.error(d("graphPanel.propertiesView.errors.duplicateName"));return}_={entity_name:p}}await vl(o,_,!0);try{await te.getState().updateNodeAndSelect(n,o,e,p)}catch(x){throw console.error("Error updating node in graph:",x),new Error("Failed to update node in graph")}rt.success(d("graphPanel.propertiesView.success.entityUpdated"))}else if(s==="edge"&&i&&c&&a&&l){const _={[e]:p};await yl(i,c,_);try{await te.getState().updateEdgeAndSelect(a,l,i,c,e,p)}catch(x){throw console.error(`Error updating edge ${i}->${c} in graph:`,x),new Error("Failed to update edge in graph")}rt.success(d("graphPanel.propertiesView.success.relationUpdated"))}w(!1),j(p),u==null||u(p)}catch(_){console.error("Error updating property:",_),rt.error(d("graphPanel.propertiesView.errors.updateFailed"))}finally{A(!1)}};return g.jsxs("div",{className:"flex items-center gap-1 overflow-hidden",children:[g.jsx(Ng,{name:e}),g.jsx(Ig,{onClick:T}),":",g.jsx(Lg,{value:S,onClick:r,tooltip:h||(typeof S=="string"?S:JSON.stringify(S,null,2))}),g.jsx(Pg,{isOpen:y,onClose:I,onSave:P,propertyName:e,initialValue:String(S),isSubmitting:C})]})},Dg=()=>{const{getNode:e,getEdge:t}=Ag(),r=te.use.selectedNode(),n=te.use.focusedNode(),a=te.use.selectedEdge(),o=te.use.focusedEdge(),l=te.use.graphDataVersion(),[s,i]=m.useState(null),[c,u]=m.useState(null);return m.useEffect(()=>{let f=null,h=null;n?(f="node",h=e(n)):r?(f="node",h=e(r)):o?(f="edge",h=t(o,!0)):a&&(f="edge",h=t(a,!0)),h?(f=="node"?i(Og(h)):i(Gg(h)),u(f)):(i(null),u(null))},[n,r,o,a,l,i,u,e,t]),s?g.jsx("div",{className:"bg-background/80 max-w-xs rounded-lg border-2 p-2 text-xs backdrop-blur-lg",children:c=="node"?g.jsx(Mg,{node:s}):g.jsx(Fg,{edge:s})}):g.jsx(g.Fragment,{})},Og=e=>{const t=te.getState(),r=[];if(t.sigmaGraph&&t.rawGraph)try{if(!t.sigmaGraph.hasNode(e.id))return console.warn("Node not found in sigmaGraph:",e.id),{...e,relationships:[]};const n=t.sigmaGraph.edges(e.id);for(const a of n){if(!t.sigmaGraph.hasEdge(a))continue;const o=t.rawGraph.getEdge(a,!0);if(o){const s=e.id===o.source?o.target:o.source;if(!t.sigmaGraph.hasNode(s))continue;const i=t.rawGraph.getNode(s);i&&r.push({type:"Neighbour",id:s,label:i.properties.entity_id?i.properties.entity_id:i.labels.join(", ")})}}}catch(n){console.error("Error refining node properties:",n)}return{...e,relationships:r}},Gg=e=>{const t=te.getState();let r,n;if(t.sigmaGraph&&t.rawGraph)try{if(!t.sigmaGraph.hasEdge(e.dynamicId))return console.warn("Edge not found in sigmaGraph:",e.id,"dynamicId:",e.dynamicId),{...e,sourceNode:void 0,targetNode:void 0};t.sigmaGraph.hasNode(e.source)&&(r=t.rawGraph.getNode(e.source)),t.sigmaGraph.hasNode(e.target)&&(n=t.rawGraph.getNode(e.target))}catch(a){console.error("Error refining edge properties:",a)}return{...e,sourceNode:r,targetNode:n}},$e=({name:e,value:t,onClick:r,tooltip:n,nodeId:a,edgeId:o,dynamicId:l,entityId:s,entityType:i,sourceId:c,targetId:u,isEditable:f=!1})=>{const{t:h}=Se(),d=y=>{const w=`graphPanel.propertiesView.node.propertyNames.${y}`,C=h(w);return C===w?y:C};return f&&(e==="description"||e==="entity_id"||e==="keywords")?g.jsx(zg,{name:e,value:t,onClick:r,nodeId:a,entityId:s,edgeId:o,dynamicId:l,entityType:i,sourceId:c,targetId:u,isEditable:!0,tooltip:n||(typeof t=="string"?t:JSON.stringify(t,null,2))}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-primary/60 tracking-wide whitespace-nowrap",children:d(e)}),":",g.jsx(ti,{className:"hover:bg-primary/20 rounded p-1 overflow-hidden text-ellipsis",tooltipClassName:"max-w-80 -translate-x-13",text:t,tooltip:n||(typeof t=="string"?t:JSON.stringify(t,null,2)),side:"left",onClick:r})]})},Mg=({node:e})=>{const{t}=Se(),r=()=>{te.getState().triggerNodeExpand(e.id)},n=()=>{te.getState().triggerNodePrune(e.id)};return g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-blue-700",children:t("graphPanel.propertiesView.node.title")}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx(we,{size:"icon",variant:"ghost",className:"h-7 w-7 border border-gray-400 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",onClick:r,tooltip:t("graphPanel.propertiesView.node.expandNode"),children:g.jsx(du,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})}),g.jsx(we,{size:"icon",variant:"ghost",className:"h-7 w-7 border border-gray-400 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",onClick:n,tooltip:t("graphPanel.propertiesView.node.pruneNode"),children:g.jsx(Mu,{className:"h-4 w-4 text-gray-900 dark:text-gray-300"})})]})]}),g.jsxs("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:[g.jsx($e,{name:t("graphPanel.propertiesView.node.id"),value:String(e.id)}),g.jsx($e,{name:t("graphPanel.propertiesView.node.labels"),value:e.labels.join(", "),onClick:()=>{te.getState().setSelectedNode(e.id,!0)}}),g.jsx($e,{name:t("graphPanel.propertiesView.node.degree"),value:e.degree})]}),g.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-amber-700",children:t("graphPanel.propertiesView.node.properties")}),g.jsx("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:Object.keys(e.properties).sort().map(a=>a==="created_at"?null:g.jsx($e,{name:a,value:e.properties[a],nodeId:String(e.id),entityId:e.properties.entity_id,entityType:"node",isEditable:a==="description"||a==="entity_id"},a))}),e.relationships.length>0&&g.jsxs(g.Fragment,{children:[g.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-emerald-700",children:t("graphPanel.propertiesView.node.relationships")}),g.jsx("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:e.relationships.map(({type:a,id:o,label:l})=>g.jsx($e,{name:a,value:l,onClick:()=>{te.getState().setSelectedNode(o,!0)}},o))})]})]})},Fg=({edge:e})=>{const{t}=Se();return g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-violet-700",children:t("graphPanel.propertiesView.edge.title")}),g.jsxs("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:[g.jsx($e,{name:t("graphPanel.propertiesView.edge.id"),value:e.id}),e.type&&g.jsx($e,{name:t("graphPanel.propertiesView.edge.type"),value:e.type}),g.jsx($e,{name:t("graphPanel.propertiesView.edge.source"),value:e.sourceNode?e.sourceNode.labels.join(", "):e.source,onClick:()=>{te.getState().setSelectedNode(e.source,!0)}}),g.jsx($e,{name:t("graphPanel.propertiesView.edge.target"),value:e.targetNode?e.targetNode.labels.join(", "):e.target,onClick:()=>{te.getState().setSelectedNode(e.target,!0)}})]}),g.jsx("h3",{className:"text-md pl-1 font-bold tracking-wide text-amber-700",children:t("graphPanel.propertiesView.edge.properties")}),g.jsx("div",{className:"bg-primary/5 max-h-96 overflow-auto rounded p-1",children:Object.keys(e.properties).sort().map(r=>{var n,a;return r==="created_at"?null:g.jsx($e,{name:r,value:e.properties[r],edgeId:String(e.id),dynamicId:String(e.dynamicId),entityType:"edge",sourceId:((n=e.sourceNode)==null?void 0:n.properties.entity_id)||e.source,targetId:((a=e.targetNode)==null?void 0:a.properties.entity_id)||e.target,isEditable:r==="description"||r==="keywords"},r)})})]})},$g=()=>{const{t:e}=Se(),t=Z.use.graphQueryMaxDepth(),r=Z.use.graphMaxNodes();return g.jsxs("div",{className:"absolute bottom-4 left-[calc(1rem+2.5rem)] flex items-center gap-2 text-xs text-gray-400",children:[g.jsxs("div",{children:[e("graphPanel.sideBar.settings.depth"),": ",t]}),g.jsxs("div",{children:[e("graphPanel.sideBar.settings.max"),": ",r]})]})},ri=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("bg-card text-card-foreground rounded-xl border shadow",e),...t}));ri.displayName="Card";const Hg=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("flex flex-col space-y-1.5 p-6",e),...t}));Hg.displayName="CardHeader";const Bg=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("leading-none font-semibold tracking-tight",e),...t}));Bg.displayName="CardTitle";const Vg=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("text-muted-foreground text-sm",e),...t}));Vg.displayName="CardDescription";const qg=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("p-6 pt-0",e),...t}));qg.displayName="CardContent";const Ug=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("flex items-center p-6 pt-0",e),...t}));Ug.displayName="CardFooter";function Wg(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var Un="ScrollArea",[ni]=kn(Un),[Xg,Le]=ni(Un),oi=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:o=600,...l}=e,[s,i]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(null),[d,y]=m.useState(null),[w,C]=m.useState(null),[A,S]=m.useState(0),[j,T]=m.useState(0),[I,P]=m.useState(!1),[p,_]=m.useState(!1),x=Ve(t,N=>i(N)),R=Yi(a);return g.jsx(Xg,{scope:r,type:n,dir:R,scrollHideDelay:o,scrollArea:s,viewport:c,onViewportChange:u,content:f,onContentChange:h,scrollbarX:d,onScrollbarXChange:y,scrollbarXEnabled:I,onScrollbarXEnabledChange:P,scrollbarY:w,onScrollbarYChange:C,scrollbarYEnabled:p,onScrollbarYEnabledChange:_,onCornerWidthChange:S,onCornerHeightChange:T,children:g.jsx(_e.div,{dir:R,...l,ref:x,style:{position:"relative","--radix-scroll-area-corner-width":A+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});oi.displayName=Un;var ai="ScrollAreaViewport",si=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...o}=e,l=Le(ai,r),s=m.useRef(null),i=Ve(t,s,l.onViewportChange);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),g.jsx(_e.div,{"data-radix-scroll-area-viewport":"",...o,ref:i,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:g.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});si.displayName=ai;var qe="ScrollAreaScrollbar",Wn=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Le(qe,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=a,s=e.orientation==="horizontal";return m.useEffect(()=>(s?o(!0):l(!0),()=>{s?o(!1):l(!1)}),[s,o,l]),a.type==="hover"?g.jsx(Yg,{...n,ref:t,forceMount:r}):a.type==="scroll"?g.jsx(Kg,{...n,ref:t,forceMount:r}):a.type==="auto"?g.jsx(ii,{...n,ref:t,forceMount:r}):a.type==="always"?g.jsx(Xn,{...n,ref:t}):null});Wn.displayName=qe;var Yg=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Le(qe,e.__scopeScrollArea),[o,l]=m.useState(!1);return m.useEffect(()=>{const s=a.scrollArea;let i=0;if(s){const c=()=>{window.clearTimeout(i),l(!0)},u=()=>{i=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",u),()=>{window.clearTimeout(i),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),g.jsx(_t,{present:r||o,children:g.jsx(ii,{"data-state":o?"visible":"hidden",...n,ref:t})})}),Kg=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Le(qe,e.__scopeScrollArea),o=e.orientation==="horizontal",l=pr(()=>i("SCROLL_END"),100),[s,i]=Wg("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>i("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,i]),m.useEffect(()=>{const c=a.viewport,u=o?"scrollLeft":"scrollTop";if(c){let f=c[u];const h=()=>{const d=c[u];f!==d&&(i("SCROLL"),l()),f=d};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[a.viewport,o,i,l]),g.jsx(_t,{present:r||s!=="hidden",children:g.jsx(Xn,{"data-state":s==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ke(e.onPointerEnter,()=>i("POINTER_ENTER")),onPointerLeave:ke(e.onPointerLeave,()=>i("POINTER_LEAVE"))})})}),ii=m.forwardRef((e,t)=>{const r=Le(qe,e.__scopeScrollArea),{forceMount:n,...a}=e,[o,l]=m.useState(!1),s=e.orientation==="horizontal",i=pr(()=>{if(r.viewport){const c=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(s?c:u)}},10);return xt(r.viewport,i),xt(r.content,i),g.jsx(_t,{present:n||o,children:g.jsx(Xn,{"data-state":o?"visible":"hidden",...a,ref:t})})}),Xn=m.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Le(qe,e.__scopeScrollArea),o=m.useRef(null),l=m.useRef(0),[s,i]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=fi(s.viewport,s.content),u={...n,sizes:s,onSizesChange:i,hasThumb:c>0&&c<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function f(h,d){return rp(h,l.current,s,d)}return r==="horizontal"?g.jsx(Qg,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollLeft,d=fa(h,s,a.dir);o.current.style.transform=`translate3d(${d}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?g.jsx(Jg,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollTop,d=fa(h,s);o.current.style.transform=`translate3d(0, ${d}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),Qg=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Le(qe,e.__scopeScrollArea),[l,s]=m.useState(),i=m.useRef(null),c=Ve(t,i,o.onScrollbarXChange);return m.useEffect(()=>{i.current&&s(getComputedStyle(i.current))},[i]),g.jsx(ci,{"data-orientation":"horizontal",...a,ref:c,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":gr(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),gi(h,f)&&u.preventDefault()}},onResize:()=>{i.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:i.current.clientWidth,paddingStart:tr(l.paddingLeft),paddingEnd:tr(l.paddingRight)}})}})}),Jg=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,o=Le(qe,e.__scopeScrollArea),[l,s]=m.useState(),i=m.useRef(null),c=Ve(t,i,o.onScrollbarYChange);return m.useEffect(()=>{i.current&&s(getComputedStyle(i.current))},[i]),g.jsx(ci,{"data-orientation":"vertical",...a,ref:c,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":gr(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),gi(h,f)&&u.preventDefault()}},onResize:()=>{i.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:i.current.clientHeight,paddingStart:tr(l.paddingTop),paddingEnd:tr(l.paddingBottom)}})}})}),[Zg,li]=ni(qe),ci=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:s,onThumbPositionChange:i,onDragScroll:c,onWheelScroll:u,onResize:f,...h}=e,d=Le(qe,r),[y,w]=m.useState(null),C=Ve(t,x=>w(x)),A=m.useRef(null),S=m.useRef(""),j=d.viewport,T=n.content-n.viewport,I=ut(u),P=ut(i),p=pr(f,10);function _(x){if(A.current){const R=x.clientX-A.current.left,N=x.clientY-A.current.top;c({x:R,y:N})}}return m.useEffect(()=>{const x=R=>{const N=R.target;(y==null?void 0:y.contains(N))&&I(R,T)};return document.addEventListener("wheel",x,{passive:!1}),()=>document.removeEventListener("wheel",x,{passive:!1})},[j,y,T,I]),m.useEffect(P,[n,P]),xt(y,p),xt(d.content,p),g.jsx(Zg,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:ut(o),onThumbPointerUp:ut(l),onThumbPositionChange:P,onThumbPointerDown:ut(s),children:g.jsx(_e.div,{...h,ref:C,style:{position:"absolute",...h.style},onPointerDown:ke(e.onPointerDown,x=>{x.button===0&&(x.target.setPointerCapture(x.pointerId),A.current=y.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",d.viewport&&(d.viewport.style.scrollBehavior="auto"),_(x))}),onPointerMove:ke(e.onPointerMove,_),onPointerUp:ke(e.onPointerUp,x=>{const R=x.target;R.hasPointerCapture(x.pointerId)&&R.releasePointerCapture(x.pointerId),document.body.style.webkitUserSelect=S.current,d.viewport&&(d.viewport.style.scrollBehavior=""),A.current=null})})})}),er="ScrollAreaThumb",ui=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=li(er,e.__scopeScrollArea);return g.jsx(_t,{present:r||a.hasThumb,children:g.jsx(ep,{ref:t,...n})})}),ep=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,o=Le(er,r),l=li(er,r),{onThumbPositionChange:s}=l,i=Ve(t,f=>l.onThumbChange(f)),c=m.useRef(void 0),u=pr(()=>{c.current&&(c.current(),c.current=void 0)},100);return m.useEffect(()=>{const f=o.viewport;if(f){const h=()=>{if(u(),!c.current){const d=np(f,s);c.current=d,s()}};return s(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[o.viewport,u,s]),g.jsx(_e.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:i,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ke(e.onPointerDownCapture,f=>{const d=f.target.getBoundingClientRect(),y=f.clientX-d.left,w=f.clientY-d.top;l.onThumbPointerDown({x:y,y:w})}),onPointerUp:ke(e.onPointerUp,l.onThumbPointerUp)})});ui.displayName=er;var Yn="ScrollAreaCorner",di=m.forwardRef((e,t)=>{const r=Le(Yn,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?g.jsx(tp,{...e,ref:t}):null});di.displayName=Yn;var tp=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Le(Yn,r),[o,l]=m.useState(0),[s,i]=m.useState(0),c=!!(o&&s);return xt(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),i(u)}),xt(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),c?g.jsx(_e.div,{...n,ref:t,style:{width:o,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function tr(e){return e?parseInt(e,10):0}function fi(e,t){const r=e/t;return isNaN(r)?0:r}function gr(e){const t=fi(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function rp(e,t,r,n="ltr"){const a=gr(r),o=a/2,l=t||o,s=a-l,i=r.scrollbar.paddingStart+l,c=r.scrollbar.size-r.scrollbar.paddingEnd-s,u=r.content-r.viewport,f=n==="ltr"?[0,u]:[u*-1,0];return hi([i,c],f)(e)}function fa(e,t,r="ltr"){const n=gr(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,l=t.content-t.viewport,s=o-n,i=r==="ltr"?[0,l]:[l*-1,0],c=Qi(e,i);return hi([0,l],[0,s])(c)}function hi(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function gi(e,t){return e>0&&e<t}var np=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return(function a(){const o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,s=r.top!==o.top;(l||s)&&t(),r=o,n=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(n)};function pr(e,t){const r=ut(e),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function xt(e,t){const r=ut(t);Ki(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var pi=oi,op=si,ap=di;const mi=m.forwardRef(({className:e,children:t,...r},n)=>g.jsxs(pi,{ref:n,className:ue("relative overflow-hidden",e),...r,children:[g.jsx(op,{className:"h-full w-full rounded-[inherit]",children:t}),g.jsx(vi,{}),g.jsx(ap,{})]}));mi.displayName=pi.displayName;const vi=m.forwardRef(({className:e,orientation:t="vertical",...r},n)=>g.jsx(Wn,{ref:n,orientation:t,className:ue("flex touch-none transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:g.jsx(ui,{className:"bg-border relative flex-1 rounded-full"})}));vi.displayName=Wn.displayName;const sp=({className:e})=>{const{t}=Se(),r=te.use.typeColorMap();return!r||r.size===0?null:g.jsxs(ri,{className:`p-2 max-w-xs ${e}`,children:[g.jsx("h3",{className:"text-sm font-medium mb-2",children:t("graphPanel.legend")}),g.jsx(mi,{className:"max-h-80",children:g.jsx("div",{className:"flex flex-col gap-1",children:Array.from(r.entries()).map(([n,a])=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a}}),g.jsx("span",{className:"text-xs truncate",title:n,children:t(`graphPanel.nodeTypes.${n.toLowerCase()}`,n)})]},n))})})]})},ip=()=>{const{t:e}=Se(),t=Z.use.showLegend(),r=Z.use.setShowLegend(),n=m.useCallback(()=>{r(!t)},[t,r]);return g.jsx(we,{variant:Ie,onClick:n,tooltip:e("graphPanel.sideBar.legendControl.toggleLegend"),size:"icon",children:g.jsx(Vc,{})})},lp=An("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ha({className:e,variant:t,...r}){return g.jsx("div",{className:ue(lp({variant:t}),e),...r})}const cp=An("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),_n=m.forwardRef(({className:e,variant:t,...r},n)=>g.jsx("div",{ref:n,role:"alert",className:ue(cp({variant:t}),e),...r}));_n.displayName="Alert";const up=m.forwardRef(({className:e,...t},r)=>g.jsx("h5",{ref:r,className:ue("mb-1 leading-none font-medium tracking-tight",e),...t}));up.displayName="AlertTitle";const Sn=m.forwardRef(({className:e,...t},r)=>g.jsx("div",{ref:r,className:ue("text-sm [&_p]:leading-relaxed",e),...t}));Sn.displayName="AlertDescription";const dp=({value:e="",onChange:t,placeholder:r="Enter SRN (e.g., 1.abc123...def.user.alice.proj_research)",showValidation:n=!0,allowEmpty:a=!0,className:o=""})=>{const[l,s]=m.useState(e),[i,c]=m.useState(!1),[u,f]=m.useState(null),[h,d]=m.useState([]),[y,w]=m.useState(!1),C=qn(l,500);m.useEffect(()=>{if(!C&&a){f(null),t==null||t("");return}if(!C){f({valid:!1,error:"SRN is required"});return}(async()=>{c(!0);try{const _=await wl(C);f(_),_.valid&&(t==null||t(C))}catch(_){f({valid:!1,error:_ instanceof Error?_.message:"Validation failed"})}finally{c(!1)}})()},[C,a,t]);const A=m.useCallback(async()=>{try{const p=await xl(void 0,void 0,void 0,50);d(p.scopes)}catch(p){console.error("Failed to load scopes:",p)}},[]);m.useEffect(()=>{A()},[A]);const S=p=>{s(p)},j=p=>{s(p),w(!1)},T=p=>{const _=[p.subject_type,p.subject_id];return p.project&&_.push(`proj_${p.project}`),p.thread&&_.push(`thr_${p.thread}`),p.topic&&_.push(`top_${p.topic}`),_.join(".")},I=()=>i?g.jsx(Ln,{className:"h-4 w-4 animate-spin text-gray-400"}):u!=null&&u.valid?g.jsx(ho,{className:"h-4 w-4 text-green-500"}):u&&!u.valid?g.jsx(go,{className:"h-4 w-4 text-red-500"}):null,P=h.filter(p=>p.srn.toLowerCase().includes(l.toLowerCase())).slice(0,10);return g.jsxs("div",{className:`space-y-2 ${o}`,children:[g.jsxs("div",{className:"relative",children:[g.jsx(At,{value:l,onChange:p=>S(p.target.value),placeholder:r,onFocus:()=>w(!0),onBlur:()=>setTimeout(()=>w(!1),200),className:`pr-10 ${u!=null&&u.valid?"border-green-500":u&&!u.valid?"border-red-500":""}`}),g.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:I()}),y&&P.length>0&&g.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[P.map(p=>g.jsxs("div",{className:"px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>j(p.srn),children:[g.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:T(p.components)}),g.jsx("div",{className:"text-xs text-gray-500 truncate",children:p.srn}),g.jsxs("div",{className:"flex gap-1 mt-1",children:[g.jsxs(ha,{variant:"secondary",className:"text-xs",children:["Depth: ",p.depth]}),g.jsxs(ha,{variant:"outline",className:"text-xs",children:[p.components.workspace.slice(0,8),"..."]})]})]},p.srn)),g.jsxs("div",{className:"px-3 py-2 text-xs text-gray-500 bg-gray-50",children:[g.jsx(es,{className:"h-3 w-3 inline mr-1"}),P.length," of ",h.length," scopes shown"]})]})]}),n&&u&&g.jsx("div",{children:u.valid&&u.components?g.jsxs(_n,{className:"border-green-200 bg-green-50",children:[g.jsx(ho,{className:"h-4 w-4 text-green-600"}),g.jsx(Sn,{className:"text-green-700",children:g.jsxs("div",{className:"space-y-1",children:[g.jsx("div",{children:"Valid SRN"}),g.jsxs("div",{className:"text-xs space-y-1",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Workspace:"})," ",u.components.workspace]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Subject:"})," ",u.components.subject_type,".",u.components.subject_id]}),u.components.project&&g.jsxs("div",{children:[g.jsx("strong",{children:"Project:"})," ",u.components.project]}),u.components.thread&&g.jsxs("div",{children:[g.jsx("strong",{children:"Thread:"})," ",u.components.thread]}),u.components.topic&&g.jsxs("div",{children:[g.jsx("strong",{children:"Topic:"})," ",u.components.topic]})]})]})})]}):u.error?g.jsxs(_n,{className:"border-red-200 bg-red-50",children:[g.jsx(go,{className:"h-4 w-4 text-red-600"}),g.jsx(Sn,{className:"text-red-700",children:u.error})]}):null}),g.jsx("div",{className:"text-xs text-gray-500",children:g.jsxs("details",{className:"mt-2",children:[g.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Quick SRN Builder"}),g.jsxs("div",{className:"mt-2 p-3 border border-gray-200 rounded-md bg-gray-50 space-y-2",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Format:"})," 1.<workspace>.<subject_type>.<subject_id>[.proj_<project>][.thr_<thread>][.top_<topic>]"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Example:"})," 1.abc123...def.user.alice.proj_research.thr_main.top_models"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[g.jsxs("div",{children:[g.jsx("strong",{children:"Subject Types:"})," user, agent, system"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Workspace:"})," 32-char hex ID"]}),g.jsxs("div",{children:[g.jsx("strong",{children:"Optional:"})," project, thread, topic"]})]})]})]})})]})},fp=e=>({allowInvalidContainer:!0,defaultNodeType:"default",defaultEdgeType:"curvedNoArrow",renderEdgeLabels:!1,edgeProgramClasses:{arrow:Ii,curvedArrow:ef,curvedNoArrow:cr()},nodeProgramClasses:{default:Od,circel:Ni,point:dd},labelGridCellSize:60,labelRenderedSizeThreshold:12,enableEdgeEvents:!0,labelColor:{color:e?Jr:eo,attribute:"labelColor"},edgeLabelColor:{color:e?Jr:eo,attribute:"labelColor"},edgeLabelSize:8,labelSize:12}),hp=()=>{const e=Sa(),t=Be(),[r,n]=m.useState(null);return m.useEffect(()=>{e({downNode:a=>{n(a.node),t.getGraph().setNodeAttribute(a.node,"highlighted",!0)},mousemovebody:a=>{if(!r)return;const o=t.viewportToGraph(a);t.getGraph().setNodeAttribute(r,"x",o.x),t.getGraph().setNodeAttribute(r,"y",o.y),a.preventSigmaDefault(),a.original.preventDefault(),a.original.stopPropagation()},mouseup:()=>{r&&(n(null),t.getGraph().removeNodeAttribute(r,"highlighted"))},mousedown:a=>{a.original.buttons!==0&&!t.getCustomBBox()&&t.setCustomBBox(t.getBBox())}})},[e,t,r]),null},Rm=()=>{const[e,t]=m.useState({}),[r,n]=m.useState(""),[a,o]=m.useState(!1),l=m.useRef(null),s=te.use.selectedNode(),i=te.use.focusedNode(),c=te.use.moveToSelectedNode(),u=te.use.isFetching(),f=Z.use.showPropertyPanel(),h=Z.use.showNodeSearchBar(),d=Z.use.enableNodeDrag(),y=Z.use.showLegend(),w=Z.use.theme();m.useEffect(()=>{const I=fp(w==="dark");t(I),console.log("Initialized sigma settings for theme:",w)},[w]),m.useEffect(()=>()=>{const T=te.getState().sigmaInstance;if(T)try{T.kill(),te.getState().setSigmaInstance(null),console.log("Cleared sigma instance on Graphviewer unmount")}catch(I){console.error("Error cleaning up sigma instance:",I)}},[]);const C=m.useCallback(T=>{T===null?te.getState().setFocusedNode(null):T.type==="nodes"&&te.getState().setFocusedNode(T.id)},[]),A=m.useCallback(T=>{T===null?te.getState().setSelectedNode(null):T.type==="nodes"&&te.getState().setSelectedNode(T.id,!0)},[]),S=m.useMemo(()=>i??s,[i,s]),j=m.useMemo(()=>s?{type:"nodes",id:s}:null,[s]);return g.jsxs("div",{className:"relative h-full w-full overflow-hidden",children:[g.jsxs(Li,{settings:e,className:"!bg-background !size-full overflow-hidden",ref:l,children:[g.jsx(yh,{}),d&&g.jsx(hp,{}),g.jsx(tf,{node:S,move:c}),g.jsxs("div",{className:"absolute top-2 left-2 flex flex-col items-start gap-2",children:[g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(ag,{}),h&&g.jsx(rg,{value:j,onFocus:C,onChange:A})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>o(!a),className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 rounded border",title:"Toggle scope filter",children:"🔍 Scope Filter"}),a&&g.jsxs("div",{className:"bg-white/90 backdrop-blur p-2 rounded border shadow-lg",children:[g.jsx(dp,{value:r,onChange:n,placeholder:"Filter by scope...",showValidation:!1,allowEmpty:!0,className:"w-80"}),r&&g.jsxs("div",{className:"mt-1 text-xs text-green-600",children:["Filtering graph by scope: ",r.split(".").slice(-2).join(".")]})]})]})]}),g.jsxs("div",{className:"bg-background/60 absolute bottom-2 left-2 flex flex-col rounded-xl border-2 backdrop-blur-lg",children:[g.jsx(mh,{}),g.jsx(bh,{}),g.jsx(wh,{}),g.jsx(ip,{}),g.jsx(Rh,{})]}),f&&g.jsx("div",{className:"absolute top-2 right-2",children:g.jsx(Dg,{})}),y&&g.jsx("div",{className:"absolute bottom-10 right-2",children:g.jsx(sp,{className:"bg-background/60 backdrop-blur-lg"})}),g.jsx($g,{})]}),u&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 z-10",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"mb-2 h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),g.jsx("p",{children:"Loading Graph Data..."})]})})]})};export{Xp as $,rm as A,we as B,Qp as C,od as D,sm as E,lm as F,Up as G,qp as H,At as I,Wp as J,Lp as K,Ln as L,jn as M,Z as N,vm as O,zp as P,kp as Q,Hg as R,mi as S,wm as T,xm as U,qg as V,Lu as W,Ju as X,Vp as Y,zu as Z,Kp as _,em as a,um as a0,Ya as a1,Ka as a2,Qa as a3,In as a4,vh as a5,dm as a6,om as a7,ll as a8,Dp as a9,am as aA,es as aB,ha as aC,pm as aD,_n as aE,ho as aF,Sn as aG,Yp as aH,nm as aI,go as aJ,ym as aK,hm as aL,_m as aM,Op as aN,Gp as aO,Mp as aP,$p as aQ,Rm as aR,Ip as aS,Pp as aT,Fp as aU,Hp as aV,Tp as aa,Cp as ab,bp as ac,qn as ad,dp as ae,mm as af,ta as ag,km as ah,Tm as ai,Cm as aj,fo as ak,Sp as al,Ep as am,Pn as an,zn as ao,gm as ap,lr as aq,Yt as ar,wp as as,Sm as at,_p as au,cm as av,fm as aw,La as ax,Qr as ay,xl as az,Za as b,ue as c,ri as d,Bg as e,Vg as f,rt as g,im as h,Rp as i,or as j,Em as k,ns as l,os as m,ss as n,is as o,jp as p,Ap as q,qs as r,xp as s,as as t,Se as u,Np as v,bm as w,Jp as x,Zp as y,tm as z};
